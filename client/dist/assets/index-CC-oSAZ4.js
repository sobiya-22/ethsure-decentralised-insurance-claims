import{aa as so,Z as Yi,an as oo,ao as Fr,ap as zr,aq as ao,ar as co,c as ue,W as fe,as as wi,S as fr,at as uo,au as fo,av as ho,aw as lo,ax as po,ay as go,d as Re,az as yo,aA as Wi,aB as mo,aC as nt,p as wo,J as vo,q as bo,ab as hr,n as xo,_ as Ee,C as Eo,a as Mo,b as Ao,l as Bo}from"./index-B_tSOIix.js";import{c as So,a as Io,b as Ge}from"./solanaRpcMiddlewares-DezUEEdq.js";var xn={exports:{}},_o=xn.exports,vi;function Xi(){return vi||(vi=1,function(t){(function(e,r){function n(l,i){if(!l)throw new Error(i||"Assertion failed")}function c(l,i){l.super_=i;var u=function(){};u.prototype=i.prototype,l.prototype=new u,l.prototype.constructor=l}function s(l,i,u){if(s.isBN(l))return l;this.negative=0,this.words=null,this.length=0,this.red=null,l!==null&&((i==="le"||i==="be")&&(u=i,i=10),this._init(l||0,i||10,u||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var f;try{typeof window<"u"&&typeof window.Buffer<"u"?f=window.Buffer:f=so.Buffer}catch{}s.isBN=function(i){return i instanceof s?!0:i!==null&&typeof i=="object"&&i.constructor.wordSize===s.wordSize&&Array.isArray(i.words)},s.max=function(i,u){return i.cmp(u)>0?i:u},s.min=function(i,u){return i.cmp(u)<0?i:u},s.prototype._init=function(i,u,h){if(typeof i=="number")return this._initNumber(i,u,h);if(typeof i=="object")return this._initArray(i,u,h);u==="hex"&&(u=16),n(u===(u|0)&&u>=2&&u<=36),i=i.toString().replace(/\s+/g,"");var g=0;i[0]==="-"&&(g++,this.negative=1),g<i.length&&(u===16?this._parseHex(i,g,h):(this._parseBase(i,u,g),h==="le"&&this._initArray(this.toArray(),u,h)))},s.prototype._initNumber=function(i,u,h){i<0&&(this.negative=1,i=-i),i<67108864?(this.words=[i&67108863],this.length=1):i<4503599627370496?(this.words=[i&67108863,i/67108864&67108863],this.length=2):(n(i<9007199254740992),this.words=[i&67108863,i/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),u,h)},s.prototype._initArray=function(i,u,h){if(n(typeof i.length=="number"),i.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(i.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var m,b,E=0;if(h==="be")for(g=i.length-1,m=0;g>=0;g-=3)b=i[g]|i[g-1]<<8|i[g-2]<<16,this.words[m]|=b<<E&67108863,this.words[m+1]=b>>>26-E&67108863,E+=24,E>=26&&(E-=26,m++);else if(h==="le")for(g=0,m=0;g<i.length;g+=3)b=i[g]|i[g+1]<<8|i[g+2]<<16,this.words[m]|=b<<E&67108863,this.words[m+1]=b>>>26-E&67108863,E+=24,E>=26&&(E-=26,m++);return this._strip()};function v(l,i){var u=l.charCodeAt(i);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;n(!1,"Invalid character in "+l)}function p(l,i,u){var h=v(l,u);return u-1>=i&&(h|=v(l,u-1)<<4),h}s.prototype._parseHex=function(i,u,h){this.length=Math.ceil((i.length-u)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var m=0,b=0,E;if(h==="be")for(g=i.length-1;g>=u;g-=2)E=p(i,u,g)<<m,this.words[b]|=E&67108863,m>=18?(m-=18,b+=1,this.words[b]|=E>>>26):m+=8;else{var y=i.length-u;for(g=y%2===0?u+1:u;g<i.length;g+=2)E=p(i,u,g)<<m,this.words[b]|=E&67108863,m>=18?(m-=18,b+=1,this.words[b]|=E>>>26):m+=8}this._strip()};function M(l,i,u,h){for(var g=0,m=0,b=Math.min(l.length,u),E=i;E<b;E++){var y=l.charCodeAt(E)-48;g*=h,y>=49?m=y-49+10:y>=17?m=y-17+10:m=y,n(y>=0&&m<h,"Invalid character"),g+=m}return g}s.prototype._parseBase=function(i,u,h){this.words=[0],this.length=1;for(var g=0,m=1;m<=67108863;m*=u)g++;g--,m=m/u|0;for(var b=i.length-h,E=b%g,y=Math.min(b,b-E)+h,o=0,a=h;a<y;a+=g)o=M(i,a,a+g,u),this.imuln(m),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(E!==0){var d=1;for(o=M(i,a,i.length,u),a=0;a<E;a++)d*=u;this.imuln(d),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this._strip()},s.prototype.copy=function(i){i.words=new Array(this.length);for(var u=0;u<this.length;u++)i.words[u]=this.words[u];i.length=this.length,i.negative=this.negative,i.red=this.red};function k(l,i){l.words=i.words,l.length=i.length,l.negative=i.negative,l.red=i.red}if(s.prototype._move=function(i){k(i,this)},s.prototype.clone=function(){var i=new s(null);return this.copy(i),i},s.prototype._expand=function(i){for(;this.length<i;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=O}catch{s.prototype.inspect=O}else s.prototype.inspect=O;function O(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var B=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(i,u){i=i||10,u=u|0||1;var h;if(i===16||i==="hex"){h="";for(var g=0,m=0,b=0;b<this.length;b++){var E=this.words[b],y=((E<<g|m)&16777215).toString(16);m=E>>>24-g&16777215,g+=2,g>=26&&(g-=26,b--),m!==0||b!==this.length-1?h=B[6-y.length]+y+h:h=y+h}for(m!==0&&(h=m.toString(16)+h);h.length%u!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(i===(i|0)&&i>=2&&i<=36){var o=_[i],a=C[i];h="";var d=this.clone();for(d.negative=0;!d.isZero();){var w=d.modrn(a).toString(i);d=d.idivn(a),d.isZero()?h=w+h:h=B[o-w.length]+w+h}for(this.isZero()&&(h="0"+h);h.length%u!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var i=this.words[0];return this.length===2?i+=this.words[1]*67108864:this.length===3&&this.words[2]===1?i+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-i:i},s.prototype.toJSON=function(){return this.toString(16,2)},f&&(s.prototype.toBuffer=function(i,u){return this.toArrayLike(f,i,u)}),s.prototype.toArray=function(i,u){return this.toArrayLike(Array,i,u)};var F=function(i,u){return i.allocUnsafe?i.allocUnsafe(u):new i(u)};s.prototype.toArrayLike=function(i,u,h){this._strip();var g=this.byteLength(),m=h||Math.max(1,g);n(g<=m,"byte array longer than desired length"),n(m>0,"Requested array length <= 0");var b=F(i,m),E=u==="le"?"LE":"BE";return this["_toArrayLike"+E](b,g),b},s.prototype._toArrayLikeLE=function(i,u){for(var h=0,g=0,m=0,b=0;m<this.length;m++){var E=this.words[m]<<b|g;i[h++]=E&255,h<i.length&&(i[h++]=E>>8&255),h<i.length&&(i[h++]=E>>16&255),b===6?(h<i.length&&(i[h++]=E>>24&255),g=0,b=0):(g=E>>>24,b+=2)}if(h<i.length)for(i[h++]=g;h<i.length;)i[h++]=0},s.prototype._toArrayLikeBE=function(i,u){for(var h=i.length-1,g=0,m=0,b=0;m<this.length;m++){var E=this.words[m]<<b|g;i[h--]=E&255,h>=0&&(i[h--]=E>>8&255),h>=0&&(i[h--]=E>>16&255),b===6?(h>=0&&(i[h--]=E>>24&255),g=0,b=0):(g=E>>>24,b+=2)}if(h>=0)for(i[h--]=g;h>=0;)i[h--]=0},Math.clz32?s.prototype._countBits=function(i){return 32-Math.clz32(i)}:s.prototype._countBits=function(i){var u=i,h=0;return u>=4096&&(h+=13,u>>>=13),u>=64&&(h+=7,u>>>=7),u>=8&&(h+=4,u>>>=4),u>=2&&(h+=2,u>>>=2),h+u},s.prototype._zeroBits=function(i){if(i===0)return 26;var u=i,h=0;return(u&8191)===0&&(h+=13,u>>>=13),(u&127)===0&&(h+=7,u>>>=7),(u&15)===0&&(h+=4,u>>>=4),(u&3)===0&&(h+=2,u>>>=2),(u&1)===0&&h++,h},s.prototype.bitLength=function(){var i=this.words[this.length-1],u=this._countBits(i);return(this.length-1)*26+u};function D(l){for(var i=new Array(l.bitLength()),u=0;u<i.length;u++){var h=u/26|0,g=u%26;i[u]=l.words[h]>>>g&1}return i}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var i=0,u=0;u<this.length;u++){var h=this._zeroBits(this.words[u]);if(i+=h,h!==26)break}return i},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(i){return this.negative!==0?this.abs().inotn(i).iaddn(1):this.clone()},s.prototype.fromTwos=function(i){return this.testn(i-1)?this.notn(i).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(i){for(;this.length<i.length;)this.words[this.length++]=0;for(var u=0;u<i.length;u++)this.words[u]=this.words[u]|i.words[u];return this._strip()},s.prototype.ior=function(i){return n((this.negative|i.negative)===0),this.iuor(i)},s.prototype.or=function(i){return this.length>i.length?this.clone().ior(i):i.clone().ior(this)},s.prototype.uor=function(i){return this.length>i.length?this.clone().iuor(i):i.clone().iuor(this)},s.prototype.iuand=function(i){var u;this.length>i.length?u=i:u=this;for(var h=0;h<u.length;h++)this.words[h]=this.words[h]&i.words[h];return this.length=u.length,this._strip()},s.prototype.iand=function(i){return n((this.negative|i.negative)===0),this.iuand(i)},s.prototype.and=function(i){return this.length>i.length?this.clone().iand(i):i.clone().iand(this)},s.prototype.uand=function(i){return this.length>i.length?this.clone().iuand(i):i.clone().iuand(this)},s.prototype.iuxor=function(i){var u,h;this.length>i.length?(u=this,h=i):(u=i,h=this);for(var g=0;g<h.length;g++)this.words[g]=u.words[g]^h.words[g];if(this!==u)for(;g<u.length;g++)this.words[g]=u.words[g];return this.length=u.length,this._strip()},s.prototype.ixor=function(i){return n((this.negative|i.negative)===0),this.iuxor(i)},s.prototype.xor=function(i){return this.length>i.length?this.clone().ixor(i):i.clone().ixor(this)},s.prototype.uxor=function(i){return this.length>i.length?this.clone().iuxor(i):i.clone().iuxor(this)},s.prototype.inotn=function(i){n(typeof i=="number"&&i>=0);var u=Math.ceil(i/26)|0,h=i%26;this._expand(u),h>0&&u--;for(var g=0;g<u;g++)this.words[g]=~this.words[g]&67108863;return h>0&&(this.words[g]=~this.words[g]&67108863>>26-h),this._strip()},s.prototype.notn=function(i){return this.clone().inotn(i)},s.prototype.setn=function(i,u){n(typeof i=="number"&&i>=0);var h=i/26|0,g=i%26;return this._expand(h+1),u?this.words[h]=this.words[h]|1<<g:this.words[h]=this.words[h]&~(1<<g),this._strip()},s.prototype.iadd=function(i){var u;if(this.negative!==0&&i.negative===0)return this.negative=0,u=this.isub(i),this.negative^=1,this._normSign();if(this.negative===0&&i.negative!==0)return i.negative=0,u=this.isub(i),i.negative=1,u._normSign();var h,g;this.length>i.length?(h=this,g=i):(h=i,g=this);for(var m=0,b=0;b<g.length;b++)u=(h.words[b]|0)+(g.words[b]|0)+m,this.words[b]=u&67108863,m=u>>>26;for(;m!==0&&b<h.length;b++)u=(h.words[b]|0)+m,this.words[b]=u&67108863,m=u>>>26;if(this.length=h.length,m!==0)this.words[this.length]=m,this.length++;else if(h!==this)for(;b<h.length;b++)this.words[b]=h.words[b];return this},s.prototype.add=function(i){var u;return i.negative!==0&&this.negative===0?(i.negative=0,u=this.sub(i),i.negative^=1,u):i.negative===0&&this.negative!==0?(this.negative=0,u=i.sub(this),this.negative=1,u):this.length>i.length?this.clone().iadd(i):i.clone().iadd(this)},s.prototype.isub=function(i){if(i.negative!==0){i.negative=0;var u=this.iadd(i);return i.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(i),this.negative=1,this._normSign();var h=this.cmp(i);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,m;h>0?(g=this,m=i):(g=i,m=this);for(var b=0,E=0;E<m.length;E++)u=(g.words[E]|0)-(m.words[E]|0)+b,b=u>>26,this.words[E]=u&67108863;for(;b!==0&&E<g.length;E++)u=(g.words[E]|0)+b,b=u>>26,this.words[E]=u&67108863;if(b===0&&E<g.length&&g!==this)for(;E<g.length;E++)this.words[E]=g.words[E];return this.length=Math.max(this.length,E),g!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(i){return this.clone().isub(i)};function q(l,i,u){u.negative=i.negative^l.negative;var h=l.length+i.length|0;u.length=h,h=h-1|0;var g=l.words[0]|0,m=i.words[0]|0,b=g*m,E=b&67108863,y=b/67108864|0;u.words[0]=E;for(var o=1;o<h;o++){for(var a=y>>>26,d=y&67108863,w=Math.min(o,i.length-1),I=Math.max(0,o-l.length+1);I<=w;I++){var N=o-I|0;g=l.words[N]|0,m=i.words[I]|0,b=g*m+d,a+=b/67108864|0,d=b&67108863}u.words[o]=d|0,y=a|0}return y!==0?u.words[o]=y|0:u.length--,u._strip()}var P=function(i,u,h){var g=i.words,m=u.words,b=h.words,E=0,y,o,a,d=g[0]|0,w=d&8191,I=d>>>13,N=g[1]|0,V=N&8191,j=N>>>13,it=g[2]|0,st=it&8191,at=it>>>13,rn=g[3]|0,lt=rn&8191,dt=rn>>>13,ni=g[4]|0,pt=ni&8191,gt=ni>>>13,ri=g[5]|0,yt=ri&8191,mt=ri>>>13,ii=g[6]|0,wt=ii&8191,vt=ii>>>13,si=g[7]|0,bt=si&8191,xt=si>>>13,oi=g[8]|0,Et=oi&8191,Mt=oi>>>13,ai=g[9]|0,At=ai&8191,Bt=ai>>>13,ci=m[0]|0,St=ci&8191,It=ci>>>13,ui=m[1]|0,_t=ui&8191,kt=ui>>>13,fi=m[2]|0,Rt=fi&8191,Lt=fi>>>13,hi=m[3]|0,Tt=hi&8191,Ut=hi>>>13,li=m[4]|0,Ot=li&8191,Ct=li>>>13,di=m[5]|0,Nt=di&8191,Ft=di>>>13,pi=m[6]|0,zt=pi&8191,qt=pi>>>13,gi=m[7]|0,Dt=gi&8191,Kt=gi>>>13,yi=m[8]|0,Pt=yi&8191,Ht=yi>>>13,mi=m[9]|0,Vt=mi&8191,Zt=mi>>>13;h.negative=i.negative^u.negative,h.length=19,y=Math.imul(w,St),o=Math.imul(w,It),o=o+Math.imul(I,St)|0,a=Math.imul(I,It);var Zn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,y=Math.imul(V,St),o=Math.imul(V,It),o=o+Math.imul(j,St)|0,a=Math.imul(j,It),y=y+Math.imul(w,_t)|0,o=o+Math.imul(w,kt)|0,o=o+Math.imul(I,_t)|0,a=a+Math.imul(I,kt)|0;var $n=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+($n>>>26)|0,$n&=67108863,y=Math.imul(st,St),o=Math.imul(st,It),o=o+Math.imul(at,St)|0,a=Math.imul(at,It),y=y+Math.imul(V,_t)|0,o=o+Math.imul(V,kt)|0,o=o+Math.imul(j,_t)|0,a=a+Math.imul(j,kt)|0,y=y+Math.imul(w,Rt)|0,o=o+Math.imul(w,Lt)|0,o=o+Math.imul(I,Rt)|0,a=a+Math.imul(I,Lt)|0;var jn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(jn>>>26)|0,jn&=67108863,y=Math.imul(lt,St),o=Math.imul(lt,It),o=o+Math.imul(dt,St)|0,a=Math.imul(dt,It),y=y+Math.imul(st,_t)|0,o=o+Math.imul(st,kt)|0,o=o+Math.imul(at,_t)|0,a=a+Math.imul(at,kt)|0,y=y+Math.imul(V,Rt)|0,o=o+Math.imul(V,Lt)|0,o=o+Math.imul(j,Rt)|0,a=a+Math.imul(j,Lt)|0,y=y+Math.imul(w,Tt)|0,o=o+Math.imul(w,Ut)|0,o=o+Math.imul(I,Tt)|0,a=a+Math.imul(I,Ut)|0;var Gn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,y=Math.imul(pt,St),o=Math.imul(pt,It),o=o+Math.imul(gt,St)|0,a=Math.imul(gt,It),y=y+Math.imul(lt,_t)|0,o=o+Math.imul(lt,kt)|0,o=o+Math.imul(dt,_t)|0,a=a+Math.imul(dt,kt)|0,y=y+Math.imul(st,Rt)|0,o=o+Math.imul(st,Lt)|0,o=o+Math.imul(at,Rt)|0,a=a+Math.imul(at,Lt)|0,y=y+Math.imul(V,Tt)|0,o=o+Math.imul(V,Ut)|0,o=o+Math.imul(j,Tt)|0,a=a+Math.imul(j,Ut)|0,y=y+Math.imul(w,Ot)|0,o=o+Math.imul(w,Ct)|0,o=o+Math.imul(I,Ot)|0,a=a+Math.imul(I,Ct)|0;var Yn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,y=Math.imul(yt,St),o=Math.imul(yt,It),o=o+Math.imul(mt,St)|0,a=Math.imul(mt,It),y=y+Math.imul(pt,_t)|0,o=o+Math.imul(pt,kt)|0,o=o+Math.imul(gt,_t)|0,a=a+Math.imul(gt,kt)|0,y=y+Math.imul(lt,Rt)|0,o=o+Math.imul(lt,Lt)|0,o=o+Math.imul(dt,Rt)|0,a=a+Math.imul(dt,Lt)|0,y=y+Math.imul(st,Tt)|0,o=o+Math.imul(st,Ut)|0,o=o+Math.imul(at,Tt)|0,a=a+Math.imul(at,Ut)|0,y=y+Math.imul(V,Ot)|0,o=o+Math.imul(V,Ct)|0,o=o+Math.imul(j,Ot)|0,a=a+Math.imul(j,Ct)|0,y=y+Math.imul(w,Nt)|0,o=o+Math.imul(w,Ft)|0,o=o+Math.imul(I,Nt)|0,a=a+Math.imul(I,Ft)|0;var Wn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,y=Math.imul(wt,St),o=Math.imul(wt,It),o=o+Math.imul(vt,St)|0,a=Math.imul(vt,It),y=y+Math.imul(yt,_t)|0,o=o+Math.imul(yt,kt)|0,o=o+Math.imul(mt,_t)|0,a=a+Math.imul(mt,kt)|0,y=y+Math.imul(pt,Rt)|0,o=o+Math.imul(pt,Lt)|0,o=o+Math.imul(gt,Rt)|0,a=a+Math.imul(gt,Lt)|0,y=y+Math.imul(lt,Tt)|0,o=o+Math.imul(lt,Ut)|0,o=o+Math.imul(dt,Tt)|0,a=a+Math.imul(dt,Ut)|0,y=y+Math.imul(st,Ot)|0,o=o+Math.imul(st,Ct)|0,o=o+Math.imul(at,Ot)|0,a=a+Math.imul(at,Ct)|0,y=y+Math.imul(V,Nt)|0,o=o+Math.imul(V,Ft)|0,o=o+Math.imul(j,Nt)|0,a=a+Math.imul(j,Ft)|0,y=y+Math.imul(w,zt)|0,o=o+Math.imul(w,qt)|0,o=o+Math.imul(I,zt)|0,a=a+Math.imul(I,qt)|0;var Xn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,y=Math.imul(bt,St),o=Math.imul(bt,It),o=o+Math.imul(xt,St)|0,a=Math.imul(xt,It),y=y+Math.imul(wt,_t)|0,o=o+Math.imul(wt,kt)|0,o=o+Math.imul(vt,_t)|0,a=a+Math.imul(vt,kt)|0,y=y+Math.imul(yt,Rt)|0,o=o+Math.imul(yt,Lt)|0,o=o+Math.imul(mt,Rt)|0,a=a+Math.imul(mt,Lt)|0,y=y+Math.imul(pt,Tt)|0,o=o+Math.imul(pt,Ut)|0,o=o+Math.imul(gt,Tt)|0,a=a+Math.imul(gt,Ut)|0,y=y+Math.imul(lt,Ot)|0,o=o+Math.imul(lt,Ct)|0,o=o+Math.imul(dt,Ot)|0,a=a+Math.imul(dt,Ct)|0,y=y+Math.imul(st,Nt)|0,o=o+Math.imul(st,Ft)|0,o=o+Math.imul(at,Nt)|0,a=a+Math.imul(at,Ft)|0,y=y+Math.imul(V,zt)|0,o=o+Math.imul(V,qt)|0,o=o+Math.imul(j,zt)|0,a=a+Math.imul(j,qt)|0,y=y+Math.imul(w,Dt)|0,o=o+Math.imul(w,Kt)|0,o=o+Math.imul(I,Dt)|0,a=a+Math.imul(I,Kt)|0;var Jn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,y=Math.imul(Et,St),o=Math.imul(Et,It),o=o+Math.imul(Mt,St)|0,a=Math.imul(Mt,It),y=y+Math.imul(bt,_t)|0,o=o+Math.imul(bt,kt)|0,o=o+Math.imul(xt,_t)|0,a=a+Math.imul(xt,kt)|0,y=y+Math.imul(wt,Rt)|0,o=o+Math.imul(wt,Lt)|0,o=o+Math.imul(vt,Rt)|0,a=a+Math.imul(vt,Lt)|0,y=y+Math.imul(yt,Tt)|0,o=o+Math.imul(yt,Ut)|0,o=o+Math.imul(mt,Tt)|0,a=a+Math.imul(mt,Ut)|0,y=y+Math.imul(pt,Ot)|0,o=o+Math.imul(pt,Ct)|0,o=o+Math.imul(gt,Ot)|0,a=a+Math.imul(gt,Ct)|0,y=y+Math.imul(lt,Nt)|0,o=o+Math.imul(lt,Ft)|0,o=o+Math.imul(dt,Nt)|0,a=a+Math.imul(dt,Ft)|0,y=y+Math.imul(st,zt)|0,o=o+Math.imul(st,qt)|0,o=o+Math.imul(at,zt)|0,a=a+Math.imul(at,qt)|0,y=y+Math.imul(V,Dt)|0,o=o+Math.imul(V,Kt)|0,o=o+Math.imul(j,Dt)|0,a=a+Math.imul(j,Kt)|0,y=y+Math.imul(w,Pt)|0,o=o+Math.imul(w,Ht)|0,o=o+Math.imul(I,Pt)|0,a=a+Math.imul(I,Ht)|0;var Qn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,y=Math.imul(At,St),o=Math.imul(At,It),o=o+Math.imul(Bt,St)|0,a=Math.imul(Bt,It),y=y+Math.imul(Et,_t)|0,o=o+Math.imul(Et,kt)|0,o=o+Math.imul(Mt,_t)|0,a=a+Math.imul(Mt,kt)|0,y=y+Math.imul(bt,Rt)|0,o=o+Math.imul(bt,Lt)|0,o=o+Math.imul(xt,Rt)|0,a=a+Math.imul(xt,Lt)|0,y=y+Math.imul(wt,Tt)|0,o=o+Math.imul(wt,Ut)|0,o=o+Math.imul(vt,Tt)|0,a=a+Math.imul(vt,Ut)|0,y=y+Math.imul(yt,Ot)|0,o=o+Math.imul(yt,Ct)|0,o=o+Math.imul(mt,Ot)|0,a=a+Math.imul(mt,Ct)|0,y=y+Math.imul(pt,Nt)|0,o=o+Math.imul(pt,Ft)|0,o=o+Math.imul(gt,Nt)|0,a=a+Math.imul(gt,Ft)|0,y=y+Math.imul(lt,zt)|0,o=o+Math.imul(lt,qt)|0,o=o+Math.imul(dt,zt)|0,a=a+Math.imul(dt,qt)|0,y=y+Math.imul(st,Dt)|0,o=o+Math.imul(st,Kt)|0,o=o+Math.imul(at,Dt)|0,a=a+Math.imul(at,Kt)|0,y=y+Math.imul(V,Pt)|0,o=o+Math.imul(V,Ht)|0,o=o+Math.imul(j,Pt)|0,a=a+Math.imul(j,Ht)|0,y=y+Math.imul(w,Vt)|0,o=o+Math.imul(w,Zt)|0,o=o+Math.imul(I,Vt)|0,a=a+Math.imul(I,Zt)|0;var tr=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(tr>>>26)|0,tr&=67108863,y=Math.imul(At,_t),o=Math.imul(At,kt),o=o+Math.imul(Bt,_t)|0,a=Math.imul(Bt,kt),y=y+Math.imul(Et,Rt)|0,o=o+Math.imul(Et,Lt)|0,o=o+Math.imul(Mt,Rt)|0,a=a+Math.imul(Mt,Lt)|0,y=y+Math.imul(bt,Tt)|0,o=o+Math.imul(bt,Ut)|0,o=o+Math.imul(xt,Tt)|0,a=a+Math.imul(xt,Ut)|0,y=y+Math.imul(wt,Ot)|0,o=o+Math.imul(wt,Ct)|0,o=o+Math.imul(vt,Ot)|0,a=a+Math.imul(vt,Ct)|0,y=y+Math.imul(yt,Nt)|0,o=o+Math.imul(yt,Ft)|0,o=o+Math.imul(mt,Nt)|0,a=a+Math.imul(mt,Ft)|0,y=y+Math.imul(pt,zt)|0,o=o+Math.imul(pt,qt)|0,o=o+Math.imul(gt,zt)|0,a=a+Math.imul(gt,qt)|0,y=y+Math.imul(lt,Dt)|0,o=o+Math.imul(lt,Kt)|0,o=o+Math.imul(dt,Dt)|0,a=a+Math.imul(dt,Kt)|0,y=y+Math.imul(st,Pt)|0,o=o+Math.imul(st,Ht)|0,o=o+Math.imul(at,Pt)|0,a=a+Math.imul(at,Ht)|0,y=y+Math.imul(V,Vt)|0,o=o+Math.imul(V,Zt)|0,o=o+Math.imul(j,Vt)|0,a=a+Math.imul(j,Zt)|0;var er=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(er>>>26)|0,er&=67108863,y=Math.imul(At,Rt),o=Math.imul(At,Lt),o=o+Math.imul(Bt,Rt)|0,a=Math.imul(Bt,Lt),y=y+Math.imul(Et,Tt)|0,o=o+Math.imul(Et,Ut)|0,o=o+Math.imul(Mt,Tt)|0,a=a+Math.imul(Mt,Ut)|0,y=y+Math.imul(bt,Ot)|0,o=o+Math.imul(bt,Ct)|0,o=o+Math.imul(xt,Ot)|0,a=a+Math.imul(xt,Ct)|0,y=y+Math.imul(wt,Nt)|0,o=o+Math.imul(wt,Ft)|0,o=o+Math.imul(vt,Nt)|0,a=a+Math.imul(vt,Ft)|0,y=y+Math.imul(yt,zt)|0,o=o+Math.imul(yt,qt)|0,o=o+Math.imul(mt,zt)|0,a=a+Math.imul(mt,qt)|0,y=y+Math.imul(pt,Dt)|0,o=o+Math.imul(pt,Kt)|0,o=o+Math.imul(gt,Dt)|0,a=a+Math.imul(gt,Kt)|0,y=y+Math.imul(lt,Pt)|0,o=o+Math.imul(lt,Ht)|0,o=o+Math.imul(dt,Pt)|0,a=a+Math.imul(dt,Ht)|0,y=y+Math.imul(st,Vt)|0,o=o+Math.imul(st,Zt)|0,o=o+Math.imul(at,Vt)|0,a=a+Math.imul(at,Zt)|0;var nr=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(nr>>>26)|0,nr&=67108863,y=Math.imul(At,Tt),o=Math.imul(At,Ut),o=o+Math.imul(Bt,Tt)|0,a=Math.imul(Bt,Ut),y=y+Math.imul(Et,Ot)|0,o=o+Math.imul(Et,Ct)|0,o=o+Math.imul(Mt,Ot)|0,a=a+Math.imul(Mt,Ct)|0,y=y+Math.imul(bt,Nt)|0,o=o+Math.imul(bt,Ft)|0,o=o+Math.imul(xt,Nt)|0,a=a+Math.imul(xt,Ft)|0,y=y+Math.imul(wt,zt)|0,o=o+Math.imul(wt,qt)|0,o=o+Math.imul(vt,zt)|0,a=a+Math.imul(vt,qt)|0,y=y+Math.imul(yt,Dt)|0,o=o+Math.imul(yt,Kt)|0,o=o+Math.imul(mt,Dt)|0,a=a+Math.imul(mt,Kt)|0,y=y+Math.imul(pt,Pt)|0,o=o+Math.imul(pt,Ht)|0,o=o+Math.imul(gt,Pt)|0,a=a+Math.imul(gt,Ht)|0,y=y+Math.imul(lt,Vt)|0,o=o+Math.imul(lt,Zt)|0,o=o+Math.imul(dt,Vt)|0,a=a+Math.imul(dt,Zt)|0;var rr=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(rr>>>26)|0,rr&=67108863,y=Math.imul(At,Ot),o=Math.imul(At,Ct),o=o+Math.imul(Bt,Ot)|0,a=Math.imul(Bt,Ct),y=y+Math.imul(Et,Nt)|0,o=o+Math.imul(Et,Ft)|0,o=o+Math.imul(Mt,Nt)|0,a=a+Math.imul(Mt,Ft)|0,y=y+Math.imul(bt,zt)|0,o=o+Math.imul(bt,qt)|0,o=o+Math.imul(xt,zt)|0,a=a+Math.imul(xt,qt)|0,y=y+Math.imul(wt,Dt)|0,o=o+Math.imul(wt,Kt)|0,o=o+Math.imul(vt,Dt)|0,a=a+Math.imul(vt,Kt)|0,y=y+Math.imul(yt,Pt)|0,o=o+Math.imul(yt,Ht)|0,o=o+Math.imul(mt,Pt)|0,a=a+Math.imul(mt,Ht)|0,y=y+Math.imul(pt,Vt)|0,o=o+Math.imul(pt,Zt)|0,o=o+Math.imul(gt,Vt)|0,a=a+Math.imul(gt,Zt)|0;var ir=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(ir>>>26)|0,ir&=67108863,y=Math.imul(At,Nt),o=Math.imul(At,Ft),o=o+Math.imul(Bt,Nt)|0,a=Math.imul(Bt,Ft),y=y+Math.imul(Et,zt)|0,o=o+Math.imul(Et,qt)|0,o=o+Math.imul(Mt,zt)|0,a=a+Math.imul(Mt,qt)|0,y=y+Math.imul(bt,Dt)|0,o=o+Math.imul(bt,Kt)|0,o=o+Math.imul(xt,Dt)|0,a=a+Math.imul(xt,Kt)|0,y=y+Math.imul(wt,Pt)|0,o=o+Math.imul(wt,Ht)|0,o=o+Math.imul(vt,Pt)|0,a=a+Math.imul(vt,Ht)|0,y=y+Math.imul(yt,Vt)|0,o=o+Math.imul(yt,Zt)|0,o=o+Math.imul(mt,Vt)|0,a=a+Math.imul(mt,Zt)|0;var sr=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(sr>>>26)|0,sr&=67108863,y=Math.imul(At,zt),o=Math.imul(At,qt),o=o+Math.imul(Bt,zt)|0,a=Math.imul(Bt,qt),y=y+Math.imul(Et,Dt)|0,o=o+Math.imul(Et,Kt)|0,o=o+Math.imul(Mt,Dt)|0,a=a+Math.imul(Mt,Kt)|0,y=y+Math.imul(bt,Pt)|0,o=o+Math.imul(bt,Ht)|0,o=o+Math.imul(xt,Pt)|0,a=a+Math.imul(xt,Ht)|0,y=y+Math.imul(wt,Vt)|0,o=o+Math.imul(wt,Zt)|0,o=o+Math.imul(vt,Vt)|0,a=a+Math.imul(vt,Zt)|0;var or=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(or>>>26)|0,or&=67108863,y=Math.imul(At,Dt),o=Math.imul(At,Kt),o=o+Math.imul(Bt,Dt)|0,a=Math.imul(Bt,Kt),y=y+Math.imul(Et,Pt)|0,o=o+Math.imul(Et,Ht)|0,o=o+Math.imul(Mt,Pt)|0,a=a+Math.imul(Mt,Ht)|0,y=y+Math.imul(bt,Vt)|0,o=o+Math.imul(bt,Zt)|0,o=o+Math.imul(xt,Vt)|0,a=a+Math.imul(xt,Zt)|0;var ar=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(ar>>>26)|0,ar&=67108863,y=Math.imul(At,Pt),o=Math.imul(At,Ht),o=o+Math.imul(Bt,Pt)|0,a=Math.imul(Bt,Ht),y=y+Math.imul(Et,Vt)|0,o=o+Math.imul(Et,Zt)|0,o=o+Math.imul(Mt,Vt)|0,a=a+Math.imul(Mt,Zt)|0;var cr=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(cr>>>26)|0,cr&=67108863,y=Math.imul(At,Vt),o=Math.imul(At,Zt),o=o+Math.imul(Bt,Vt)|0,a=Math.imul(Bt,Zt);var ur=(E+y|0)+((o&8191)<<13)|0;return E=(a+(o>>>13)|0)+(ur>>>26)|0,ur&=67108863,b[0]=Zn,b[1]=$n,b[2]=jn,b[3]=Gn,b[4]=Yn,b[5]=Wn,b[6]=Xn,b[7]=Jn,b[8]=Qn,b[9]=tr,b[10]=er,b[11]=nr,b[12]=rr,b[13]=ir,b[14]=sr,b[15]=or,b[16]=ar,b[17]=cr,b[18]=ur,E!==0&&(b[19]=E,h.length++),h};Math.imul||(P=q);function z(l,i,u){u.negative=i.negative^l.negative,u.length=l.length+i.length;for(var h=0,g=0,m=0;m<u.length-1;m++){var b=g;g=0;for(var E=h&67108863,y=Math.min(m,i.length-1),o=Math.max(0,m-l.length+1);o<=y;o++){var a=m-o,d=l.words[a]|0,w=i.words[o]|0,I=d*w,N=I&67108863;b=b+(I/67108864|0)|0,N=N+E|0,E=N&67108863,b=b+(N>>>26)|0,g+=b>>>26,b&=67108863}u.words[m]=E,h=b,b=g}return h!==0?u.words[m]=h:u.length--,u._strip()}function G(l,i,u){return z(l,i,u)}s.prototype.mulTo=function(i,u){var h,g=this.length+i.length;return this.length===10&&i.length===10?h=P(this,i,u):g<63?h=q(this,i,u):g<1024?h=z(this,i,u):h=G(this,i,u),h},s.prototype.mul=function(i){var u=new s(null);return u.words=new Array(this.length+i.length),this.mulTo(i,u)},s.prototype.mulf=function(i){var u=new s(null);return u.words=new Array(this.length+i.length),G(this,i,u)},s.prototype.imul=function(i){return this.clone().mulTo(i,this)},s.prototype.imuln=function(i){var u=i<0;u&&(i=-i),n(typeof i=="number"),n(i<67108864);for(var h=0,g=0;g<this.length;g++){var m=(this.words[g]|0)*i,b=(m&67108863)+(h&67108863);h>>=26,h+=m/67108864|0,h+=b>>>26,this.words[g]=b&67108863}return h!==0&&(this.words[g]=h,this.length++),this.length=i===0?1:this.length,u?this.ineg():this},s.prototype.muln=function(i){return this.clone().imuln(i)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(i){var u=D(i);if(u.length===0)return new s(1);for(var h=this,g=0;g<u.length&&u[g]===0;g++,h=h.sqr());if(++g<u.length)for(var m=h.sqr();g<u.length;g++,m=m.sqr())u[g]!==0&&(h=h.mul(m));return h},s.prototype.iushln=function(i){n(typeof i=="number"&&i>=0);var u=i%26,h=(i-u)/26,g=67108863>>>26-u<<26-u,m;if(u!==0){var b=0;for(m=0;m<this.length;m++){var E=this.words[m]&g,y=(this.words[m]|0)-E<<u;this.words[m]=y|b,b=E>>>26-u}b&&(this.words[m]=b,this.length++)}if(h!==0){for(m=this.length-1;m>=0;m--)this.words[m+h]=this.words[m];for(m=0;m<h;m++)this.words[m]=0;this.length+=h}return this._strip()},s.prototype.ishln=function(i){return n(this.negative===0),this.iushln(i)},s.prototype.iushrn=function(i,u,h){n(typeof i=="number"&&i>=0);var g;u?g=(u-u%26)/26:g=0;var m=i%26,b=Math.min((i-m)/26,this.length),E=67108863^67108863>>>m<<m,y=h;if(g-=b,g=Math.max(0,g),y){for(var o=0;o<b;o++)y.words[o]=this.words[o];y.length=b}if(b!==0)if(this.length>b)for(this.length-=b,o=0;o<this.length;o++)this.words[o]=this.words[o+b];else this.words[0]=0,this.length=1;var a=0;for(o=this.length-1;o>=0&&(a!==0||o>=g);o--){var d=this.words[o]|0;this.words[o]=a<<26-m|d>>>m,a=d&E}return y&&a!==0&&(y.words[y.length++]=a),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(i,u,h){return n(this.negative===0),this.iushrn(i,u,h)},s.prototype.shln=function(i){return this.clone().ishln(i)},s.prototype.ushln=function(i){return this.clone().iushln(i)},s.prototype.shrn=function(i){return this.clone().ishrn(i)},s.prototype.ushrn=function(i){return this.clone().iushrn(i)},s.prototype.testn=function(i){n(typeof i=="number"&&i>=0);var u=i%26,h=(i-u)/26,g=1<<u;if(this.length<=h)return!1;var m=this.words[h];return!!(m&g)},s.prototype.imaskn=function(i){n(typeof i=="number"&&i>=0);var u=i%26,h=(i-u)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(u!==0&&h++,this.length=Math.min(h,this.length),u!==0){var g=67108863^67108863>>>u<<u;this.words[this.length-1]&=g}return this._strip()},s.prototype.maskn=function(i){return this.clone().imaskn(i)},s.prototype.iaddn=function(i){return n(typeof i=="number"),n(i<67108864),i<0?this.isubn(-i):this.negative!==0?this.length===1&&(this.words[0]|0)<=i?(this.words[0]=i-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(i),this.negative=1,this):this._iaddn(i)},s.prototype._iaddn=function(i){this.words[0]+=i;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},s.prototype.isubn=function(i){if(n(typeof i=="number"),n(i<67108864),i<0)return this.iaddn(-i);if(this.negative!==0)return this.negative=0,this.iaddn(i),this.negative=1,this;if(this.words[0]-=i,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},s.prototype.addn=function(i){return this.clone().iaddn(i)},s.prototype.subn=function(i){return this.clone().isubn(i)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(i,u,h){var g=i.length+h,m;this._expand(g);var b,E=0;for(m=0;m<i.length;m++){b=(this.words[m+h]|0)+E;var y=(i.words[m]|0)*u;b-=y&67108863,E=(b>>26)-(y/67108864|0),this.words[m+h]=b&67108863}for(;m<this.length-h;m++)b=(this.words[m+h]|0)+E,E=b>>26,this.words[m+h]=b&67108863;if(E===0)return this._strip();for(n(E===-1),E=0,m=0;m<this.length;m++)b=-(this.words[m]|0)+E,E=b>>26,this.words[m]=b&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(i,u){var h=this.length-i.length,g=this.clone(),m=i,b=m.words[m.length-1]|0,E=this._countBits(b);h=26-E,h!==0&&(m=m.ushln(h),g.iushln(h),b=m.words[m.length-1]|0);var y=g.length-m.length,o;if(u!=="mod"){o=new s(null),o.length=y+1,o.words=new Array(o.length);for(var a=0;a<o.length;a++)o.words[a]=0}var d=g.clone()._ishlnsubmul(m,1,y);d.negative===0&&(g=d,o&&(o.words[y]=1));for(var w=y-1;w>=0;w--){var I=(g.words[m.length+w]|0)*67108864+(g.words[m.length+w-1]|0);for(I=Math.min(I/b|0,67108863),g._ishlnsubmul(m,I,w);g.negative!==0;)I--,g.negative=0,g._ishlnsubmul(m,1,w),g.isZero()||(g.negative^=1);o&&(o.words[w]=I)}return o&&o._strip(),g._strip(),u!=="div"&&h!==0&&g.iushrn(h),{div:o||null,mod:g}},s.prototype.divmod=function(i,u,h){if(n(!i.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var g,m,b;return this.negative!==0&&i.negative===0?(b=this.neg().divmod(i,u),u!=="mod"&&(g=b.div.neg()),u!=="div"&&(m=b.mod.neg(),h&&m.negative!==0&&m.iadd(i)),{div:g,mod:m}):this.negative===0&&i.negative!==0?(b=this.divmod(i.neg(),u),u!=="mod"&&(g=b.div.neg()),{div:g,mod:b.mod}):(this.negative&i.negative)!==0?(b=this.neg().divmod(i.neg(),u),u!=="div"&&(m=b.mod.neg(),h&&m.negative!==0&&m.isub(i)),{div:b.div,mod:m}):i.length>this.length||this.cmp(i)<0?{div:new s(0),mod:this}:i.length===1?u==="div"?{div:this.divn(i.words[0]),mod:null}:u==="mod"?{div:null,mod:new s(this.modrn(i.words[0]))}:{div:this.divn(i.words[0]),mod:new s(this.modrn(i.words[0]))}:this._wordDiv(i,u)},s.prototype.div=function(i){return this.divmod(i,"div",!1).div},s.prototype.mod=function(i){return this.divmod(i,"mod",!1).mod},s.prototype.umod=function(i){return this.divmod(i,"mod",!0).mod},s.prototype.divRound=function(i){var u=this.divmod(i);if(u.mod.isZero())return u.div;var h=u.div.negative!==0?u.mod.isub(i):u.mod,g=i.ushrn(1),m=i.andln(1),b=h.cmp(g);return b<0||m===1&&b===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},s.prototype.modrn=function(i){var u=i<0;u&&(i=-i),n(i<=67108863);for(var h=(1<<26)%i,g=0,m=this.length-1;m>=0;m--)g=(h*g+(this.words[m]|0))%i;return u?-g:g},s.prototype.modn=function(i){return this.modrn(i)},s.prototype.idivn=function(i){var u=i<0;u&&(i=-i),n(i<=67108863);for(var h=0,g=this.length-1;g>=0;g--){var m=(this.words[g]|0)+h*67108864;this.words[g]=m/i|0,h=m%i}return this._strip(),u?this.ineg():this},s.prototype.divn=function(i){return this.clone().idivn(i)},s.prototype.egcd=function(i){n(i.negative===0),n(!i.isZero());var u=this,h=i.clone();u.negative!==0?u=u.umod(i):u=u.clone();for(var g=new s(1),m=new s(0),b=new s(0),E=new s(1),y=0;u.isEven()&&h.isEven();)u.iushrn(1),h.iushrn(1),++y;for(var o=h.clone(),a=u.clone();!u.isZero();){for(var d=0,w=1;(u.words[0]&w)===0&&d<26;++d,w<<=1);if(d>0)for(u.iushrn(d);d-- >0;)(g.isOdd()||m.isOdd())&&(g.iadd(o),m.isub(a)),g.iushrn(1),m.iushrn(1);for(var I=0,N=1;(h.words[0]&N)===0&&I<26;++I,N<<=1);if(I>0)for(h.iushrn(I);I-- >0;)(b.isOdd()||E.isOdd())&&(b.iadd(o),E.isub(a)),b.iushrn(1),E.iushrn(1);u.cmp(h)>=0?(u.isub(h),g.isub(b),m.isub(E)):(h.isub(u),b.isub(g),E.isub(m))}return{a:b,b:E,gcd:h.iushln(y)}},s.prototype._invmp=function(i){n(i.negative===0),n(!i.isZero());var u=this,h=i.clone();u.negative!==0?u=u.umod(i):u=u.clone();for(var g=new s(1),m=new s(0),b=h.clone();u.cmpn(1)>0&&h.cmpn(1)>0;){for(var E=0,y=1;(u.words[0]&y)===0&&E<26;++E,y<<=1);if(E>0)for(u.iushrn(E);E-- >0;)g.isOdd()&&g.iadd(b),g.iushrn(1);for(var o=0,a=1;(h.words[0]&a)===0&&o<26;++o,a<<=1);if(o>0)for(h.iushrn(o);o-- >0;)m.isOdd()&&m.iadd(b),m.iushrn(1);u.cmp(h)>=0?(u.isub(h),g.isub(m)):(h.isub(u),m.isub(g))}var d;return u.cmpn(1)===0?d=g:d=m,d.cmpn(0)<0&&d.iadd(i),d},s.prototype.gcd=function(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var u=this.clone(),h=i.clone();u.negative=0,h.negative=0;for(var g=0;u.isEven()&&h.isEven();g++)u.iushrn(1),h.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;h.isEven();)h.iushrn(1);var m=u.cmp(h);if(m<0){var b=u;u=h,h=b}else if(m===0||h.cmpn(1)===0)break;u.isub(h)}while(!0);return h.iushln(g)},s.prototype.invm=function(i){return this.egcd(i).a.umod(i)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(i){return this.words[0]&i},s.prototype.bincn=function(i){n(typeof i=="number");var u=i%26,h=(i-u)/26,g=1<<u;if(this.length<=h)return this._expand(h+1),this.words[h]|=g,this;for(var m=g,b=h;m!==0&&b<this.length;b++){var E=this.words[b]|0;E+=m,m=E>>>26,E&=67108863,this.words[b]=E}return m!==0&&(this.words[b]=m,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(i){var u=i<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var h;if(this.length>1)h=1;else{u&&(i=-i),n(i<=67108863,"Number is too big");var g=this.words[0]|0;h=g===i?0:g<i?-1:1}return this.negative!==0?-h|0:h},s.prototype.cmp=function(i){if(this.negative!==0&&i.negative===0)return-1;if(this.negative===0&&i.negative!==0)return 1;var u=this.ucmp(i);return this.negative!==0?-u|0:u},s.prototype.ucmp=function(i){if(this.length>i.length)return 1;if(this.length<i.length)return-1;for(var u=0,h=this.length-1;h>=0;h--){var g=this.words[h]|0,m=i.words[h]|0;if(g!==m){g<m?u=-1:g>m&&(u=1);break}}return u},s.prototype.gtn=function(i){return this.cmpn(i)===1},s.prototype.gt=function(i){return this.cmp(i)===1},s.prototype.gten=function(i){return this.cmpn(i)>=0},s.prototype.gte=function(i){return this.cmp(i)>=0},s.prototype.ltn=function(i){return this.cmpn(i)===-1},s.prototype.lt=function(i){return this.cmp(i)===-1},s.prototype.lten=function(i){return this.cmpn(i)<=0},s.prototype.lte=function(i){return this.cmp(i)<=0},s.prototype.eqn=function(i){return this.cmpn(i)===0},s.prototype.eq=function(i){return this.cmp(i)===0},s.red=function(i){return new R(i)},s.prototype.toRed=function(i){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),i.convertTo(this)._forceRed(i)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(i){return this.red=i,this},s.prototype.forceRed=function(i){return n(!this.red,"Already a number in reduction context"),this._forceRed(i)},s.prototype.redAdd=function(i){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,i)},s.prototype.redIAdd=function(i){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,i)},s.prototype.redSub=function(i){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,i)},s.prototype.redISub=function(i){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,i)},s.prototype.redShl=function(i){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,i)},s.prototype.redMul=function(i){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.mul(this,i)},s.prototype.redIMul=function(i){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.imul(this,i)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(i){return n(this.red&&!i.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,i)};var W={k256:null,p224:null,p192:null,p25519:null};function Y(l,i){this.name=l,this.p=new s(i,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Y.prototype._tmp=function(){var i=new s(null);return i.words=new Array(Math.ceil(this.n/13)),i},Y.prototype.ireduce=function(i){var u=i,h;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),h=u.bitLength();while(h>this.n);var g=h<this.n?-1:u.ucmp(this.p);return g===0?(u.words[0]=0,u.length=1):g>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},Y.prototype.split=function(i,u){i.iushrn(this.n,0,u)},Y.prototype.imulK=function(i){return i.imul(this.k)};function Q(){Y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}c(Q,Y),Q.prototype.split=function(i,u){for(var h=4194303,g=Math.min(i.length,9),m=0;m<g;m++)u.words[m]=i.words[m];if(u.length=g,i.length<=9){i.words[0]=0,i.length=1;return}var b=i.words[9];for(u.words[u.length++]=b&h,m=10;m<i.length;m++){var E=i.words[m]|0;i.words[m-10]=(E&h)<<4|b>>>22,b=E}b>>>=22,i.words[m-10]=b,b===0&&i.length>10?i.length-=10:i.length-=9},Q.prototype.imulK=function(i){i.words[i.length]=0,i.words[i.length+1]=0,i.length+=2;for(var u=0,h=0;h<i.length;h++){var g=i.words[h]|0;u+=g*977,i.words[h]=u&67108863,u=g*64+(u/67108864|0)}return i.words[i.length-1]===0&&(i.length--,i.words[i.length-1]===0&&i.length--),i};function X(){Y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}c(X,Y);function A(){Y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}c(A,Y);function S(){Y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}c(S,Y),S.prototype.imulK=function(i){for(var u=0,h=0;h<i.length;h++){var g=(i.words[h]|0)*19+u,m=g&67108863;g>>>=26,i.words[h]=m,u=g}return u!==0&&(i.words[i.length++]=u),i},s._prime=function(i){if(W[i])return W[i];var u;if(i==="k256")u=new Q;else if(i==="p224")u=new X;else if(i==="p192")u=new A;else if(i==="p25519")u=new S;else throw new Error("Unknown prime "+i);return W[i]=u,u};function R(l){if(typeof l=="string"){var i=s._prime(l);this.m=i.p,this.prime=i}else n(l.gtn(1),"modulus must be greater than 1"),this.m=l,this.prime=null}R.prototype._verify1=function(i){n(i.negative===0,"red works only with positives"),n(i.red,"red works only with red numbers")},R.prototype._verify2=function(i,u){n((i.negative|u.negative)===0,"red works only with positives"),n(i.red&&i.red===u.red,"red works only with red numbers")},R.prototype.imod=function(i){return this.prime?this.prime.ireduce(i)._forceRed(this):(k(i,i.umod(this.m)._forceRed(this)),i)},R.prototype.neg=function(i){return i.isZero()?i.clone():this.m.sub(i)._forceRed(this)},R.prototype.add=function(i,u){this._verify2(i,u);var h=i.add(u);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},R.prototype.iadd=function(i,u){this._verify2(i,u);var h=i.iadd(u);return h.cmp(this.m)>=0&&h.isub(this.m),h},R.prototype.sub=function(i,u){this._verify2(i,u);var h=i.sub(u);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},R.prototype.isub=function(i,u){this._verify2(i,u);var h=i.isub(u);return h.cmpn(0)<0&&h.iadd(this.m),h},R.prototype.shl=function(i,u){return this._verify1(i),this.imod(i.ushln(u))},R.prototype.imul=function(i,u){return this._verify2(i,u),this.imod(i.imul(u))},R.prototype.mul=function(i,u){return this._verify2(i,u),this.imod(i.mul(u))},R.prototype.isqr=function(i){return this.imul(i,i.clone())},R.prototype.sqr=function(i){return this.mul(i,i)},R.prototype.sqrt=function(i){if(i.isZero())return i.clone();var u=this.m.andln(3);if(n(u%2===1),u===3){var h=this.m.add(new s(1)).iushrn(2);return this.pow(i,h)}for(var g=this.m.subn(1),m=0;!g.isZero()&&g.andln(1)===0;)m++,g.iushrn(1);n(!g.isZero());var b=new s(1).toRed(this),E=b.redNeg(),y=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new s(2*o*o).toRed(this);this.pow(o,y).cmp(E)!==0;)o.redIAdd(E);for(var a=this.pow(o,g),d=this.pow(i,g.addn(1).iushrn(1)),w=this.pow(i,g),I=m;w.cmp(b)!==0;){for(var N=w,V=0;N.cmp(b)!==0;V++)N=N.redSqr();n(V<I);var j=this.pow(a,new s(1).iushln(I-V-1));d=d.redMul(j),a=j.redSqr(),w=w.redMul(a),I=V}return d},R.prototype.invm=function(i){var u=i._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},R.prototype.pow=function(i,u){if(u.isZero())return new s(1).toRed(this);if(u.cmpn(1)===0)return i.clone();var h=4,g=new Array(1<<h);g[0]=new s(1).toRed(this),g[1]=i;for(var m=2;m<g.length;m++)g[m]=this.mul(g[m-1],i);var b=g[0],E=0,y=0,o=u.bitLength()%26;for(o===0&&(o=26),m=u.length-1;m>=0;m--){for(var a=u.words[m],d=o-1;d>=0;d--){var w=a>>d&1;if(b!==g[0]&&(b=this.sqr(b)),w===0&&E===0){y=0;continue}E<<=1,E|=w,y++,!(y!==h&&(m!==0||d!==0))&&(b=this.mul(b,g[E]),y=0,E=0)}o=26}return b},R.prototype.convertTo=function(i){var u=i.umod(this.m);return u===i?u.clone():u},R.prototype.convertFrom=function(i){var u=i.clone();return u.red=null,u},s.mont=function(i){return new U(i)};function U(l){R.call(this,l),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}c(U,R),U.prototype.convertTo=function(i){return this.imod(i.ushln(this.shift))},U.prototype.convertFrom=function(i){var u=this.imod(i.mul(this.rinv));return u.red=null,u},U.prototype.imul=function(i,u){if(i.isZero()||u.isZero())return i.words[0]=0,i.length=1,i;var h=i.imul(u),g=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=h.isub(g).iushrn(this.shift),b=m;return m.cmp(this.m)>=0?b=m.isub(this.m):m.cmpn(0)<0&&(b=m.iadd(this.m)),b._forceRed(this)},U.prototype.mul=function(i,u){if(i.isZero()||u.isZero())return new s(0)._forceRed(this);var h=i.mul(u),g=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=h.isub(g).iushrn(this.shift),b=m;return m.cmp(this.m)>=0?b=m.isub(this.m):m.cmpn(0)<0&&(b=m.iadd(this.m)),b._forceRed(this)},U.prototype.invm=function(i){var u=this.imod(i._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(t,_o)}(xn)),xn.exports}var ko=Xi();const bi=Yi(ko);var xi,lr,dr=0,pr=0;function Ro(t,e,r){var n=e&&r||0,c=e||new Array(16);t=t||{};var s=t.node||xi,f=t.clockseq!==void 0?t.clockseq:lr;if(s==null||f==null){var v=t.random||(t.rng||oo)();s==null&&(s=xi=[v[0]|1,v[1],v[2],v[3],v[4],v[5]]),f==null&&(f=lr=(v[6]<<8|v[7])&16383)}var p=t.msecs!==void 0?t.msecs:Date.now(),M=t.nsecs!==void 0?t.nsecs:pr+1,k=p-dr+(M-pr)/1e4;if(k<0&&t.clockseq===void 0&&(f=f+1&16383),(k<0||p>dr)&&t.nsecs===void 0&&(M=0),M>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");dr=p,pr=M,lr=f,p+=122192928e5;var O=((p&268435455)*1e4+M)%4294967296;c[n++]=O>>>24&255,c[n++]=O>>>16&255,c[n++]=O>>>8&255,c[n++]=O&255;var B=p/4294967296*1e4&268435455;c[n++]=B>>>8&255,c[n++]=B&255,c[n++]=B>>>24&15|16,c[n++]=B>>>16&255,c[n++]=f>>>8|128,c[n++]=f&255;for(var _=0;_<6;++_)c[n+_]=s[_];return e||Fr(c)}function Ji(t){if(!zr(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function Lo(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var To="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Uo="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Qi(t,e,r){function n(c,s,f,v){if(typeof c=="string"&&(c=Lo(c)),typeof s=="string"&&(s=Ji(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var p=new Uint8Array(16+c.length);if(p.set(s),p.set(c,s.length),p=r(p),p[6]=p[6]&15|e,p[8]=p[8]&63|128,f){v=v||0;for(var M=0;M<16;++M)f[v+M]=p[M];return f}return Fr(p)}try{n.name=t}catch{}return n.DNS=To,n.URL=Uo,n}function Oo(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return Co(No(Fo(t),t.length*8))}function Co(t){for(var e=[],r=t.length*32,n="0123456789abcdef",c=0;c<r;c+=8){var s=t[c>>5]>>>c%32&255,f=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(f)}return e}function ts(t){return(t+64>>>9<<4)+14+1}function No(t,e){t[e>>5]|=128<<e%32,t[ts(e)-1]=e;for(var r=1732584193,n=-271733879,c=-1732584194,s=271733878,f=0;f<t.length;f+=16){var v=r,p=n,M=c,k=s;r=Yt(r,n,c,s,t[f],7,-680876936),s=Yt(s,r,n,c,t[f+1],12,-389564586),c=Yt(c,s,r,n,t[f+2],17,606105819),n=Yt(n,c,s,r,t[f+3],22,-1044525330),r=Yt(r,n,c,s,t[f+4],7,-176418897),s=Yt(s,r,n,c,t[f+5],12,1200080426),c=Yt(c,s,r,n,t[f+6],17,-1473231341),n=Yt(n,c,s,r,t[f+7],22,-45705983),r=Yt(r,n,c,s,t[f+8],7,1770035416),s=Yt(s,r,n,c,t[f+9],12,-1958414417),c=Yt(c,s,r,n,t[f+10],17,-42063),n=Yt(n,c,s,r,t[f+11],22,-1990404162),r=Yt(r,n,c,s,t[f+12],7,1804603682),s=Yt(s,r,n,c,t[f+13],12,-40341101),c=Yt(c,s,r,n,t[f+14],17,-1502002290),n=Yt(n,c,s,r,t[f+15],22,1236535329),r=Wt(r,n,c,s,t[f+1],5,-165796510),s=Wt(s,r,n,c,t[f+6],9,-1069501632),c=Wt(c,s,r,n,t[f+11],14,643717713),n=Wt(n,c,s,r,t[f],20,-373897302),r=Wt(r,n,c,s,t[f+5],5,-701558691),s=Wt(s,r,n,c,t[f+10],9,38016083),c=Wt(c,s,r,n,t[f+15],14,-660478335),n=Wt(n,c,s,r,t[f+4],20,-405537848),r=Wt(r,n,c,s,t[f+9],5,568446438),s=Wt(s,r,n,c,t[f+14],9,-1019803690),c=Wt(c,s,r,n,t[f+3],14,-187363961),n=Wt(n,c,s,r,t[f+8],20,1163531501),r=Wt(r,n,c,s,t[f+13],5,-1444681467),s=Wt(s,r,n,c,t[f+2],9,-51403784),c=Wt(c,s,r,n,t[f+7],14,1735328473),n=Wt(n,c,s,r,t[f+12],20,-1926607734),r=Xt(r,n,c,s,t[f+5],4,-378558),s=Xt(s,r,n,c,t[f+8],11,-2022574463),c=Xt(c,s,r,n,t[f+11],16,1839030562),n=Xt(n,c,s,r,t[f+14],23,-35309556),r=Xt(r,n,c,s,t[f+1],4,-1530992060),s=Xt(s,r,n,c,t[f+4],11,1272893353),c=Xt(c,s,r,n,t[f+7],16,-155497632),n=Xt(n,c,s,r,t[f+10],23,-1094730640),r=Xt(r,n,c,s,t[f+13],4,681279174),s=Xt(s,r,n,c,t[f],11,-358537222),c=Xt(c,s,r,n,t[f+3],16,-722521979),n=Xt(n,c,s,r,t[f+6],23,76029189),r=Xt(r,n,c,s,t[f+9],4,-640364487),s=Xt(s,r,n,c,t[f+12],11,-421815835),c=Xt(c,s,r,n,t[f+15],16,530742520),n=Xt(n,c,s,r,t[f+2],23,-995338651),r=Jt(r,n,c,s,t[f],6,-198630844),s=Jt(s,r,n,c,t[f+7],10,1126891415),c=Jt(c,s,r,n,t[f+14],15,-1416354905),n=Jt(n,c,s,r,t[f+5],21,-57434055),r=Jt(r,n,c,s,t[f+12],6,1700485571),s=Jt(s,r,n,c,t[f+3],10,-1894986606),c=Jt(c,s,r,n,t[f+10],15,-1051523),n=Jt(n,c,s,r,t[f+1],21,-2054922799),r=Jt(r,n,c,s,t[f+8],6,1873313359),s=Jt(s,r,n,c,t[f+15],10,-30611744),c=Jt(c,s,r,n,t[f+6],15,-1560198380),n=Jt(n,c,s,r,t[f+13],21,1309151649),r=Jt(r,n,c,s,t[f+4],6,-145523070),s=Jt(s,r,n,c,t[f+11],10,-1120210379),c=Jt(c,s,r,n,t[f+2],15,718787259),n=Jt(n,c,s,r,t[f+9],21,-343485551),r=_e(r,v),n=_e(n,p),c=_e(c,M),s=_e(s,k)}return[r,n,c,s]}function Fo(t){if(t.length===0)return[];for(var e=t.length*8,r=new Uint32Array(ts(e)),n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function _e(t,e){var r=(t&65535)+(e&65535),n=(t>>16)+(e>>16)+(r>>16);return n<<16|r&65535}function zo(t,e){return t<<e|t>>>32-e}function zn(t,e,r,n,c,s){return _e(zo(_e(_e(e,t),_e(n,s)),c),r)}function Yt(t,e,r,n,c,s,f){return zn(e&r|~e&n,t,e,c,s,f)}function Wt(t,e,r,n,c,s,f){return zn(e&n|r&~n,t,e,c,s,f)}function Xt(t,e,r,n,c,s,f){return zn(e^r^n,t,e,c,s,f)}function Jt(t,e,r,n,c,s,f){return zn(r^(e|~n),t,e,c,s,f)}var qo=Qi("v3",48,Oo);function Do(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function gr(t,e){return t<<e|t>>>32-e}function Ko(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var n=unescape(encodeURIComponent(t));t=[];for(var c=0;c<n.length;++c)t.push(n.charCodeAt(c))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,f=Math.ceil(s/16),v=new Array(f),p=0;p<f;++p){for(var M=new Uint32Array(16),k=0;k<16;++k)M[k]=t[p*64+k*4]<<24|t[p*64+k*4+1]<<16|t[p*64+k*4+2]<<8|t[p*64+k*4+3];v[p]=M}v[f-1][14]=(t.length-1)*8/Math.pow(2,32),v[f-1][14]=Math.floor(v[f-1][14]),v[f-1][15]=(t.length-1)*8&4294967295;for(var O=0;O<f;++O){for(var B=new Uint32Array(80),_=0;_<16;++_)B[_]=v[O][_];for(var C=16;C<80;++C)B[C]=gr(B[C-3]^B[C-8]^B[C-14]^B[C-16],1);for(var F=r[0],D=r[1],q=r[2],P=r[3],z=r[4],G=0;G<80;++G){var W=Math.floor(G/20),Y=gr(F,5)+Do(W,D,q,P)+z+e[W]+B[G]>>>0;z=P,P=q,q=gr(D,30)>>>0,D=F,F=Y}r[0]=r[0]+F>>>0,r[1]=r[1]+D>>>0,r[2]=r[2]+q>>>0,r[3]=r[3]+P>>>0,r[4]=r[4]+z>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var Po=Qi("v5",80,Ko);const Ho="00000000-0000-0000-0000-000000000000";function Vo(t){if(!zr(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const Zo=Object.freeze(Object.defineProperty({__proto__:null,NIL:Ho,parse:Ji,stringify:Fr,v1:Ro,v3:qo,v4:ao,v5:Po,validate:zr,version:Vo},Symbol.toStringTag,{value:"Module"}));class $o extends co{async init(e){}async getIdentityToken(){if(!this.provider||this.status!==ue.CONNECTED)throw fe.notConnectedError();if(!this.coreOptions)throw wi.invalidParams("Please initialize Web3Auth with a valid options");const e=await this.provider.request({method:fr.GET_ACCOUNTS});if(e&&e.length>0){const r=uo(e[0],this.name);if(r&&!fo(r))return{idToken:r};const n=await this.provider.request({method:"solana_chainId"}),c=this.coreOptions.chains.find(k=>k.chainId===n);if(!c)throw wi.invalidParams("chainConfig is required before authentication");const{chainNamespace:s}=c,f={domain:window.location.origin,uri:window.location.href,address:e[0],chainId:parseInt(n,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},v=await ho(f,s),p=await this.provider.request({method:fr.SIGN_MESSAGE,params:{data:v,display:"utf8"}}),M=await lo(s,p,v,this.name,this.coreOptions.sessionTime,this.coreOptions.clientId,this.coreOptions.web3AuthNetwork);return po(e[0],this.name,M),{idToken:M}}throw fe.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnectSession(){super.checkDisconnectionRequirements();const e=await this.provider.request({method:fr.GET_ACCOUNTS});e&&e.length>0&&go(e[0],this.name)}async disconnect(){this.rehydrated=!1,this.emit(Re.DISCONNECTED)}}var jo=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Go=function(t,e,r,n,c){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!c:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?c.call(t,r):c?c.value=r:e.set(t,r),r},En;let sn;const qn=new Set;function Yo(t){on=void 0,qn.add(t)}function Wo(t){on=void 0,qn.delete(t)}const Ze={};function qu(){if(sn||(sn=Object.freeze({register:Ei,get:Xo,on:Jo}),typeof window>"u"))return sn;const t=Object.freeze({register:Ei});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new Qo(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return sn}function Ei(...t){return t=t.filter(e=>!qn.has(e)),t.length?(t.forEach(e=>Yo(e)),Ze.register?.forEach(e=>Mi(()=>e(...t))),function(){t.forEach(r=>Wo(r)),Ze.unregister?.forEach(r=>Mi(()=>r(...t)))}):()=>{}}let on;function Xo(){return on||(on=[...qn]),on}function Jo(t,e){return Ze[t]?.push(e)||(Ze[t]=[e]),function(){Ze[t]=Ze[t]?.filter(n=>e!==n)}}function Mi(t){try{t()}catch(e){console.error(e)}}class Qo extends Event{get detail(){return jo(this,En,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),En.set(this,void 0),Go(this,En,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}En=new WeakMap;const es="solana:signAndSendTransaction",ns="solana:signMessage",kr="solana:signTransaction",rs="standard:connect",ta="standard:disconnect",Ke=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function un(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Rr(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ne(t,...e){if(!un(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function is(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Rr(t.outputLen),Rr(t.blockLen)}function Bn(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ea(t,e){Ne(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Xe(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function yr(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ce(t,e){return t<<32-e|t>>>e}const ss=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",na=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Oe(t){if(Ne(t),ss)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=na[t[r]];return e}const ye={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ai(t){if(t>=ye._0&&t<=ye._9)return t-ye._0;if(t>=ye.A&&t<=ye.F)return t-(ye.A-10);if(t>=ye.a&&t<=ye.f)return t-(ye.a-10)}function Sn(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(ss)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let c=0,s=0;c<r;c++,s+=2){const f=Ai(t.charCodeAt(s)),v=Ai(t.charCodeAt(s+1));if(f===void 0||v===void 0){const p=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+s)}n[c]=f*16+v}return n}function ra(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function qr(t){return typeof t=="string"&&(t=ra(t)),Ne(t),t}function le(...t){let e=0;for(let n=0;n<t.length;n++){const c=t[n];Ne(c),e+=c.length}const r=new Uint8Array(e);for(let n=0,c=0;n<t.length;n++){const s=t[n];r.set(s,c),c+=s.length}return r}class os{}function as(t){const e=n=>t().update(qr(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Dr(t=32){if(Ke&&typeof Ke.getRandomValues=="function")return Ke.getRandomValues(new Uint8Array(t));if(Ke&&typeof Ke.randomBytes=="function")return Uint8Array.from(Ke.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function ia(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const c=BigInt(32),s=BigInt(4294967295),f=Number(r>>c&s),v=Number(r&s),p=n?4:0,M=n?0:4;t.setUint32(e+p,f,n),t.setUint32(e+M,v,n)}function sa(t,e,r){return t&e^~t&r}function oa(t,e,r){return t&e^t&r^e&r}class cs extends os{constructor(e,r,n,c){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=c,this.buffer=new Uint8Array(e),this.view=yr(this.buffer)}update(e){Bn(this),e=qr(e),Ne(e);const{view:r,buffer:n,blockLen:c}=this,s=e.length;for(let f=0;f<s;){const v=Math.min(c-this.pos,s-f);if(v===c){const p=yr(e);for(;c<=s-f;f+=c)this.process(p,f);continue}n.set(e.subarray(f,f+v),this.pos),this.pos+=v,f+=v,this.pos===c&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Bn(this),ea(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:c,isLE:s}=this;let{pos:f}=this;r[f++]=128,Xe(this.buffer.subarray(f)),this.padOffset>c-f&&(this.process(n,0),f=0);for(let O=f;O<c;O++)r[O]=0;ia(n,c-8,BigInt(this.length*8),s),this.process(n,0);const v=yr(e),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const M=p/4,k=this.get();if(M>k.length)throw new Error("_sha2: outputLen bigger than state");for(let O=0;O<M;O++)v.setUint32(4*O,k[O],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:c,finished:s,destroyed:f,pos:v}=this;return e.destroyed=f,e.finished=s,e.length=c,e.pos=v,c%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const Me=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),yn=BigInt(2**32-1),Bi=BigInt(32);function aa(t,e=!1){return e?{h:Number(t&yn),l:Number(t>>Bi&yn)}:{h:Number(t>>Bi&yn)|0,l:Number(t&yn)|0}}function ca(t,e=!1){const r=t.length;let n=new Uint32Array(r),c=new Uint32Array(r);for(let s=0;s<r;s++){const{h:f,l:v}=aa(t[s],e);[n[s],c[s]]=[f,v]}return[n,c]}const Si=(t,e,r)=>t>>>r,Ii=(t,e,r)=>t<<32-r|e>>>r,Pe=(t,e,r)=>t>>>r|e<<32-r,He=(t,e,r)=>t<<32-r|e>>>r,mn=(t,e,r)=>t<<64-r|e>>>r-32,wn=(t,e,r)=>t>>>r-32|e<<64-r;function me(t,e,r,n){const c=(e>>>0)+(n>>>0);return{h:t+r+(c/2**32|0)|0,l:c|0}}const ua=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),fa=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,ha=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),la=(t,e,r,n,c)=>e+r+n+c+(t/2**32|0)|0,da=(t,e,r,n,c)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(c>>>0),pa=(t,e,r,n,c,s)=>e+r+n+c+s+(t/2**32|0)|0,ga=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ae=new Uint32Array(64);class ya extends cs{constructor(e=32){super(64,e,8,!1),this.A=Me[0]|0,this.B=Me[1]|0,this.C=Me[2]|0,this.D=Me[3]|0,this.E=Me[4]|0,this.F=Me[5]|0,this.G=Me[6]|0,this.H=Me[7]|0}get(){const{A:e,B:r,C:n,D:c,E:s,F:f,G:v,H:p}=this;return[e,r,n,c,s,f,v,p]}set(e,r,n,c,s,f,v,p){this.A=e|0,this.B=r|0,this.C=n|0,this.D=c|0,this.E=s|0,this.F=f|0,this.G=v|0,this.H=p|0}process(e,r){for(let O=0;O<16;O++,r+=4)Ae[O]=e.getUint32(r,!1);for(let O=16;O<64;O++){const B=Ae[O-15],_=Ae[O-2],C=ce(B,7)^ce(B,18)^B>>>3,F=ce(_,17)^ce(_,19)^_>>>10;Ae[O]=F+Ae[O-7]+C+Ae[O-16]|0}let{A:n,B:c,C:s,D:f,E:v,F:p,G:M,H:k}=this;for(let O=0;O<64;O++){const B=ce(v,6)^ce(v,11)^ce(v,25),_=k+B+sa(v,p,M)+ga[O]+Ae[O]|0,F=(ce(n,2)^ce(n,13)^ce(n,22))+oa(n,c,s)|0;k=M,M=p,p=v,v=f+_|0,f=s,s=c,c=n,n=_+F|0}n=n+this.A|0,c=c+this.B|0,s=s+this.C|0,f=f+this.D|0,v=v+this.E|0,p=p+this.F|0,M=M+this.G|0,k=k+this.H|0,this.set(n,c,s,f,v,p,M,k)}roundClean(){Xe(Ae)}destroy(){this.set(0,0,0,0,0,0,0,0),Xe(this.buffer)}}const us=ca(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),ma=us[0],wa=us[1],Be=new Uint32Array(80),Se=new Uint32Array(80);class va extends cs{constructor(e=64){super(128,e,16,!1),this.Ah=Qt[0]|0,this.Al=Qt[1]|0,this.Bh=Qt[2]|0,this.Bl=Qt[3]|0,this.Ch=Qt[4]|0,this.Cl=Qt[5]|0,this.Dh=Qt[6]|0,this.Dl=Qt[7]|0,this.Eh=Qt[8]|0,this.El=Qt[9]|0,this.Fh=Qt[10]|0,this.Fl=Qt[11]|0,this.Gh=Qt[12]|0,this.Gl=Qt[13]|0,this.Hh=Qt[14]|0,this.Hl=Qt[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:c,Ch:s,Cl:f,Dh:v,Dl:p,Eh:M,El:k,Fh:O,Fl:B,Gh:_,Gl:C,Hh:F,Hl:D}=this;return[e,r,n,c,s,f,v,p,M,k,O,B,_,C,F,D]}set(e,r,n,c,s,f,v,p,M,k,O,B,_,C,F,D){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=c|0,this.Ch=s|0,this.Cl=f|0,this.Dh=v|0,this.Dl=p|0,this.Eh=M|0,this.El=k|0,this.Fh=O|0,this.Fl=B|0,this.Gh=_|0,this.Gl=C|0,this.Hh=F|0,this.Hl=D|0}process(e,r){for(let z=0;z<16;z++,r+=4)Be[z]=e.getUint32(r),Se[z]=e.getUint32(r+=4);for(let z=16;z<80;z++){const G=Be[z-15]|0,W=Se[z-15]|0,Y=Pe(G,W,1)^Pe(G,W,8)^Si(G,W,7),Q=He(G,W,1)^He(G,W,8)^Ii(G,W,7),X=Be[z-2]|0,A=Se[z-2]|0,S=Pe(X,A,19)^mn(X,A,61)^Si(X,A,6),R=He(X,A,19)^wn(X,A,61)^Ii(X,A,6),U=ha(Q,R,Se[z-7],Se[z-16]),l=la(U,Y,S,Be[z-7],Be[z-16]);Be[z]=l|0,Se[z]=U|0}let{Ah:n,Al:c,Bh:s,Bl:f,Ch:v,Cl:p,Dh:M,Dl:k,Eh:O,El:B,Fh:_,Fl:C,Gh:F,Gl:D,Hh:q,Hl:P}=this;for(let z=0;z<80;z++){const G=Pe(O,B,14)^Pe(O,B,18)^mn(O,B,41),W=He(O,B,14)^He(O,B,18)^wn(O,B,41),Y=O&_^~O&F,Q=B&C^~B&D,X=da(P,W,Q,wa[z],Se[z]),A=pa(X,q,G,Y,ma[z],Be[z]),S=X|0,R=Pe(n,c,28)^mn(n,c,34)^mn(n,c,39),U=He(n,c,28)^wn(n,c,34)^wn(n,c,39),l=n&s^n&v^s&v,i=c&f^c&p^f&p;q=F|0,P=D|0,F=_|0,D=C|0,_=O|0,C=B|0,{h:O,l:B}=me(M|0,k|0,A|0,S|0),M=v|0,k=p|0,v=s|0,p=f|0,s=n|0,f=c|0;const u=ua(S,U,i);n=fa(u,A,R,l),c=u|0}({h:n,l:c}=me(this.Ah|0,this.Al|0,n|0,c|0)),{h:s,l:f}=me(this.Bh|0,this.Bl|0,s|0,f|0),{h:v,l:p}=me(this.Ch|0,this.Cl|0,v|0,p|0),{h:M,l:k}=me(this.Dh|0,this.Dl|0,M|0,k|0),{h:O,l:B}=me(this.Eh|0,this.El|0,O|0,B|0),{h:_,l:C}=me(this.Fh|0,this.Fl|0,_|0,C|0),{h:F,l:D}=me(this.Gh|0,this.Gl|0,F|0,D|0),{h:q,l:P}=me(this.Hh|0,this.Hl|0,q|0,P|0),this.set(n,c,s,f,v,p,M,k,O,B,_,C,F,D,q,P)}roundClean(){Xe(Be,Se)}destroy(){Xe(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const fs=as(()=>new ya),ba=as(()=>new va);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kr=BigInt(0),Lr=BigInt(1);function Ce(t,e=""){if(typeof t!="boolean"){const r=e&&`"${e}"`;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function se(t,e,r=""){const n=un(t),c=t?.length,s=e!==void 0;if(!n||s&&c!==e){const f=r&&`"${r}" `,v=s?` of length ${e}`:"",p=n?`length=${c}`:`type=${typeof t}`;throw new Error(f+"expected Uint8Array"+v+", got "+p)}return t}function vn(t){const e=t.toString(16);return e.length&1?"0"+e:e}function hs(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Kr:BigInt("0x"+t)}function Dn(t){return hs(Oe(t))}function an(t){return Ne(t),hs(Oe(Uint8Array.from(t).reverse()))}function Pr(t,e){return Sn(t.toString(16).padStart(e*2,"0"))}function ls(t,e){return Pr(t,e).reverse()}function ft(t,e,r){let n;if(typeof e=="string")try{n=Sn(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(un(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const c=n.length;if(typeof r=="number"&&c!==r)throw new Error(t+" of length "+r+" expected, got "+c);return n}function _i(t){return Uint8Array.from(t)}const mr=t=>typeof t=="bigint"&&Kr<=t;function xa(t,e,r){return mr(t)&&mr(e)&&mr(r)&&e<=t&&t<r}function Tr(t,e,r,n){if(!xa(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function ds(t){let e;for(e=0;t>Kr;t>>=Lr,e+=1);return e}const fn=t=>(Lr<<BigInt(t))-Lr;function Ea(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=_=>new Uint8Array(_),c=_=>Uint8Array.of(_);let s=n(t),f=n(t),v=0;const p=()=>{s.fill(1),f.fill(0),v=0},M=(..._)=>r(f,s,..._),k=(_=n(0))=>{f=M(c(0),_),s=M(),_.length!==0&&(f=M(c(1),_),s=M())},O=()=>{if(v++>=1e3)throw new Error("drbg: tried 1000 values");let _=0;const C=[];for(;_<e;){s=M();const F=s.slice();C.push(F),_+=s.length}return le(...C)};return(_,C)=>{p(),k(_);let F;for(;!(F=C(O()));)k();return p(),F}}function hn(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(c,s,f){const v=t[c];if(f&&v===void 0)return;const p=typeof v;if(p!==s||v===null)throw new Error(`param "${c}" is invalid: expected ${s}, got ${p}`)}Object.entries(e).forEach(([c,s])=>n(c,s,!1)),Object.entries(r).forEach(([c,s])=>n(c,s,!0))}function In(t){const e=new WeakMap;return(r,...n)=>{const c=e.get(r);if(c!==void 0)return c;const s=t(r,...n);return e.set(r,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ee=BigInt(0),Gt=BigInt(1),Le=BigInt(2),ps=BigInt(3),gs=BigInt(4),ys=BigInt(5),Ma=BigInt(7),ms=BigInt(8),Aa=BigInt(9),ws=BigInt(16);function $t(t,e){const r=t%e;return r>=ee?r:e+r}function ut(t,e,r){let n=t;for(;e-- >ee;)n*=n,n%=r;return n}function ki(t,e){if(t===ee)throw new Error("invert: expected non-zero number");if(e<=ee)throw new Error("invert: expected positive modulus, got "+e);let r=$t(t,e),n=e,c=ee,s=Gt;for(;r!==ee;){const v=n/r,p=n%r,M=c-s*v;n=r,r=p,c=s,s=M}if(n!==Gt)throw new Error("invert: does not exist");return $t(c,e)}function Hr(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function vs(t,e){const r=(t.ORDER+Gt)/gs,n=t.pow(e,r);return Hr(t,n,e),n}function Ba(t,e){const r=(t.ORDER-ys)/ms,n=t.mul(e,Le),c=t.pow(n,r),s=t.mul(e,c),f=t.mul(t.mul(s,Le),c),v=t.mul(s,t.sub(f,t.ONE));return Hr(t,v,e),v}function Sa(t){const e=Fe(t),r=bs(t),n=r(e,e.neg(e.ONE)),c=r(e,n),s=r(e,e.neg(n)),f=(t+Ma)/ws;return(v,p)=>{let M=v.pow(p,f),k=v.mul(M,n);const O=v.mul(M,c),B=v.mul(M,s),_=v.eql(v.sqr(k),p),C=v.eql(v.sqr(O),p);M=v.cmov(M,k,_),k=v.cmov(B,O,C);const F=v.eql(v.sqr(k),p),D=v.cmov(M,k,F);return Hr(v,D,p),D}}function bs(t){if(t<ps)throw new Error("sqrt is not defined for small field");let e=t-Gt,r=0;for(;e%Le===ee;)e/=Le,r++;let n=Le;const c=Fe(t);for(;Ri(c,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return vs;let s=c.pow(n,e);const f=(e+Gt)/Le;return function(p,M){if(p.is0(M))return M;if(Ri(p,M)!==1)throw new Error("Cannot find square root");let k=r,O=p.mul(p.ONE,s),B=p.pow(M,e),_=p.pow(M,f);for(;!p.eql(B,p.ONE);){if(p.is0(B))return p.ZERO;let C=1,F=p.sqr(B);for(;!p.eql(F,p.ONE);)if(C++,F=p.sqr(F),C===k)throw new Error("Cannot find square root");const D=Gt<<BigInt(k-C-1),q=p.pow(O,D);k=C,O=p.sqr(q),B=p.mul(B,O),_=p.mul(_,q)}return _}}function Ia(t){return t%gs===ps?vs:t%ms===ys?Ba:t%ws===Aa?Sa(t):bs(t)}const _a=(t,e)=>($t(t,e)&Gt)===Gt,ka=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ra(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=ka.reduce((n,c)=>(n[c]="function",n),e);return hn(t,r),t}function La(t,e,r){if(r<ee)throw new Error("invalid exponent, negatives unsupported");if(r===ee)return t.ONE;if(r===Gt)return e;let n=t.ONE,c=e;for(;r>ee;)r&Gt&&(n=t.mul(n,c)),c=t.sqr(c),r>>=Gt;return n}function xs(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),c=e.reduce((f,v,p)=>t.is0(v)?f:(n[p]=f,t.mul(f,v)),t.ONE),s=t.inv(c);return e.reduceRight((f,v,p)=>t.is0(v)?f:(n[p]=t.mul(f,n[p]),t.mul(f,v)),s),n}function Ri(t,e){const r=(t.ORDER-Gt)/Le,n=t.pow(e,r),c=t.eql(n,t.ONE),s=t.eql(n,t.ZERO),f=t.eql(n,t.neg(t.ONE));if(!c&&!s&&!f)throw new Error("invalid Legendre symbol result");return c?1:s?0:-1}function Es(t,e){e!==void 0&&Rr(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Fe(t,e,r=!1,n={}){if(t<=ee)throw new Error("invalid field: expected ORDER > 0, got "+t);let c,s,f=!1,v;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const B=e;B.BITS&&(c=B.BITS),B.sqrt&&(s=B.sqrt),typeof B.isLE=="boolean"&&(r=B.isLE),typeof B.modFromBytes=="boolean"&&(f=B.modFromBytes),v=B.allowedLengths}else typeof e=="number"&&(c=e),n.sqrt&&(s=n.sqrt);const{nBitLength:p,nByteLength:M}=Es(t,c);if(M>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let k;const O=Object.freeze({ORDER:t,isLE:r,BITS:p,BYTES:M,MASK:fn(p),ZERO:ee,ONE:Gt,allowedLengths:v,create:B=>$t(B,t),isValid:B=>{if(typeof B!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof B);return ee<=B&&B<t},is0:B=>B===ee,isValidNot0:B=>!O.is0(B)&&O.isValid(B),isOdd:B=>(B&Gt)===Gt,neg:B=>$t(-B,t),eql:(B,_)=>B===_,sqr:B=>$t(B*B,t),add:(B,_)=>$t(B+_,t),sub:(B,_)=>$t(B-_,t),mul:(B,_)=>$t(B*_,t),pow:(B,_)=>La(O,B,_),div:(B,_)=>$t(B*ki(_,t),t),sqrN:B=>B*B,addN:(B,_)=>B+_,subN:(B,_)=>B-_,mulN:(B,_)=>B*_,inv:B=>ki(B,t),sqrt:s||(B=>(k||(k=Ia(t)),k(O,B))),toBytes:B=>r?ls(B,M):Pr(B,M),fromBytes:(B,_=!0)=>{if(v){if(!v.includes(B.length)||B.length>M)throw new Error("Field.fromBytes: expected "+v+" bytes, got "+B.length);const F=new Uint8Array(M);F.set(B,r?0:F.length-B.length),B=F}if(B.length!==M)throw new Error("Field.fromBytes: expected "+M+" bytes, got "+B.length);let C=r?an(B):Dn(B);if(f&&(C=$t(C,t)),!_&&!O.isValid(C))throw new Error("invalid field element: outside of range 0..ORDER");return C},invertBatch:B=>xs(O,B),cmov:(B,_,C)=>C?_:B});return Object.freeze(O)}function Ms(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function As(t){const e=Ms(t);return e+Math.ceil(e/2)}function Ta(t,e,r=!1){const n=t.length,c=Ms(e),s=As(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const f=r?an(t):Dn(t),v=$t(f,e-Gt)+Gt;return r?ls(v,c):Pr(v,c)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Je=BigInt(0),Te=BigInt(1);function _n(t,e){const r=e.negate();return t?r:e}function Ue(t,e){const r=xs(t.Fp,e.map(n=>n.Z));return e.map((n,c)=>t.fromAffine(n.toAffine(r[c])))}function Bs(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function wr(t,e){Bs(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),c=2**t,s=fn(t),f=BigInt(t);return{windows:r,windowSize:n,mask:s,maxNumber:c,shiftBy:f}}function Li(t,e,r){const{windowSize:n,mask:c,maxNumber:s,shiftBy:f}=r;let v=Number(t&c),p=t>>f;v>n&&(v-=s,p+=Te);const M=e*n,k=M+Math.abs(v)-1,O=v===0,B=v<0,_=e%2!==0;return{nextN:p,offset:k,isZero:O,isNeg:B,isNegF:_,offsetF:M}}function Ua(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function Oa(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const vr=new WeakMap,Ss=new WeakMap;function br(t){return Ss.get(t)||1}function Ti(t){if(t!==Je)throw new Error("invalid wNAF")}class Is{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let c=e;for(;r>Je;)r&Te&&(n=n.add(c)),c=c.double(),r>>=Te;return n}precomputeWindow(e,r){const{windows:n,windowSize:c}=wr(r,this.bits),s=[];let f=e,v=f;for(let p=0;p<n;p++){v=f,s.push(v);for(let M=1;M<c;M++)v=v.add(f),s.push(v);f=v.double()}return s}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let c=this.ZERO,s=this.BASE;const f=wr(e,this.bits);for(let v=0;v<f.windows;v++){const{nextN:p,offset:M,isZero:k,isNeg:O,isNegF:B,offsetF:_}=Li(n,v,f);n=p,k?s=s.add(_n(B,r[_])):c=c.add(_n(O,r[M]))}return Ti(n),{p:c,f:s}}wNAFUnsafe(e,r,n,c=this.ZERO){const s=wr(e,this.bits);for(let f=0;f<s.windows&&n!==Je;f++){const{nextN:v,offset:p,isZero:M,isNeg:k}=Li(n,f,s);if(n=v,!M){const O=r[p];c=c.add(k?O.negate():O)}}return Ti(n),c}getPrecomputes(e,r,n){let c=vr.get(r);return c||(c=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(c=n(c)),vr.set(r,c))),c}cached(e,r,n){const c=br(e);return this.wNAF(c,this.getPrecomputes(c,e,n),r)}unsafe(e,r,n,c){const s=br(e);return s===1?this._unsafeLadder(e,r,c):this.wNAFUnsafe(s,this.getPrecomputes(s,e,n),r,c)}createCache(e,r){Bs(r,this.bits),Ss.set(e,r),vr.delete(e)}hasCache(e){return br(e)!==1}}function Ca(t,e,r,n){let c=e,s=t.ZERO,f=t.ZERO;for(;r>Je||n>Je;)r&Te&&(s=s.add(c)),n&Te&&(f=f.add(c)),c=c.double(),r>>=Te,n>>=Te;return{p1:s,p2:f}}function _s(t,e,r,n){Ua(r,t),Oa(n,e);const c=r.length,s=n.length;if(c!==s)throw new Error("arrays of points and scalars must have equal length");const f=t.ZERO,v=ds(BigInt(c));let p=1;v>12?p=v-3:v>4?p=v-2:v>0&&(p=2);const M=fn(p),k=new Array(Number(M)+1).fill(f),O=Math.floor((e.BITS-1)/p)*p;let B=f;for(let _=O;_>=0;_-=p){k.fill(f);for(let F=0;F<s;F++){const D=n[F],q=Number(D>>BigInt(_)&M);k[q]=k[q].add(r[F])}let C=f;for(let F=k.length-1,D=f;F>0;F--)D=D.add(k[F]),C=C.add(D);if(B=B.add(C),_!==0)for(let F=0;F<p;F++)B=B.double()}return B}function Ui(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Ra(e),e}else return Fe(t,{isLE:r})}function ks(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const p of["p","n","h"]){const M=e[p];if(!(typeof M=="bigint"&&M>Je))throw new Error(`CURVE.${p} must be positive bigint`)}const c=Ui(e.p,r.Fp,n),s=Ui(e.n,r.Fn,n),v=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const p of v)if(!c.isValid(e[p]))throw new Error(`CURVE.${p} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:c,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ie=BigInt(0),jt=BigInt(1),xr=BigInt(2),Na=BigInt(8);function Fa(t,e,r,n){const c=t.sqr(r),s=t.sqr(n),f=t.add(t.mul(e.a,c),s),v=t.add(t.ONE,t.mul(e.d,t.mul(c,s)));return t.eql(f,v)}function za(t,e={}){const r=ks("edwards",t,e,e.FpFnLE),{Fp:n,Fn:c}=r;let s=r.CURVE;const{h:f}=s;hn(e,{},{uvRatio:"function"});const v=xr<<BigInt(c.BYTES*8)-jt,p=D=>n.create(D),M=e.uvRatio||((D,q)=>{try{return{isValid:!0,value:n.sqrt(n.div(D,q))}}catch{return{isValid:!1,value:Ie}}});if(!Fa(n,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function k(D,q,P=!1){const z=P?jt:Ie;return Tr("coordinate "+D,q,z,v),q}function O(D){if(!(D instanceof C))throw new Error("ExtendedPoint expected")}const B=In((D,q)=>{const{X:P,Y:z,Z:G}=D,W=D.is0();q==null&&(q=W?Na:n.inv(G));const Y=p(P*q),Q=p(z*q),X=n.mul(G,q);if(W)return{x:Ie,y:jt};if(X!==jt)throw new Error("invZ was invalid");return{x:Y,y:Q}}),_=In(D=>{const{a:q,d:P}=s;if(D.is0())throw new Error("bad point: ZERO");const{X:z,Y:G,Z:W,T:Y}=D,Q=p(z*z),X=p(G*G),A=p(W*W),S=p(A*A),R=p(Q*q),U=p(A*p(R+X)),l=p(S+p(P*p(Q*X)));if(U!==l)throw new Error("bad point: equation left != right (1)");const i=p(z*G),u=p(W*Y);if(i!==u)throw new Error("bad point: equation left != right (2)");return!0});class C{constructor(q,P,z,G){this.X=k("x",q),this.Y=k("y",P),this.Z=k("z",z,!0),this.T=k("t",G),Object.freeze(this)}static CURVE(){return s}static fromAffine(q){if(q instanceof C)throw new Error("extended point not allowed");const{x:P,y:z}=q||{};return k("x",P),k("y",z),new C(P,z,jt,p(P*z))}static fromBytes(q,P=!1){const z=n.BYTES,{a:G,d:W}=s;q=_i(se(q,z,"point")),Ce(P,"zip215");const Y=_i(q),Q=q[z-1];Y[z-1]=Q&-129;const X=an(Y),A=P?v:n.ORDER;Tr("point.y",X,Ie,A);const S=p(X*X),R=p(S-jt),U=p(W*S-G);let{isValid:l,value:i}=M(R,U);if(!l)throw new Error("bad point: invalid y coordinate");const u=(i&jt)===jt,h=(Q&128)!==0;if(!P&&i===Ie&&h)throw new Error("bad point: x=0 and x_0=1");return h!==u&&(i=p(-i)),C.fromAffine({x:i,y:X})}static fromHex(q,P=!1){return C.fromBytes(ft("point",q),P)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(q=8,P=!0){return F.createCache(this,q),P||this.multiply(xr),this}assertValidity(){_(this)}equals(q){O(q);const{X:P,Y:z,Z:G}=this,{X:W,Y,Z:Q}=q,X=p(P*Q),A=p(W*G),S=p(z*Q),R=p(Y*G);return X===A&&S===R}is0(){return this.equals(C.ZERO)}negate(){return new C(p(-this.X),this.Y,this.Z,p(-this.T))}double(){const{a:q}=s,{X:P,Y:z,Z:G}=this,W=p(P*P),Y=p(z*z),Q=p(xr*p(G*G)),X=p(q*W),A=P+z,S=p(p(A*A)-W-Y),R=X+Y,U=R-Q,l=X-Y,i=p(S*U),u=p(R*l),h=p(S*l),g=p(U*R);return new C(i,u,g,h)}add(q){O(q);const{a:P,d:z}=s,{X:G,Y:W,Z:Y,T:Q}=this,{X,Y:A,Z:S,T:R}=q,U=p(G*X),l=p(W*A),i=p(Q*z*R),u=p(Y*S),h=p((G+W)*(X+A)-U-l),g=u-i,m=u+i,b=p(l-P*U),E=p(h*g),y=p(m*b),o=p(h*b),a=p(g*m);return new C(E,y,a,o)}subtract(q){return this.add(q.negate())}multiply(q){if(!c.isValidNot0(q))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:P,f:z}=F.cached(this,q,G=>Ue(C,G));return Ue(C,[P,z])[0]}multiplyUnsafe(q,P=C.ZERO){if(!c.isValid(q))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return q===Ie?C.ZERO:this.is0()||q===jt?this:F.unsafe(this,q,z=>Ue(C,z),P)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return F.unsafe(this,s.n).is0()}toAffine(q){return B(this,q)}clearCofactor(){return f===jt?this:this.multiplyUnsafe(f)}toBytes(){const{x:q,y:P}=this.toAffine(),z=n.toBytes(P);return z[z.length-1]|=q&jt?128:0,z}toHex(){return Oe(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(q){return Ue(C,q)}static msm(q,P){return _s(C,c,q,P)}_setWindowSize(q){this.precompute(q)}toRawBytes(){return this.toBytes()}}C.BASE=new C(s.Gx,s.Gy,jt,p(s.Gx*s.Gy)),C.ZERO=new C(Ie,jt,jt,Ie),C.Fp=n,C.Fn=c;const F=new Is(C,c.BITS);return C.BASE.precompute(8),C}function qa(t,e,r={}){if(typeof e!="function")throw new Error('"hash" function param is required');hn(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=r,{BASE:c,Fp:s,Fn:f}=t,v=r.randomBytes||Dr,p=r.adjustScalarBytes||(A=>A),M=r.domain||((A,S,R)=>{if(Ce(R,"phflag"),S.length||R)throw new Error("Contexts/pre-hash are not supported");return A});function k(A){return f.create(an(A))}function O(A){const S=z.secretKey;A=ft("private key",A,S);const R=ft("hashed private key",e(A),2*S),U=p(R.slice(0,S)),l=R.slice(S,2*S),i=k(U);return{head:U,prefix:l,scalar:i}}function B(A){const{head:S,prefix:R,scalar:U}=O(A),l=c.multiply(U),i=l.toBytes();return{head:S,prefix:R,scalar:U,point:l,pointBytes:i}}function _(A){return B(A).pointBytes}function C(A=Uint8Array.of(),...S){const R=le(...S);return k(e(M(R,ft("context",A),!!n)))}function F(A,S,R={}){A=ft("message",A),n&&(A=n(A));const{prefix:U,scalar:l,pointBytes:i}=B(S),u=C(R.context,U,A),h=c.multiply(u).toBytes(),g=C(R.context,h,i,A),m=f.create(u+g*l);if(!f.isValid(m))throw new Error("sign failed: invalid s");const b=le(h,f.toBytes(m));return se(b,z.signature,"result")}const D={zip215:!0};function q(A,S,R,U=D){const{context:l,zip215:i}=U,u=z.signature;A=ft("signature",A,u),S=ft("message",S),R=ft("publicKey",R,z.publicKey),i!==void 0&&Ce(i,"zip215"),n&&(S=n(S));const h=u/2,g=A.subarray(0,h),m=an(A.subarray(h,u));let b,E,y;try{b=t.fromBytes(R,i),E=t.fromBytes(g,i),y=c.multiplyUnsafe(m)}catch{return!1}if(!i&&b.isSmallOrder())return!1;const o=C(l,E.toBytes(),b.toBytes(),S);return E.add(b.multiplyUnsafe(o)).subtract(y).clearCofactor().is0()}const P=s.BYTES,z={secretKey:P,publicKey:P,signature:2*P,seed:P};function G(A=v(z.seed)){return se(A,z.seed,"seed")}function W(A){const S=X.randomSecretKey(A);return{secretKey:S,publicKey:_(S)}}function Y(A){return un(A)&&A.length===f.BYTES}function Q(A,S){try{return!!t.fromBytes(A,S)}catch{return!1}}const X={getExtendedPublicKey:B,randomSecretKey:G,isValidSecretKey:Y,isValidPublicKey:Q,toMontgomery(A){const{y:S}=t.fromBytes(A),R=z.publicKey,U=R===32;if(!U&&R!==57)throw new Error("only defined for 25519 and 448");const l=U?s.div(jt+S,jt-S):s.div(S-jt,S+jt);return s.toBytes(l)},toMontgomerySecret(A){const S=z.secretKey;se(A,S);const R=e(A.subarray(0,S));return p(R).subarray(0,S)},randomPrivateKey:G,precompute(A=8,S=t.BASE){return S.precompute(A,!1)}};return Object.freeze({keygen:W,getPublicKey:_,sign:F,verify:q,utils:X,Point:t,lengths:z})}function Da(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=Fe(e.n,t.nBitLength,!0),c={Fp:r,Fn:n,uvRatio:t.uvRatio},s={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:c,hash:t.hash,eddsaOpts:s}}function Ka(t,e){const r=e.Point;return Object.assign({},e,{ExtendedPoint:r,CURVE:t,nBitLength:r.Fn.BITS,nByteLength:r.Fn.BYTES})}function Pa(t){const{CURVE:e,curveOpts:r,hash:n,eddsaOpts:c}=Da(t),s=za(e,r),f=qa(s,n,c);return Ka(t,f)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ha=BigInt(1),Oi=BigInt(2);BigInt(3);const Va=BigInt(5),Za=BigInt(8),Vr=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Rs={p:Vr,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Za,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function $a(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),c=BigInt(80),s=Vr,v=t*t%s*t%s,p=ut(v,Oi,s)*v%s,M=ut(p,Ha,s)*t%s,k=ut(M,Va,s)*M%s,O=ut(k,e,s)*k%s,B=ut(O,r,s)*O%s,_=ut(B,n,s)*B%s,C=ut(_,c,s)*_%s,F=ut(C,c,s)*_%s,D=ut(F,e,s)*k%s;return{pow_p_5_8:ut(D,Oi,s)*t%s,b2:v}}function ja(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Ci=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Ga(t,e){const r=Vr,n=$t(e*e*e,r),c=$t(n*n*e,r),s=$a(t*c).pow_p_5_8;let f=$t(t*n*s,r);const v=$t(e*f*f,r),p=f,M=$t(f*Ci,r),k=v===t,O=v===$t(-t,r),B=v===$t(-t*Ci,r);return k&&(f=p),(O||B)&&(f=M),_a(f,r)&&(f=$t(-f,r)),{isValid:k||O,value:f}}const Ya=Fe(Rs.p,{isLE:!0}),Wa={...Rs,Fp:Ya,hash:ba,adjustScalarBytes:ja,uvRatio:Ga},ln=Pa(Wa);var Er,Ni;function Xa(){if(Ni)return Er;Ni=1;var t=yo().Buffer;function e(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),c=0;c<n.length;c++)n[c]=255;for(var s=0;s<r.length;s++){var f=r.charAt(s),v=f.charCodeAt(0);if(n[v]!==255)throw new TypeError(f+" is ambiguous");n[v]=s}var p=r.length,M=r.charAt(0),k=Math.log(p)/Math.log(256),O=Math.log(256)/Math.log(p);function B(F){if((Array.isArray(F)||F instanceof Uint8Array)&&(F=t.from(F)),!t.isBuffer(F))throw new TypeError("Expected Buffer");if(F.length===0)return"";for(var D=0,q=0,P=0,z=F.length;P!==z&&F[P]===0;)P++,D++;for(var G=(z-P)*O+1>>>0,W=new Uint8Array(G);P!==z;){for(var Y=F[P],Q=0,X=G-1;(Y!==0||Q<q)&&X!==-1;X--,Q++)Y+=256*W[X]>>>0,W[X]=Y%p>>>0,Y=Y/p>>>0;if(Y!==0)throw new Error("Non-zero carry");q=Q,P++}for(var A=G-q;A!==G&&W[A]===0;)A++;for(var S=M.repeat(D);A<G;++A)S+=r.charAt(W[A]);return S}function _(F){if(typeof F!="string")throw new TypeError("Expected String");if(F.length===0)return t.alloc(0);for(var D=0,q=0,P=0;F[D]===M;)q++,D++;for(var z=(F.length-D)*k+1>>>0,G=new Uint8Array(z);D<F.length;){var W=F.charCodeAt(D);if(W>255)return;var Y=n[W];if(Y===255)return;for(var Q=0,X=z-1;(Y!==0||Q<P)&&X!==-1;X--,Q++)Y+=p*G[X]>>>0,G[X]=Y%256>>>0,Y=Y/256>>>0;if(Y!==0)throw new Error("Non-zero carry");P=Q,D++}for(var A=z-P;A!==z&&G[A]===0;)A++;var S=t.allocUnsafe(q+(z-A));S.fill(0,0,q);for(var R=q;A!==z;)S[R++]=G[A++];return S}function C(F){var D=_(F);if(D)return D;throw new Error("Non-base"+p+" character")}return{encode:B,decodeUnsafe:_,decode:C}}return Er=e,Er}var Mr,Fi;function Ls(){if(Fi)return Mr;Fi=1;var t=Xa(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Mr=t(e),Mr}var Ja=Ls();const he=Yi(Ja),zi=fs;var rt={};function ve(t,e,r){return e<=t&&t<=r}function Kn(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function Qa(t){for(var e=String(t),r=e.length,n=0,c=[];n<r;){var s=e.charCodeAt(n);if(s<55296||s>57343)c.push(s);else if(56320<=s&&s<=57343)c.push(65533);else if(55296<=s&&s<=56319)if(n===r-1)c.push(65533);else{var f=t.charCodeAt(n+1);if(56320<=f&&f<=57343){var v=s&1023,p=f&1023;c.push(65536+(v<<10)+p),n+=1}else c.push(65533)}n+=1}return c}function tc(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var kn=-1;function Zr(t){this.tokens=[].slice.call(t)}Zr.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():kn},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var Qe=-1;function Ar(t,e){if(t)throw TypeError("Decoder error");return e||65533}var Rn="utf-8";function Ln(t,e){if(!(this instanceof Ln))return new Ln(t,e);if(t=t!==void 0?String(t).toLowerCase():Rn,t!==Rn)throw new Error("Encoding not supported. Only utf-8 is supported");e=Kn(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Ln.prototype={decode:function(e,r){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),r=Kn(r),this._streaming||(this._decoder=new ec({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var c=new Zr(n),s=[],f;!c.endOfStream()&&(f=this._decoder.handler(c,c.read()),f!==Qe);)f!==null&&(Array.isArray(f)?s.push.apply(s,f):s.push(f));if(!this._streaming){do{if(f=this._decoder.handler(c,c.read()),f===Qe)break;f!==null&&(Array.isArray(f)?s.push.apply(s,f):s.push(f))}while(!c.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),tc(s)}};function Tn(t,e){if(!(this instanceof Tn))return new Tn(t,e);if(t=t!==void 0?String(t).toLowerCase():Rn,t!==Rn)throw new Error("Encoding not supported. Only utf-8 is supported");e=Kn(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Tn.prototype={encode:function(e,r){e=e?String(e):"",r=Kn(r),this._streaming||(this._encoder=new nc(this._options)),this._streaming=!!r.stream;for(var n=[],c=new Zr(Qa(e)),s;!c.endOfStream()&&(s=this._encoder.handler(c,c.read()),s!==Qe);)Array.isArray(s)?n.push.apply(n,s):n.push(s);if(!this._streaming){for(;s=this._encoder.handler(c,c.read()),s!==Qe;)Array.isArray(s)?n.push.apply(n,s):n.push(s);this._encoder=null}return new Uint8Array(n)}};function ec(t){var e=t.fatal,r=0,n=0,c=0,s=128,f=191;this.handler=function(v,p){if(p===kn&&c!==0)return c=0,Ar(e);if(p===kn)return Qe;if(c===0){if(ve(p,0,127))return p;if(ve(p,194,223))c=1,r=p-192;else if(ve(p,224,239))p===224&&(s=160),p===237&&(f=159),c=2,r=p-224;else if(ve(p,240,244))p===240&&(s=144),p===244&&(f=143),c=3,r=p-240;else return Ar(e);return r=r<<6*c,null}if(!ve(p,s,f))return r=c=n=0,s=128,f=191,v.prepend(p),Ar(e);if(s=128,f=191,n+=1,r+=p-128<<6*(c-n),n!==c)return null;var M=r;return r=c=n=0,M}}function nc(t){t.fatal,this.handler=function(e,r){if(r===kn)return Qe;if(ve(r,0,127))return r;var n,c;ve(r,128,2047)?(n=1,c=192):ve(r,2048,65535)?(n=2,c=224):ve(r,65536,1114111)&&(n=3,c=240);for(var s=[(r>>6*n)+c];n>0;){var f=r>>6*(n-1);s.push(128|f&63),n-=1}return s}}const rc=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Ln,TextEncoder:Tn},Symbol.toStringTag,{value:"Module"})),ic=Wi(rc);var qi;function sc(){if(qi)return rt;qi=1;var t=rt&&rt.__createBinding||(Object.create?function(A,S,R,U){U===void 0&&(U=R),Object.defineProperty(A,U,{enumerable:!0,get:function(){return S[R]}})}:function(A,S,R,U){U===void 0&&(U=R),A[U]=S[R]}),e=rt&&rt.__setModuleDefault||(Object.create?function(A,S){Object.defineProperty(A,"default",{enumerable:!0,value:S})}:function(A,S){A.default=S}),r=rt&&rt.__decorate||function(A,S,R,U){var l=arguments.length,i=l<3?S:U===null?U=Object.getOwnPropertyDescriptor(S,R):U,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(A,S,R,U);else for(var h=A.length-1;h>=0;h--)(u=A[h])&&(i=(l<3?u(i):l>3?u(S,R,i):u(S,R))||i);return l>3&&i&&Object.defineProperty(S,R,i),i},n=rt&&rt.__importStar||function(A){if(A&&A.__esModule)return A;var S={};if(A!=null)for(var R in A)R!=="default"&&Object.hasOwnProperty.call(A,R)&&t(S,A,R);return e(S,A),S},c=rt&&rt.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(rt,"__esModule",{value:!0}),rt.deserializeUnchecked=rt.deserialize=rt.serialize=rt.BinaryReader=rt.BinaryWriter=rt.BorshError=rt.baseDecode=rt.baseEncode=void 0;const s=c(Xi()),f=c(Ls()),v=n(ic),p=typeof TextDecoder!="function"?v.TextDecoder:TextDecoder,M=new p("utf-8",{fatal:!0});function k(A){return typeof A=="string"&&(A=Buffer.from(A,"utf8")),f.default.encode(Buffer.from(A))}rt.baseEncode=k;function O(A){return Buffer.from(f.default.decode(A))}rt.baseDecode=O;const B=1024;class _ extends Error{constructor(S){super(S),this.fieldPath=[],this.originalMessage=S}addToFieldPath(S){this.fieldPath.splice(0,0,S),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}rt.BorshError=_;class C{constructor(){this.buf=Buffer.alloc(B),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(B)]))}writeU8(S){this.maybeResize(),this.buf.writeUInt8(S,this.length),this.length+=1}writeU16(S){this.maybeResize(),this.buf.writeUInt16LE(S,this.length),this.length+=2}writeU32(S){this.maybeResize(),this.buf.writeUInt32LE(S,this.length),this.length+=4}writeU64(S){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(S).toArray("le",8)))}writeU128(S){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(S).toArray("le",16)))}writeU256(S){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(S).toArray("le",32)))}writeU512(S){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(S).toArray("le",64)))}writeBuffer(S){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),S,Buffer.alloc(B)]),this.length+=S.length}writeString(S){this.maybeResize();const R=Buffer.from(S,"utf8");this.writeU32(R.length),this.writeBuffer(R)}writeFixedArray(S){this.writeBuffer(Buffer.from(S))}writeArray(S,R){this.maybeResize(),this.writeU32(S.length);for(const U of S)this.maybeResize(),R(U)}toArray(){return this.buf.subarray(0,this.length)}}rt.BinaryWriter=C;function F(A,S,R){const U=R.value;R.value=function(...l){try{return U.apply(this,l)}catch(i){if(i instanceof RangeError){const u=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(u)>=0)throw new _("Reached the end of buffer when deserializing")}throw i}}}class D{constructor(S){this.buf=S,this.offset=0}readU8(){const S=this.buf.readUInt8(this.offset);return this.offset+=1,S}readU16(){const S=this.buf.readUInt16LE(this.offset);return this.offset+=2,S}readU32(){const S=this.buf.readUInt32LE(this.offset);return this.offset+=4,S}readU64(){const S=this.readBuffer(8);return new s.default(S,"le")}readU128(){const S=this.readBuffer(16);return new s.default(S,"le")}readU256(){const S=this.readBuffer(32);return new s.default(S,"le")}readU512(){const S=this.readBuffer(64);return new s.default(S,"le")}readBuffer(S){if(this.offset+S>this.buf.length)throw new _(`Expected buffer length ${S} isn't within bounds`);const R=this.buf.slice(this.offset,this.offset+S);return this.offset+=S,R}readString(){const S=this.readU32(),R=this.readBuffer(S);try{return M.decode(R)}catch(U){throw new _(`Error decoding UTF-8 string: ${U}`)}}readFixedArray(S){return new Uint8Array(this.readBuffer(S))}readArray(S){const R=this.readU32(),U=Array();for(let l=0;l<R;++l)U.push(S());return U}}r([F],D.prototype,"readU8",null),r([F],D.prototype,"readU16",null),r([F],D.prototype,"readU32",null),r([F],D.prototype,"readU64",null),r([F],D.prototype,"readU128",null),r([F],D.prototype,"readU256",null),r([F],D.prototype,"readU512",null),r([F],D.prototype,"readString",null),r([F],D.prototype,"readFixedArray",null),r([F],D.prototype,"readArray",null),rt.BinaryReader=D;function q(A){return A.charAt(0).toUpperCase()+A.slice(1)}function P(A,S,R,U,l){try{if(typeof U=="string")l[`write${q(U)}`](R);else if(U instanceof Array)if(typeof U[0]=="number"){if(R.length!==U[0])throw new _(`Expecting byte array of length ${U[0]}, but got ${R.length} bytes`);l.writeFixedArray(R)}else if(U.length===2&&typeof U[1]=="number"){if(R.length!==U[1])throw new _(`Expecting byte array of length ${U[1]}, but got ${R.length} bytes`);for(let i=0;i<U[1];i++)P(A,null,R[i],U[0],l)}else l.writeArray(R,i=>{P(A,S,i,U[0],l)});else if(U.kind!==void 0)switch(U.kind){case"option":{R==null?l.writeU8(0):(l.writeU8(1),P(A,S,R,U.type,l));break}case"map":{l.writeU32(R.size),R.forEach((i,u)=>{P(A,S,u,U.key,l),P(A,S,i,U.value,l)});break}default:throw new _(`FieldType ${U} unrecognized`)}else z(A,R,l)}catch(i){throw i instanceof _&&i.addToFieldPath(S),i}}function z(A,S,R){if(typeof S.borshSerialize=="function"){S.borshSerialize(R);return}const U=A.get(S.constructor);if(!U)throw new _(`Class ${S.constructor.name} is missing in schema`);if(U.kind==="struct")U.fields.map(([l,i])=>{P(A,l,S[l],i,R)});else if(U.kind==="enum"){const l=S[U.field];for(let i=0;i<U.values.length;++i){const[u,h]=U.values[i];if(u===l){R.writeU8(i),P(A,u,S[u],h,R);break}}}else throw new _(`Unexpected schema kind: ${U.kind} for ${S.constructor.name}`)}function G(A,S,R=C){const U=new R;return z(A,S,U),U.toArray()}rt.serialize=G;function W(A,S,R,U){try{if(typeof R=="string")return U[`read${q(R)}`]();if(R instanceof Array){if(typeof R[0]=="number")return U.readFixedArray(R[0]);if(typeof R[1]=="number"){const l=[];for(let i=0;i<R[1];i++)l.push(W(A,null,R[0],U));return l}else return U.readArray(()=>W(A,S,R[0],U))}if(R.kind==="option")return U.readU8()?W(A,S,R.type,U):void 0;if(R.kind==="map"){let l=new Map;const i=U.readU32();for(let u=0;u<i;u++){const h=W(A,S,R.key,U),g=W(A,S,R.value,U);l.set(h,g)}return l}return Y(A,R,U)}catch(l){throw l instanceof _&&l.addToFieldPath(S),l}}function Y(A,S,R){if(typeof S.borshDeserialize=="function")return S.borshDeserialize(R);const U=A.get(S);if(!U)throw new _(`Class ${S.name} is missing in schema`);if(U.kind==="struct"){const l={};for(const[i,u]of A.get(S).fields)l[i]=W(A,i,u,R);return new S(l)}if(U.kind==="enum"){const l=R.readU8();if(l>=U.values.length)throw new _(`Enum index: ${l} is out of range`);const[i,u]=U.values[l],h=W(A,i,u,R);return new S({[i]:h})}throw new _(`Unexpected schema kind: ${U.kind} for ${S.constructor.name}`)}function Q(A,S,R,U=D){const l=new U(R),i=Y(A,S,l);if(l.offset<R.length)throw new _(`Unexpected ${R.length-l.offset} bytes after deserialized data`);return i}rt.deserialize=Q;function X(A,S,R,U=D){const l=new U(R);return Y(A,S,l)}return rt.deserializeUnchecked=X,rt}var Br=sc(),T={},Di;function oc(){if(Di)return T;Di=1,Object.defineProperty(T,"__esModule",{value:!0}),T.s16=T.s8=T.nu64be=T.u48be=T.u40be=T.u32be=T.u24be=T.u16be=T.nu64=T.u48=T.u40=T.u32=T.u24=T.u16=T.u8=T.offset=T.greedy=T.Constant=T.UTF8=T.CString=T.Blob=T.Boolean=T.BitField=T.BitStructure=T.VariantLayout=T.Union=T.UnionLayoutDiscriminator=T.UnionDiscriminator=T.Structure=T.Sequence=T.DoubleBE=T.Double=T.FloatBE=T.Float=T.NearInt64BE=T.NearInt64=T.NearUInt64BE=T.NearUInt64=T.IntBE=T.Int=T.UIntBE=T.UInt=T.OffsetLayout=T.GreedyCount=T.ExternalLayout=T.bindConstructorLayout=T.nameWithProperty=T.Layout=T.uint8ArrayToBuffer=T.checkUint8Array=void 0,T.constant=T.utf8=T.cstr=T.blob=T.unionLayoutDiscriminator=T.union=T.seq=T.bits=T.struct=T.f64be=T.f64=T.f32be=T.f32=T.ns64be=T.s48be=T.s40be=T.s32be=T.s24be=T.s16be=T.ns64=T.s48=T.s40=T.s32=T.s24=void 0;const t=mo();function e(o){if(!(o instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}T.checkUint8Array=e;function r(o){return e(o),t.Buffer.from(o.buffer,o.byteOffset,o.length)}T.uint8ArrayToBuffer=r;let n=class{constructor(a,d){if(!Number.isInteger(a))throw new TypeError("span must be an integer");this.span=a,this.property=d}makeDestinationObject(){return{}}getSpan(a,d){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(a){const d=Object.create(this.constructor.prototype);return Object.assign(d,this),d.property=a,d}fromArray(a){}};T.Layout=n;function c(o,a){return a.property?o+"["+a.property+"]":o}T.nameWithProperty=c;function s(o,a){if(typeof o!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(o,"layout_"))throw new Error("Class is already bound to a layout");if(!(a&&a instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(a,"boundConstructor_"))throw new Error("layout is already bound to a constructor");o.layout_=a,a.boundConstructor_=o,a.makeDestinationObject=()=>new o,Object.defineProperty(o.prototype,"encode",{value(d,w){return a.encode(this,d,w)},writable:!0}),Object.defineProperty(o,"decode",{value(d,w){return a.decode(d,w)},writable:!0})}T.bindConstructorLayout=s;class f extends n{isCount(){throw new Error("ExternalLayout is abstract")}}T.ExternalLayout=f;class v extends f{constructor(a=1,d){if(!Number.isInteger(a)||0>=a)throw new TypeError("elementSpan must be a (positive) integer");super(-1,d),this.elementSpan=a}isCount(){return!0}decode(a,d=0){e(a);const w=a.length-d;return Math.floor(w/this.elementSpan)}encode(a,d,w){return 0}}T.GreedyCount=v;class p extends f{constructor(a,d=0,w){if(!(a instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(d))throw new TypeError("offset must be integer or undefined");super(a.span,w||a.property),this.layout=a,this.offset=d}isCount(){return this.layout instanceof M||this.layout instanceof k}decode(a,d=0){return this.layout.decode(a,d+this.offset)}encode(a,d,w=0){return this.layout.encode(a,d,w+this.offset)}}T.OffsetLayout=p;class M extends n{constructor(a,d){if(super(a,d),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(a,d=0){return r(a).readUIntLE(d,this.span)}encode(a,d,w=0){return r(d).writeUIntLE(a,w,this.span),this.span}}T.UInt=M;class k extends n{constructor(a,d){if(super(a,d),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(a,d=0){return r(a).readUIntBE(d,this.span)}encode(a,d,w=0){return r(d).writeUIntBE(a,w,this.span),this.span}}T.UIntBE=k;class O extends n{constructor(a,d){if(super(a,d),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(a,d=0){return r(a).readIntLE(d,this.span)}encode(a,d,w=0){return r(d).writeIntLE(a,w,this.span),this.span}}T.Int=O;class B extends n{constructor(a,d){if(super(a,d),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(a,d=0){return r(a).readIntBE(d,this.span)}encode(a,d,w=0){return r(d).writeIntBE(a,w,this.span),this.span}}T.IntBE=B;const _=Math.pow(2,32);function C(o){const a=Math.floor(o/_),d=o-a*_;return{hi32:a,lo32:d}}function F(o,a){return o*_+a}class D extends n{constructor(a){super(8,a)}decode(a,d=0){const w=r(a),I=w.readUInt32LE(d),N=w.readUInt32LE(d+4);return F(N,I)}encode(a,d,w=0){const I=C(a),N=r(d);return N.writeUInt32LE(I.lo32,w),N.writeUInt32LE(I.hi32,w+4),8}}T.NearUInt64=D;class q extends n{constructor(a){super(8,a)}decode(a,d=0){const w=r(a),I=w.readUInt32BE(d),N=w.readUInt32BE(d+4);return F(I,N)}encode(a,d,w=0){const I=C(a),N=r(d);return N.writeUInt32BE(I.hi32,w),N.writeUInt32BE(I.lo32,w+4),8}}T.NearUInt64BE=q;class P extends n{constructor(a){super(8,a)}decode(a,d=0){const w=r(a),I=w.readUInt32LE(d),N=w.readInt32LE(d+4);return F(N,I)}encode(a,d,w=0){const I=C(a),N=r(d);return N.writeUInt32LE(I.lo32,w),N.writeInt32LE(I.hi32,w+4),8}}T.NearInt64=P;class z extends n{constructor(a){super(8,a)}decode(a,d=0){const w=r(a),I=w.readInt32BE(d),N=w.readUInt32BE(d+4);return F(I,N)}encode(a,d,w=0){const I=C(a),N=r(d);return N.writeInt32BE(I.hi32,w),N.writeUInt32BE(I.lo32,w+4),8}}T.NearInt64BE=z;class G extends n{constructor(a){super(4,a)}decode(a,d=0){return r(a).readFloatLE(d)}encode(a,d,w=0){return r(d).writeFloatLE(a,w),4}}T.Float=G;class W extends n{constructor(a){super(4,a)}decode(a,d=0){return r(a).readFloatBE(d)}encode(a,d,w=0){return r(d).writeFloatBE(a,w),4}}T.FloatBE=W;class Y extends n{constructor(a){super(8,a)}decode(a,d=0){return r(a).readDoubleLE(d)}encode(a,d,w=0){return r(d).writeDoubleLE(a,w),8}}T.Double=Y;class Q extends n{constructor(a){super(8,a)}decode(a,d=0){return r(a).readDoubleBE(d)}encode(a,d,w=0){return r(d).writeDoubleBE(a,w),8}}T.DoubleBE=Q;class X extends n{constructor(a,d,w){if(!(a instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(d instanceof f&&d.isCount()||Number.isInteger(d)&&0<=d))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let I=-1;!(d instanceof f)&&0<a.span&&(I=d*a.span),super(I,w),this.elementLayout=a,this.count=d}getSpan(a,d=0){if(0<=this.span)return this.span;let w=0,I=this.count;if(I instanceof f&&(I=I.decode(a,d)),0<this.elementLayout.span)w=I*this.elementLayout.span;else{let N=0;for(;N<I;)w+=this.elementLayout.getSpan(a,d+w),++N}return w}decode(a,d=0){const w=[];let I=0,N=this.count;for(N instanceof f&&(N=N.decode(a,d));I<N;)w.push(this.elementLayout.decode(a,d)),d+=this.elementLayout.getSpan(a,d),I+=1;return w}encode(a,d,w=0){const I=this.elementLayout,N=a.reduce((V,j)=>V+I.encode(j,d,w+V),0);return this.count instanceof f&&this.count.encode(a.length,d,w),N}}T.Sequence=X;class A extends n{constructor(a,d,w){if(!(Array.isArray(a)&&a.reduce((N,V)=>N&&V instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof d=="boolean"&&w===void 0&&(w=d,d=void 0);for(const N of a)if(0>N.span&&N.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let I=-1;try{I=a.reduce((N,V)=>N+V.getSpan(),0)}catch{}super(I,d),this.fields=a,this.decodePrefixes=!!w}getSpan(a,d=0){if(0<=this.span)return this.span;let w=0;try{w=this.fields.reduce((I,N)=>{const V=N.getSpan(a,d);return d+=V,I+V},0)}catch{throw new RangeError("indeterminate span")}return w}decode(a,d=0){e(a);const w=this.makeDestinationObject();for(const I of this.fields)if(I.property!==void 0&&(w[I.property]=I.decode(a,d)),d+=I.getSpan(a,d),this.decodePrefixes&&a.length===d)break;return w}encode(a,d,w=0){const I=w;let N=0,V=0;for(const j of this.fields){let it=j.span;if(V=0<it?it:0,j.property!==void 0){const st=a[j.property];st!==void 0&&(V=j.encode(st,d,w),0>it&&(it=j.getSpan(d,w)))}N=w,w+=it}return N+V-I}fromArray(a){const d=this.makeDestinationObject();for(const w of this.fields)w.property!==void 0&&0<a.length&&(d[w.property]=a.shift());return d}layoutFor(a){if(typeof a!="string")throw new TypeError("property must be string");for(const d of this.fields)if(d.property===a)return d}offsetOf(a){if(typeof a!="string")throw new TypeError("property must be string");let d=0;for(const w of this.fields){if(w.property===a)return d;0>w.span?d=-1:0<=d&&(d+=w.span)}}}T.Structure=A;class S{constructor(a){this.property=a}decode(a,d){throw new Error("UnionDiscriminator is abstract")}encode(a,d,w){throw new Error("UnionDiscriminator is abstract")}}T.UnionDiscriminator=S;class R extends S{constructor(a,d){if(!(a instanceof f&&a.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(d||a.property||"variant"),this.layout=a}decode(a,d){return this.layout.decode(a,d)}encode(a,d,w){return this.layout.encode(a,d,w)}}T.UnionLayoutDiscriminator=R;class U extends n{constructor(a,d,w){let I;if(a instanceof M||a instanceof k)I=new R(new p(a));else if(a instanceof f&&a.isCount())I=new R(a);else if(a instanceof S)I=a;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(d===void 0&&(d=null),!(d===null||d instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(d!==null){if(0>d.span)throw new Error("defaultLayout must have constant span");d.property===void 0&&(d=d.replicate("content"))}let N=-1;d&&(N=d.span,0<=N&&(a instanceof M||a instanceof k)&&(N+=I.layout.span)),super(N,w),this.discriminator=I,this.usesPrefixDiscriminator=a instanceof M||a instanceof k,this.defaultLayout=d,this.registry={};let V=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(j){return V(j)},this.configGetSourceVariant=function(j){V=j.bind(this)}}getSpan(a,d=0){if(0<=this.span)return this.span;const w=this.getVariant(a,d);if(!w)throw new Error("unable to determine span for unrecognized variant");return w.getSpan(a,d)}defaultGetSourceVariant(a){if(Object.prototype.hasOwnProperty.call(a,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(a,this.defaultLayout.property))return;const d=this.registry[a[this.discriminator.property]];if(d&&(!d.layout||d.property&&Object.prototype.hasOwnProperty.call(a,d.property)))return d}else for(const d in this.registry){const w=this.registry[d];if(w.property&&Object.prototype.hasOwnProperty.call(a,w.property))return w}throw new Error("unable to infer src variant")}decode(a,d=0){let w;const I=this.discriminator,N=I.decode(a,d),V=this.registry[N];if(V===void 0){const j=this.defaultLayout;let it=0;this.usesPrefixDiscriminator&&(it=I.layout.span),w=this.makeDestinationObject(),w[I.property]=N,w[j.property]=j.decode(a,d+it)}else w=V.decode(a,d);return w}encode(a,d,w=0){const I=this.getSourceVariant(a);if(I===void 0){const N=this.discriminator,V=this.defaultLayout;let j=0;return this.usesPrefixDiscriminator&&(j=N.layout.span),N.encode(a[N.property],d,w),j+V.encode(a[V.property],d,w+j)}return I.encode(a,d,w)}addVariant(a,d,w){const I=new l(this,a,d,w);return this.registry[a]=I,I}getVariant(a,d=0){let w;return a instanceof Uint8Array?w=this.discriminator.decode(a,d):w=a,this.registry[w]}}T.Union=U;class l extends n{constructor(a,d,w,I){if(!(a instanceof U))throw new TypeError("union must be a Union");if(!Number.isInteger(d)||0>d)throw new TypeError("variant must be a (non-negative) integer");if(typeof w=="string"&&I===void 0&&(I=w,w=null),w){if(!(w instanceof n))throw new TypeError("layout must be a Layout");if(a.defaultLayout!==null&&0<=w.span&&w.span>a.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof I!="string")throw new TypeError("variant must have a String property")}let N=a.span;0>a.span&&(N=w?w.span:0,0<=N&&a.usesPrefixDiscriminator&&(N+=a.discriminator.layout.span)),super(N,I),this.union=a,this.variant=d,this.layout=w||null}getSpan(a,d=0){if(0<=this.span)return this.span;let w=0;this.union.usesPrefixDiscriminator&&(w=this.union.discriminator.layout.span);let I=0;return this.layout&&(I=this.layout.getSpan(a,d+w)),w+I}decode(a,d=0){const w=this.makeDestinationObject();if(this!==this.union.getVariant(a,d))throw new Error("variant mismatch");let I=0;return this.union.usesPrefixDiscriminator&&(I=this.union.discriminator.layout.span),this.layout?w[this.property]=this.layout.decode(a,d+I):this.property?w[this.property]=!0:this.union.usesPrefixDiscriminator&&(w[this.union.discriminator.property]=this.variant),w}encode(a,d,w=0){let I=0;if(this.union.usesPrefixDiscriminator&&(I=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(a,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,d,w);let N=I;if(this.layout&&(this.layout.encode(a[this.property],d,w+I),N+=this.layout.getSpan(d,w+I),0<=this.union.span&&N>this.union.span))throw new Error("encoded variant overruns containing union");return N}fromArray(a){if(this.layout)return this.layout.fromArray(a)}}T.VariantLayout=l;function i(o){return 0>o&&(o+=4294967296),o}class u extends n{constructor(a,d,w){if(!(a instanceof M||a instanceof k))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof d=="string"&&w===void 0&&(w=d,d=!1),4<a.span)throw new RangeError("word cannot exceed 32 bits");super(a.span,w),this.word=a,this.msb=!!d,this.fields=[];let I=0;this._packedSetValue=function(N){return I=i(N),this},this._packedGetValue=function(){return I}}decode(a,d=0){const w=this.makeDestinationObject(),I=this.word.decode(a,d);this._packedSetValue(I);for(const N of this.fields)N.property!==void 0&&(w[N.property]=N.decode(a));return w}encode(a,d,w=0){const I=this.word.decode(d,w);this._packedSetValue(I);for(const N of this.fields)if(N.property!==void 0){const V=a[N.property];V!==void 0&&N.encode(V)}return this.word.encode(this._packedGetValue(),d,w)}addField(a,d){const w=new h(this,a,d);return this.fields.push(w),w}addBoolean(a){const d=new g(this,a);return this.fields.push(d),d}fieldFor(a){if(typeof a!="string")throw new TypeError("property must be string");for(const d of this.fields)if(d.property===a)return d}}T.BitStructure=u;class h{constructor(a,d,w){if(!(a instanceof u))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(d)||0>=d)throw new TypeError("bits must be positive integer");const I=8*a.span,N=a.fields.reduce((V,j)=>V+j.bits,0);if(d+N>I)throw new Error("bits too long for span remainder ("+(I-N)+" of "+I+" remain)");this.container=a,this.bits=d,this.valueMask=(1<<d)-1,d===32&&(this.valueMask=4294967295),this.start=N,this.container.msb&&(this.start=I-N-d),this.wordMask=i(this.valueMask<<this.start),this.property=w}decode(a,d){const w=this.container._packedGetValue();return i(w&this.wordMask)>>>this.start}encode(a){if(typeof a!="number"||!Number.isInteger(a)||a!==i(a&this.valueMask))throw new TypeError(c("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const d=this.container._packedGetValue(),w=i(a<<this.start);this.container._packedSetValue(i(d&~this.wordMask)|w)}}T.BitField=h;class g extends h{constructor(a,d){super(a,1,d)}decode(a,d){return!!super.decode(a,d)}encode(a){typeof a=="boolean"&&(a=+a),super.encode(a)}}T.Boolean=g;class m extends n{constructor(a,d){if(!(a instanceof f&&a.isCount()||Number.isInteger(a)&&0<=a))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let w=-1;a instanceof f||(w=a),super(w,d),this.length=a}getSpan(a,d){let w=this.span;return 0>w&&(w=this.length.decode(a,d)),w}decode(a,d=0){let w=this.span;return 0>w&&(w=this.length.decode(a,d)),r(a).slice(d,d+w)}encode(a,d,w){let I=this.length;if(this.length instanceof f&&(I=a.length),!(a instanceof Uint8Array&&I===a.length))throw new TypeError(c("Blob.encode",this)+" requires (length "+I+") Uint8Array as src");if(w+I>d.length)throw new RangeError("encoding overruns Uint8Array");const N=r(a);return r(d).write(N.toString("hex"),w,I,"hex"),this.length instanceof f&&this.length.encode(I,d,w),I}}T.Blob=m;class b extends n{constructor(a){super(-1,a)}getSpan(a,d=0){e(a);let w=d;for(;w<a.length&&a[w]!==0;)w+=1;return 1+w-d}decode(a,d=0){const w=this.getSpan(a,d);return r(a).slice(d,d+w-1).toString("utf-8")}encode(a,d,w=0){typeof a!="string"&&(a=String(a));const I=t.Buffer.from(a,"utf8"),N=I.length;if(w+N>d.length)throw new RangeError("encoding overruns Buffer");const V=r(d);return I.copy(V,w),V[w+N]=0,N+1}}T.CString=b;class E extends n{constructor(a,d){if(typeof a=="string"&&d===void 0&&(d=a,a=void 0),a===void 0)a=-1;else if(!Number.isInteger(a))throw new TypeError("maxSpan must be an integer");super(-1,d),this.maxSpan=a}getSpan(a,d=0){return e(a),a.length-d}decode(a,d=0){const w=this.getSpan(a,d);if(0<=this.maxSpan&&this.maxSpan<w)throw new RangeError("text length exceeds maxSpan");return r(a).slice(d,d+w).toString("utf-8")}encode(a,d,w=0){typeof a!="string"&&(a=String(a));const I=t.Buffer.from(a,"utf8"),N=I.length;if(0<=this.maxSpan&&this.maxSpan<N)throw new RangeError("text length exceeds maxSpan");if(w+N>d.length)throw new RangeError("encoding overruns Buffer");return I.copy(r(d),w),N}}T.UTF8=E;class y extends n{constructor(a,d){super(0,d),this.value=a}decode(a,d){return this.value}encode(a,d,w){return 0}}return T.Constant=y,T.greedy=(o,a)=>new v(o,a),T.offset=(o,a,d)=>new p(o,a,d),T.u8=o=>new M(1,o),T.u16=o=>new M(2,o),T.u24=o=>new M(3,o),T.u32=o=>new M(4,o),T.u40=o=>new M(5,o),T.u48=o=>new M(6,o),T.nu64=o=>new D(o),T.u16be=o=>new k(2,o),T.u24be=o=>new k(3,o),T.u32be=o=>new k(4,o),T.u40be=o=>new k(5,o),T.u48be=o=>new k(6,o),T.nu64be=o=>new q(o),T.s8=o=>new O(1,o),T.s16=o=>new O(2,o),T.s24=o=>new O(3,o),T.s32=o=>new O(4,o),T.s40=o=>new O(5,o),T.s48=o=>new O(6,o),T.ns64=o=>new P(o),T.s16be=o=>new B(2,o),T.s24be=o=>new B(3,o),T.s32be=o=>new B(4,o),T.s40be=o=>new B(5,o),T.s48be=o=>new B(6,o),T.ns64be=o=>new z(o),T.f32=o=>new G(o),T.f32be=o=>new W(o),T.f64=o=>new Y(o),T.f64be=o=>new Q(o),T.struct=(o,a,d)=>new A(o,a,d),T.bits=(o,a,d)=>new u(o,a,d),T.seq=(o,a,d)=>new X(o,a,d),T.union=(o,a,d)=>new U(o,a,d),T.unionLayoutDiscriminator=(o,a)=>new R(o,a),T.blob=(o,a)=>new m(o,a),T.cstr=o=>new b(o),T.utf8=(o,a)=>new E(o,a),T.constant=(o,a)=>new y(o,a),T}var x=oc(),ac=8078e3,cc=8078001,uc=8078004,fc=8078005,hc=8078006,lc=8078011;function Ts(t){return Array.isArray(t)?"%5B"+t.map(Ts).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function dc([t,e]){return`${t}=${Ts(e)}`}function pc(t){const e=Object.entries(t).map(dc).join("&");return btoa(e)}function gc(t,e={}){{let r=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(r+=` '${pc(e)}'`),`${r}\``}}var Ye=class extends Error{cause=this.cause;context;constructor(...[t,e]){let r,n;if(e){const{cause:s,...f}=e;s&&(n={cause:s}),Object.keys(f).length>0&&(r=f)}const c=gc(t,r);super(c,n),this.context={__code:t,...r},this.name="SolanaError"}};function yc(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function mc(t){return Object.freeze({...t,encode:e=>{const r=new Uint8Array(yc(e,t));return t.write(e,r,0),r}})}function wc(t){return Object.freeze({...t,decode:(e,r=0)=>t.read(e,r)[0]})}function Ve(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function vc(t,e){if(Ve(t)!==Ve(e))throw new Ye(uc);if(Ve(t)&&Ve(e)&&t.fixedSize!==e.fixedSize)throw new Ye(fc,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!Ve(t)&&!Ve(e)&&t.maxSize!==e.maxSize)throw new Ye(hc,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function bc(t,e,r=0){if(e.length-r<=0)throw new Ye(ac,{codecDescription:t})}function xc(t,e,r,n=0){const c=r.length-n;if(c<e)throw new Ye(cc,{bytesLength:c,codecDescription:t,expected:e})}function Ec(t,e,r,n){if(n<e||n>r)throw new Ye(lc,{codecDescription:t,max:r,min:e,value:n})}function Us(t){return t?.endian!==1}function Mc(t){return mc({fixedSize:t.size,write(e,r,n){t.range&&Ec(t.name,t.range[0],t.range[1],e);const c=new ArrayBuffer(t.size);return t.set(new DataView(c),e,Us(t.config)),r.set(new Uint8Array(c),n),n+t.size}})}function Ac(t){return wc({fixedSize:t.size,read(e,r=0){bc(t.name,e,r),xc(t.name,t.size,e,r);const n=new DataView(Bc(e,r,t.size));return[t.get(n,Us(t.config)),r+t.size]}})}function Bc(t,e,r){const n=t.byteOffset+(e??0),c=r??t.byteLength;return t.buffer.slice(n,n+c)}var Sc=(t={})=>Mc({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,r,n)=>e.setBigUint64(0,BigInt(r),n),size:8}),Ic=(t={})=>Ac({config:t,get:(e,r)=>e.getBigUint64(0,r),name:"u64",size:8}),_c=(t={})=>vc(Sc(t),Ic(t));class kc extends TypeError{constructor(e,r){let n;const{message:c,explanation:s,...f}=e,{path:v}=e,p=v.length===0?c:`At path: ${v.join(".")} -- ${c}`;super(s??p),s!=null&&(this.cause=p),Object.assign(this,f),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...r()])}}function Rc(t){return dn(t)&&typeof t[Symbol.iterator]=="function"}function dn(t){return typeof t=="object"&&t!=null}function Un(t){return dn(t)&&!Array.isArray(t)}function oe(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function Lc(t){const{done:e,value:r}=t.next();return e?void 0:r}function Tc(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:c,branch:s}=e,{type:f}=r,{refinement:v,message:p=`Expected a value of type \`${f}\`${v?` with refinement \`${v}\``:""}, but received: \`${oe(n)}\``}=t;return{value:n,type:f,refinement:v,key:c[c.length-1],path:c,branch:s,...t,message:p}}function*Ki(t,e,r,n){Rc(t)||(t=[t]);for(const c of t){const s=Tc(c,e,r,n);s&&(yield s)}}function*$r(t,e,r={}){const{path:n=[],branch:c=[t],coerce:s=!1,mask:f=!1}=r,v={path:n,branch:c,mask:f};s&&(t=e.coercer(t,v));let p="valid";for(const M of e.validator(t,v))M.explanation=r.message,p="not_valid",yield[M,void 0];for(let[M,k,O]of e.entries(t,v)){const B=$r(k,O,{path:M===void 0?n:[...n,M],branch:M===void 0?c:[...c,k],coerce:s,mask:f,message:r.message});for(const _ of B)_[0]?(p=_[0].refinement!=null?"not_refined":"not_valid",yield[_[0],void 0]):s&&(k=_[1],M===void 0?t=k:t instanceof Map?t.set(M,k):t instanceof Set?t.add(k):dn(t)&&(k!==void 0||M in t)&&(t[M]=k))}if(p!=="not_valid")for(const M of e.refiner(t,v))M.explanation=r.message,p="not_refined",yield[M,void 0];p==="valid"&&(yield[void 0,t])}let ge=class{constructor(e){const{type:r,schema:n,validator:c,refiner:s,coercer:f=p=>p,entries:v=function*(){}}=e;this.type=r,this.schema=n,this.entries=v,this.coercer=f,c?this.validator=(p,M)=>{const k=c(p,M);return Ki(k,M,this,p)}:this.validator=()=>[],s?this.refiner=(p,M)=>{const k=s(p,M);return Ki(k,M,this,p)}:this.refiner=()=>[]}assert(e,r){return Uc(e,this,r)}create(e,r){return cn(e,this,r)}is(e){return Os(e,this)}mask(e,r){return Oc(e,this,r)}validate(e,r={}){return pn(e,this,r)}};function Uc(t,e,r){const n=pn(t,e,{message:r});if(n[0])throw n[0]}function cn(t,e,r){const n=pn(t,e,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function Oc(t,e,r){const n=pn(t,e,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function Os(t,e){return!pn(t,e)[0]}function pn(t,e,r={}){const n=$r(t,e,r),c=Lc(n);return c[0]?[new kc(c[0],function*(){for(const f of n)f[0]&&(yield f[0])}),void 0]:[void 0,c[1]]}function ze(t,e){return new ge({type:t,schema:null,validator:e})}function Cc(){return ze("any",()=>!0)}function Z(t){return new ge({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${oe(e)}`}})}function pe(){return ze("boolean",t=>typeof t=="boolean")}function jr(t){return ze("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${oe(e)}`)}function ct(t){const e=oe(t),r=typeof t;return new ge({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${oe(n)}`}})}function Nc(){return ze("never",()=>!1)}function $(t){return new ge({...t,validator:(e,r)=>e===null||t.validator(e,r),refiner:(e,r)=>e===null||t.refiner(e,r)})}function L(){return ze("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${oe(t)}`)}function J(t){return new ge({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function Cs(t,e){return new ge({type:"record",schema:null,*entries(r){if(dn(r))for(const n in r){const c=r[n];yield[n,n,t],yield[n,c,e]}},validator(r){return Un(r)||`Expected an object, but received: ${oe(r)}`},coercer(r){return Un(r)?{...r}:r}})}function H(){return ze("string",t=>typeof t=="string"||`Expected a string, but received: ${oe(t)}`)}function Gr(t){const e=Nc();return new ge({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let c=0;c<n;c++)yield[c,r[c],t[c]||e]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${oe(r)}`},coercer(r){return Array.isArray(r)?r.slice():r}})}function K(t){const e=Object.keys(t);return new ge({type:"type",schema:t,*entries(r){if(dn(r))for(const n of e)yield[n,r[n],t[n]]},validator(r){return Un(r)||`Expected an object, but received: ${oe(r)}`},coercer(r){return Un(r)?{...r}:r}})}function te(t){const e=t.map(r=>r.type).join(" | ");return new ge({type:"union",schema:null,coercer(r,n){for(const c of t){const[s,f]=c.validate(r,{coerce:!0,mask:n.mask});if(!s)return f}return r},validator(r,n){const c=[];for(const s of t){const[...f]=$r(r,s,n),[v]=f;if(v[0])for(const[p]of f)p&&c.push(p);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${oe(r)}`,...c]}})}function en(){return ze("unknown",()=>!0)}function gn(t,e,r){return new ge({...t,coercer:(n,c)=>Os(n,e)?t.coercer(r(n,c),c):t.coercer(n,c)})}const Ns=Wi(Zo);var Sr,Pi;function Fc(){if(Pi)return Sr;Pi=1;const t=Ns.v4;return Sr=function(r,n,c,s){if(typeof r!="string")throw new TypeError(r+" must be a string");s=s||{};const f=typeof s.version=="number"?s.version:2;if(f!==1&&f!==2)throw new TypeError(f+" must be 1 or 2");const v={method:r};if(f===2&&(v.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");v.params=n}if(typeof c>"u"){const p=typeof s.generator=="function"?s.generator:function(){return t()};v.id=p(v,s)}else f===2&&c===null?s.notificationIdNull&&(v.id=null):v.id=c;return v},Sr}var Ir,Hi;function zc(){if(Hi)return Ir;Hi=1;const t=Ns.v4,e=Fc(),r=function(n,c){if(!(this instanceof r))return new r(n,c);c||(c={}),this.options={reviver:typeof c.reviver<"u"?c.reviver:null,replacer:typeof c.replacer<"u"?c.replacer:null,generator:typeof c.generator<"u"?c.generator:function(){return t()},version:typeof c.version<"u"?c.version:2,notificationIdNull:typeof c.notificationIdNull=="boolean"?c.notificationIdNull:!1},this.callServer=n};return Ir=r,r.prototype.request=function(n,c,s,f){const v=this;let p=null;const M=Array.isArray(n)&&typeof c=="function";if(this.options.version===1&&M)throw new TypeError("JSON-RPC 1.0 does not support batching");if(M||!M&&n&&typeof n=="object"&&typeof c=="function")f=c,p=n;else{typeof s=="function"&&(f=s,s=void 0);const B=typeof f=="function";try{p=e(n,c,s,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(_){if(B)return f(_);throw _}if(!B)return p}let O;try{O=JSON.stringify(p,this.options.replacer)}catch(B){return f(B)}return this.callServer(O,function(B,_){v._parseResponse(B,_,f)}),p},r.prototype._parseResponse=function(n,c,s){if(n){s(n);return}if(!c)return s();let f;try{f=JSON.parse(c,this.options.reviver)}catch(v){return s(v)}if(s.length===3)if(Array.isArray(f)){const v=function(M){return typeof M.error<"u"},p=function(M){return!v(M)};return s(null,f.filter(v),f.filter(p))}else return s(null,f.error,f.result);s(null,f)},Ir}zc();class Fs extends os{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,is(e);const n=qr(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const c=this.blockLen,s=new Uint8Array(c);s.set(n.length>c?e.create().update(n).digest():n);for(let f=0;f<s.length;f++)s[f]^=54;this.iHash.update(s),this.oHash=e.create();for(let f=0;f<s.length;f++)s[f]^=106;this.oHash.update(s),Xe(s)}update(e){return Bn(this),this.iHash.update(e),this}digestInto(e){Bn(this),Ne(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:c,destroyed:s,blockLen:f,outputLen:v}=this;return e=e,e.finished=c,e.destroyed=s,e.blockLen=f,e.outputLen=v,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const zs=(t,e,r)=>new Fs(t,e).update(r).digest();zs.create=(t,e)=>new Fs(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vi=(t,e)=>(t+(t>=0?e:-e)/qs)/e;function qc(t,e,r){const[[n,c],[s,f]]=e,v=Vi(f*t,r),p=Vi(-c*t,r);let M=t-v*n-p*s,k=-v*c-p*f;const O=M<xe,B=k<xe;O&&(M=-M),B&&(k=-k);const _=fn(Math.ceil(ds(r)/2))+We;if(M<xe||M>=_||k<xe||k>=_)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:O,k1:M,k2neg:B,k2:k}}function Ur(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function _r(t,e){const r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return Ce(r.lowS,"lowS"),Ce(r.prehash,"prehash"),r.format!==void 0&&Ur(r.format),r}class Dc extends Error{constructor(e=""){super(e)}}const we={Err:Dc,_tlv:{encode:(t,e)=>{const{Err:r}=we;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,c=vn(n);if(c.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?vn(c.length/2|128):"";return vn(t)+s+c+e},decode(t,e){const{Err:r}=we;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const c=e[n++],s=!!(c&128);let f=0;if(!s)f=c;else{const p=c&127;if(!p)throw new r("tlv.decode(long): indefinite length not supported");if(p>4)throw new r("tlv.decode(long): byte length is too big");const M=e.subarray(n,n+p);if(M.length!==p)throw new r("tlv.decode: length bytes not complete");if(M[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const k of M)f=f<<8|k;if(n+=p,f<128)throw new r("tlv.decode(long): not minimal encoding")}const v=e.subarray(n,n+f);if(v.length!==f)throw new r("tlv.decode: wrong value length");return{v,l:e.subarray(n+f)}}},_int:{encode(t){const{Err:e}=we;if(t<xe)throw new e("integer: negative integers are not allowed");let r=vn(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=we;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Dn(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=we,c=ft("signature",t),{v:s,l:f}=n.decode(48,c);if(f.length)throw new e("invalid signature: left bytes after parsing");const{v,l:p}=n.decode(2,s),{v:M,l:k}=n.decode(2,p);if(k.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(v),s:r.decode(M)}},hexFromSig(t){const{_tlv:e,_int:r}=we,n=e.encode(2,r.encode(t.r)),c=e.encode(2,r.encode(t.s)),s=n+c;return e.encode(48,s)}},xe=BigInt(0),We=BigInt(1),qs=BigInt(2),bn=BigInt(3),Kc=BigInt(4);function $e(t,e){const{BYTES:r}=t;let n;if(typeof e=="bigint")n=e;else{let c=ft("private key",e);try{n=t.fromBytes(c)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function Pc(t,e={}){const r=ks("weierstrass",t,e),{Fp:n,Fn:c}=r;let s=r.CURVE;const{h:f,n:v}=s;hn(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:p}=e;if(p&&(!n.is0(s.a)||typeof p.beta!="bigint"||!Array.isArray(p.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const M=Ks(n,c);function k(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function O(U,l,i){const{x:u,y:h}=l.toAffine(),g=n.toBytes(u);if(Ce(i,"isCompressed"),i){k();const m=!n.isOdd(h);return le(Ds(m),g)}else return le(Uint8Array.of(4),g,n.toBytes(h))}function B(U){se(U,void 0,"Point");const{publicKey:l,publicKeyUncompressed:i}=M,u=U.length,h=U[0],g=U.subarray(1);if(u===l&&(h===2||h===3)){const m=n.fromBytes(g);if(!n.isValid(m))throw new Error("bad point: is not on curve, wrong x");const b=F(m);let E;try{E=n.sqrt(b)}catch(a){const d=a instanceof Error?": "+a.message:"";throw new Error("bad point: is not on curve, sqrt error"+d)}k();const y=n.isOdd(E);return(h&1)===1!==y&&(E=n.neg(E)),{x:m,y:E}}else if(u===i&&h===4){const m=n.BYTES,b=n.fromBytes(g.subarray(0,m)),E=n.fromBytes(g.subarray(m,m*2));if(!D(b,E))throw new Error("bad point: is not on curve");return{x:b,y:E}}else throw new Error(`bad point: got length ${u}, expected compressed=${l} or uncompressed=${i}`)}const _=e.toBytes||O,C=e.fromBytes||B;function F(U){const l=n.sqr(U),i=n.mul(l,U);return n.add(n.add(i,n.mul(U,s.a)),s.b)}function D(U,l){const i=n.sqr(l),u=F(U);return n.eql(i,u)}if(!D(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const q=n.mul(n.pow(s.a,bn),Kc),P=n.mul(n.sqr(s.b),BigInt(27));if(n.is0(n.add(q,P)))throw new Error("bad curve params: a or b");function z(U,l,i=!1){if(!n.isValid(l)||i&&n.is0(l))throw new Error(`bad point coordinate ${U}`);return l}function G(U){if(!(U instanceof A))throw new Error("ProjectivePoint expected")}function W(U){if(!p||!p.basises)throw new Error("no endo");return qc(U,p.basises,c.ORDER)}const Y=In((U,l)=>{const{X:i,Y:u,Z:h}=U;if(n.eql(h,n.ONE))return{x:i,y:u};const g=U.is0();l==null&&(l=g?n.ONE:n.inv(h));const m=n.mul(i,l),b=n.mul(u,l),E=n.mul(h,l);if(g)return{x:n.ZERO,y:n.ZERO};if(!n.eql(E,n.ONE))throw new Error("invZ was invalid");return{x:m,y:b}}),Q=In(U=>{if(U.is0()){if(e.allowInfinityPoint&&!n.is0(U.Y))return;throw new Error("bad point: ZERO")}const{x:l,y:i}=U.toAffine();if(!n.isValid(l)||!n.isValid(i))throw new Error("bad point: x or y not field elements");if(!D(l,i))throw new Error("bad point: equation left != right");if(!U.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function X(U,l,i,u,h){return i=new A(n.mul(i.X,U),i.Y,i.Z),l=_n(u,l),i=_n(h,i),l.add(i)}class A{constructor(l,i,u){this.X=z("x",l),this.Y=z("y",i,!0),this.Z=z("z",u),Object.freeze(this)}static CURVE(){return s}static fromAffine(l){const{x:i,y:u}=l||{};if(!l||!n.isValid(i)||!n.isValid(u))throw new Error("invalid affine point");if(l instanceof A)throw new Error("projective point not allowed");return n.is0(i)&&n.is0(u)?A.ZERO:new A(i,u,n.ONE)}static fromBytes(l){const i=A.fromAffine(C(se(l,void 0,"point")));return i.assertValidity(),i}static fromHex(l){return A.fromBytes(ft("pointHex",l))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(l=8,i=!0){return R.createCache(this,l),i||this.multiply(bn),this}assertValidity(){Q(this)}hasEvenY(){const{y:l}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(l)}equals(l){G(l);const{X:i,Y:u,Z:h}=this,{X:g,Y:m,Z:b}=l,E=n.eql(n.mul(i,b),n.mul(g,h)),y=n.eql(n.mul(u,b),n.mul(m,h));return E&&y}negate(){return new A(this.X,n.neg(this.Y),this.Z)}double(){const{a:l,b:i}=s,u=n.mul(i,bn),{X:h,Y:g,Z:m}=this;let b=n.ZERO,E=n.ZERO,y=n.ZERO,o=n.mul(h,h),a=n.mul(g,g),d=n.mul(m,m),w=n.mul(h,g);return w=n.add(w,w),y=n.mul(h,m),y=n.add(y,y),b=n.mul(l,y),E=n.mul(u,d),E=n.add(b,E),b=n.sub(a,E),E=n.add(a,E),E=n.mul(b,E),b=n.mul(w,b),y=n.mul(u,y),d=n.mul(l,d),w=n.sub(o,d),w=n.mul(l,w),w=n.add(w,y),y=n.add(o,o),o=n.add(y,o),o=n.add(o,d),o=n.mul(o,w),E=n.add(E,o),d=n.mul(g,m),d=n.add(d,d),o=n.mul(d,w),b=n.sub(b,o),y=n.mul(d,a),y=n.add(y,y),y=n.add(y,y),new A(b,E,y)}add(l){G(l);const{X:i,Y:u,Z:h}=this,{X:g,Y:m,Z:b}=l;let E=n.ZERO,y=n.ZERO,o=n.ZERO;const a=s.a,d=n.mul(s.b,bn);let w=n.mul(i,g),I=n.mul(u,m),N=n.mul(h,b),V=n.add(i,u),j=n.add(g,m);V=n.mul(V,j),j=n.add(w,I),V=n.sub(V,j),j=n.add(i,h);let it=n.add(g,b);return j=n.mul(j,it),it=n.add(w,N),j=n.sub(j,it),it=n.add(u,h),E=n.add(m,b),it=n.mul(it,E),E=n.add(I,N),it=n.sub(it,E),o=n.mul(a,j),E=n.mul(d,N),o=n.add(E,o),E=n.sub(I,o),o=n.add(I,o),y=n.mul(E,o),I=n.add(w,w),I=n.add(I,w),N=n.mul(a,N),j=n.mul(d,j),I=n.add(I,N),N=n.sub(w,N),N=n.mul(a,N),j=n.add(j,N),w=n.mul(I,j),y=n.add(y,w),w=n.mul(it,j),E=n.mul(V,E),E=n.sub(E,w),w=n.mul(V,I),o=n.mul(it,o),o=n.add(o,w),new A(E,y,o)}subtract(l){return this.add(l.negate())}is0(){return this.equals(A.ZERO)}multiply(l){const{endo:i}=e;if(!c.isValidNot0(l))throw new Error("invalid scalar: out of range");let u,h;const g=m=>R.cached(this,m,b=>Ue(A,b));if(i){const{k1neg:m,k1:b,k2neg:E,k2:y}=W(l),{p:o,f:a}=g(b),{p:d,f:w}=g(y);h=a.add(w),u=X(i.beta,o,d,m,E)}else{const{p:m,f:b}=g(l);u=m,h=b}return Ue(A,[u,h])[0]}multiplyUnsafe(l){const{endo:i}=e,u=this;if(!c.isValid(l))throw new Error("invalid scalar: out of range");if(l===xe||u.is0())return A.ZERO;if(l===We)return u;if(R.hasCache(this))return this.multiply(l);if(i){const{k1neg:h,k1:g,k2neg:m,k2:b}=W(l),{p1:E,p2:y}=Ca(A,u,g,b);return X(i.beta,E,y,h,m)}else return R.unsafe(u,l)}multiplyAndAddUnsafe(l,i,u){const h=this.multiplyUnsafe(i).add(l.multiplyUnsafe(u));return h.is0()?void 0:h}toAffine(l){return Y(this,l)}isTorsionFree(){const{isTorsionFree:l}=e;return f===We?!0:l?l(A,this):R.unsafe(this,v).is0()}clearCofactor(){const{clearCofactor:l}=e;return f===We?this:l?l(A,this):this.multiplyUnsafe(f)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}toBytes(l=!0){return Ce(l,"isCompressed"),this.assertValidity(),_(A,this,l)}toHex(l=!0){return Oe(this.toBytes(l))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(l=!0){return this.toBytes(l)}_setWindowSize(l){this.precompute(l)}static normalizeZ(l){return Ue(A,l)}static msm(l,i){return _s(A,c,l,i)}static fromPrivateKey(l){return A.BASE.multiply($e(c,l))}}A.BASE=new A(s.Gx,s.Gy,n.ONE),A.ZERO=new A(n.ZERO,n.ONE,n.ZERO),A.Fp=n,A.Fn=c;const S=c.BITS,R=new Is(A,e.endo?Math.ceil(S/2):S);return A.BASE.precompute(8),A}function Ds(t){return Uint8Array.of(t?2:3)}function Ks(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function Hc(t,e={}){const{Fn:r}=t,n=e.randomBytes||Dr,c=Object.assign(Ks(t.Fp,r),{seed:As(r.ORDER)});function s(_){try{return!!$e(r,_)}catch{return!1}}function f(_,C){const{publicKey:F,publicKeyUncompressed:D}=c;try{const q=_.length;return C===!0&&q!==F||C===!1&&q!==D?!1:!!t.fromBytes(_)}catch{return!1}}function v(_=n(c.seed)){return Ta(se(_,c.seed,"seed"),r.ORDER)}function p(_,C=!0){return t.BASE.multiply($e(r,_)).toBytes(C)}function M(_){const C=v(_);return{secretKey:C,publicKey:p(C)}}function k(_){if(typeof _=="bigint")return!1;if(_ instanceof t)return!0;const{secretKey:C,publicKey:F,publicKeyUncompressed:D}=c;if(r.allowedLengths||C===F)return;const q=ft("key",_).length;return q===F||q===D}function O(_,C,F=!0){if(k(_)===!0)throw new Error("first arg must be private key");if(k(C)===!1)throw new Error("second arg must be public key");const D=$e(r,_);return t.fromHex(C).multiply(D).toBytes(F)}return Object.freeze({getPublicKey:p,getSharedSecret:O,keygen:M,Point:t,utils:{isValidSecretKey:s,isValidPublicKey:f,randomSecretKey:v,isValidPrivateKey:s,randomPrivateKey:v,normPrivateKeyToScalar:_=>$e(r,_),precompute(_=8,C=t.BASE){return C.precompute(_,!1)}},lengths:c})}function Vc(t,e,r={}){is(e),hn(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=r.randomBytes||Dr,c=r.hmac||((i,...u)=>zs(e,i,le(...u))),{Fp:s,Fn:f}=t,{ORDER:v,BITS:p}=f,{keygen:M,getPublicKey:k,getSharedSecret:O,utils:B,lengths:_}=Hc(t,r),C={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},F="compact";function D(i){const u=v>>We;return i>u}function q(i,u){if(!f.isValidNot0(u))throw new Error(`invalid signature ${i}: out of range 1..Point.Fn.ORDER`);return u}function P(i,u){Ur(u);const h=_.signature,g=u==="compact"?h:u==="recovered"?h+1:void 0;return se(i,g,`${u} signature`)}class z{constructor(u,h,g){this.r=q("r",u),this.s=q("s",h),g!=null&&(this.recovery=g),Object.freeze(this)}static fromBytes(u,h=F){P(u,h);let g;if(h==="der"){const{r:y,s:o}=we.toSig(se(u));return new z(y,o)}h==="recovered"&&(g=u[0],h="compact",u=u.subarray(1));const m=f.BYTES,b=u.subarray(0,m),E=u.subarray(m,m*2);return new z(f.fromBytes(b),f.fromBytes(E),g)}static fromHex(u,h){return this.fromBytes(Sn(u),h)}addRecoveryBit(u){return new z(this.r,this.s,u)}recoverPublicKey(u){const h=s.ORDER,{r:g,s:m,recovery:b}=this;if(b==null||![0,1,2,3].includes(b))throw new Error("recovery id invalid");if(v*qs<h&&b>1)throw new Error("recovery id is ambiguous for h>1 curve");const y=b===2||b===3?g+v:g;if(!s.isValid(y))throw new Error("recovery id 2 or 3 invalid");const o=s.toBytes(y),a=t.fromBytes(le(Ds((b&1)===0),o)),d=f.inv(y),w=W(ft("msgHash",u)),I=f.create(-w*d),N=f.create(m*d),V=t.BASE.multiplyUnsafe(I).add(a.multiplyUnsafe(N));if(V.is0())throw new Error("point at infinify");return V.assertValidity(),V}hasHighS(){return D(this.s)}toBytes(u=F){if(Ur(u),u==="der")return Sn(we.hexFromSig(this));const h=f.toBytes(this.r),g=f.toBytes(this.s);if(u==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return le(Uint8Array.of(this.recovery),h,g)}return le(h,g)}toHex(u){return Oe(this.toBytes(u))}assertValidity(){}static fromCompact(u){return z.fromBytes(ft("sig",u),"compact")}static fromDER(u){return z.fromBytes(ft("sig",u),"der")}normalizeS(){return this.hasHighS()?new z(this.r,f.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Oe(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Oe(this.toBytes("compact"))}}const G=r.bits2int||function(u){if(u.length>8192)throw new Error("input is too large");const h=Dn(u),g=u.length*8-p;return g>0?h>>BigInt(g):h},W=r.bits2int_modN||function(u){return f.create(G(u))},Y=fn(p);function Q(i){return Tr("num < 2^"+p,i,xe,Y),f.toBytes(i)}function X(i,u){return se(i,void 0,"message"),u?se(e(i),void 0,"prehashed message"):i}function A(i,u,h){if(["recovered","canonical"].some(I=>I in h))throw new Error("sign() legacy options not supported");const{lowS:g,prehash:m,extraEntropy:b}=_r(h,C);i=X(i,m);const E=W(i),y=$e(f,u),o=[Q(y),Q(E)];if(b!=null&&b!==!1){const I=b===!0?n(_.secretKey):b;o.push(ft("extraEntropy",I))}const a=le(...o),d=E;function w(I){const N=G(I);if(!f.isValidNot0(N))return;const V=f.inv(N),j=t.BASE.multiply(N).toAffine(),it=f.create(j.x);if(it===xe)return;const st=f.create(V*f.create(d+it*y));if(st===xe)return;let at=(j.x===it?0:2)|Number(j.y&We),rn=st;return g&&D(st)&&(rn=f.neg(st),at^=1),new z(it,rn,at)}return{seed:a,k2sig:w}}function S(i,u,h={}){i=ft("message",i);const{seed:g,k2sig:m}=A(i,u,h);return Ea(e.outputLen,f.BYTES,c)(g,m)}function R(i){let u;const h=typeof i=="string"||un(i),g=!h&&i!==null&&typeof i=="object"&&typeof i.r=="bigint"&&typeof i.s=="bigint";if(!h&&!g)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(g)u=new z(i.r,i.s);else if(h){try{u=z.fromBytes(ft("sig",i),"der")}catch(m){if(!(m instanceof we.Err))throw m}if(!u)try{u=z.fromBytes(ft("sig",i),"compact")}catch{return!1}}return u||!1}function U(i,u,h,g={}){const{lowS:m,prehash:b,format:E}=_r(g,C);if(h=ft("publicKey",h),u=X(ft("message",u),b),"strict"in g)throw new Error("options.strict was renamed to lowS");const y=E===void 0?R(i):z.fromBytes(ft("sig",i),E);if(y===!1)return!1;try{const o=t.fromBytes(h);if(m&&y.hasHighS())return!1;const{r:a,s:d}=y,w=W(u),I=f.inv(d),N=f.create(w*I),V=f.create(a*I),j=t.BASE.multiplyUnsafe(N).add(o.multiplyUnsafe(V));return j.is0()?!1:f.create(j.x)===a}catch{return!1}}function l(i,u,h={}){const{prehash:g}=_r(h,C);return u=X(u,g),z.fromBytes(i,"recovered").recoverPublicKey(u).toBytes()}return Object.freeze({keygen:M,getPublicKey:k,getSharedSecret:O,utils:B,lengths:_,Point:t,sign:S,verify:U,recoverPublicKey:l,Signature:z,hash:e})}function Zc(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(f=>Math.ceil(f/2)))):void 0;const c=Fe(e.n,{BITS:t.nBitLength,allowedLengths:n,modFromBytes:t.wrapPrivateKey}),s={Fp:r,Fn:c,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function $c(t){const{CURVE:e,curveOpts:r}=Zc(t),n={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,hash:t.hash,ecdsaOpts:n}}function jc(t,e){const r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},t,Es(r.Fn.ORDER,r.Fn.BITS))})}function Gc(t){const{CURVE:e,curveOpts:r,hash:n,ecdsaOpts:c}=$c(t),s=Pc(e,r),f=Vc(s,n,c);return jc(t,f)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Yc(t,e){const r=n=>Gc({...t,hash:n});return{...r(e),create:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yr={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Wc={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Zi=BigInt(2);function Xc(t){const e=Yr.p,r=BigInt(3),n=BigInt(6),c=BigInt(11),s=BigInt(22),f=BigInt(23),v=BigInt(44),p=BigInt(88),M=t*t*t%e,k=M*M*t%e,O=ut(k,r,e)*k%e,B=ut(O,r,e)*k%e,_=ut(B,Zi,e)*M%e,C=ut(_,c,e)*_%e,F=ut(C,s,e)*C%e,D=ut(F,v,e)*F%e,q=ut(D,p,e)*D%e,P=ut(q,v,e)*F%e,z=ut(P,r,e)*k%e,G=ut(z,f,e)*C%e,W=ut(G,n,e)*M%e,Y=ut(W,Zi,e);if(!Or.eql(Or.sqr(Y),t))throw new Error("Cannot find square root");return Y}const Or=Fe(Yr.p,{sqrt:Xc}),Jc=Yc({...Yr,Fp:Or,lowS:!0,endo:Wc},fs);ln.utils.randomPrivateKey;ln.getPublicKey;function $i(t){try{return ln.ExtendedPoint.fromHex(t),!0}catch{return!1}}const Qc=(t,e)=>ln.sign(t,e.slice(0,32));ln.verify;const Ps=t=>nt.Buffer.isBuffer(t)?t:t instanceof Uint8Array?nt.Buffer.from(t.buffer,t.byteOffset,t.byteLength):nt.Buffer.from(t);class tu{constructor(e){Object.assign(this,e)}encode(){return nt.Buffer.from(Br.serialize(Mn,this))}static decode(e){return Br.deserialize(Mn,this,e)}static decodeUnchecked(e){return Br.deserializeUnchecked(Mn,this,e)}}const Mn=new Map;var Hs;const eu=32,ke=32;function nu(t){return t._bn!==void 0}let ji=1;class tt extends tu{constructor(e){if(super({}),this._bn=void 0,nu(e))this._bn=e._bn;else{if(typeof e=="string"){const r=he.decode(e);if(r.length!=ke)throw new Error("Invalid public key input");this._bn=new bi(r)}else this._bn=new bi(e);if(this._bn.byteLength()>ke)throw new Error("Invalid public key input")}}static unique(){const e=new tt(ji);return ji+=1,new tt(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return he.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(nt.Buffer);if(e.length===ke)return e;const r=nt.Buffer.alloc(32);return e.copy(r,32-e.length),r}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,r,n){const c=nt.Buffer.concat([e.toBuffer(),nt.Buffer.from(r),n.toBuffer()]),s=zi(c);return new tt(s)}static createProgramAddressSync(e,r){let n=nt.Buffer.alloc(0);e.forEach(function(s){if(s.length>eu)throw new TypeError("Max seed length exceeded");n=nt.Buffer.concat([n,Ps(s)])}),n=nt.Buffer.concat([n,r.toBuffer(),nt.Buffer.from("ProgramDerivedAddress")]);const c=zi(n);if($i(c))throw new Error("Invalid seeds, address must fall off the curve");return new tt(c)}static async createProgramAddress(e,r){return this.createProgramAddressSync(e,r)}static findProgramAddressSync(e,r){let n=255,c;for(;n!=0;){try{const s=e.concat(nt.Buffer.from([n]));c=this.createProgramAddressSync(s,r)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[c,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,r){return this.findProgramAddressSync(e,r)}static isOnCurve(e){const r=new tt(e);return $i(r.toBytes())}}Hs=tt;tt.default=new Hs("11111111111111111111111111111111");Mn.set(tt,{kind:"struct",fields:[["_bn","u256"]]});new tt("BPFLoader1111111111111111111111111111111111");const An=1232,Wr=127,Cr=64;class On{constructor(e,r){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=r}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const r of this.keySegments()){if(e<r.length)return r[e];e-=r.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,f)=>{n.set(s.toBase58(),f)});const c=s=>{const f=n.get(s.toBase58());if(f===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return f};return e.map(s=>({programIdIndex:c(s.programId),accountKeyIndexes:s.keys.map(f=>c(f.pubkey)),data:s.data}))}}const et=(t="publicKey")=>x.blob(32,t),ru=(t="signature")=>x.blob(64,t),je=(t="string")=>{const e=x.struct([x.u32("length"),x.u32("lengthPadding"),x.blob(x.offset(x.u32(),-8),"chars")],t),r=e.decode.bind(e),n=e.encode.bind(e),c=e;return c.decode=(s,f)=>r(s,f).chars.toString(),c.encode=(s,f,v)=>{const p={chars:nt.Buffer.from(s,"utf8")};return n(p,f,v)},c.alloc=s=>x.u32().span+x.u32().span+nt.Buffer.from(s,"utf8").length,c},iu=(t="authorized")=>x.struct([et("staker"),et("withdrawer")],t),su=(t="lockup")=>x.struct([x.ns64("unixTimestamp"),x.ns64("epoch"),et("custodian")],t),ou=(t="voteInit")=>x.struct([et("nodePubkey"),et("authorizedVoter"),et("authorizedWithdrawer"),x.u8("commission")],t),au=(t="voteAuthorizeWithSeedArgs")=>x.struct([x.u32("voteAuthorizationType"),et("currentAuthorityDerivedKeyOwnerPubkey"),je("currentAuthorityDerivedKeySeed"),et("newAuthorized")],t);function ne(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(n&127)<<r*7,r+=1,(n&128)===0)break}return e}function re(t,e){let r=e;for(;;){let n=r&127;if(r>>=7,r==0){t.push(n);break}else n|=128,t.push(n)}}function de(t,e){if(!t)throw new Error(e||"Assertion failed")}class Pn{constructor(e,r){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=r}static compile(e,r){const n=new Map,c=f=>{const v=f.toBase58();let p=n.get(v);return p===void 0&&(p={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(v,p)),p},s=c(r);s.isSigner=!0,s.isWritable=!0;for(const f of e){c(f.programId).isInvoked=!0;for(const v of f.keys){const p=c(v.pubkey);p.isSigner||=v.isSigner,p.isWritable||=v.isWritable}}return new Pn(r,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];de(e.length<=256,"Max static account keys length exceeded");const r=e.filter(([,p])=>p.isSigner&&p.isWritable),n=e.filter(([,p])=>p.isSigner&&!p.isWritable),c=e.filter(([,p])=>!p.isSigner&&p.isWritable),s=e.filter(([,p])=>!p.isSigner&&!p.isWritable),f={numRequiredSignatures:r.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{de(r.length>0,"Expected at least one writable signer key");const[p]=r[0];de(p===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const v=[...r.map(([p])=>new tt(p)),...n.map(([p])=>new tt(p)),...c.map(([p])=>new tt(p)),...s.map(([p])=>new tt(p))];return[f,v]}extractTableLookup(e){const[r,n]=this.drainKeysFoundInLookupTable(e.state.addresses,f=>!f.isSigner&&!f.isInvoked&&f.isWritable),[c,s]=this.drainKeysFoundInLookupTable(e.state.addresses,f=>!f.isSigner&&!f.isInvoked&&!f.isWritable);if(!(r.length===0&&c.length===0))return[{accountKey:e.key,writableIndexes:r,readonlyIndexes:c},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,r){const n=new Array,c=new Array;for(const[s,f]of this.keyMetaMap.entries())if(r(f)){const v=new tt(s),p=e.findIndex(M=>M.equals(v));p>=0&&(de(p<256,"Max lookup table index exceeded"),n.push(p),c.push(v),this.keyMetaMap.delete(s))}return[n,c]}}const Vs="Reached end of buffer unexpectedly";function be(t){if(t.length===0)throw new Error(Vs);return t.shift()}function ie(t,...e){const[r]=e;if(e.length===2?r+(e[1]??0)>t.length:r>=t.length)throw new Error(Vs);return t.splice(...e)}class Cn{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(r=>new tt(r)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(r=>this.indexToProgramIds.set(r.programIdIndex,this.accountKeys[r.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:he.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new On(this.staticAccountKeys)}static compile(e){const r=Pn.compile(e.instructions,e.payerKey),[n,c]=r.getMessageComponents(),f=new On(c).compileInstructions(e.instructions).map(v=>({programIdIndex:v.programIdIndex,accounts:v.accountKeyIndexes,data:he.encode(v.data)}));return new Cn({header:n,accountKeys:c,recentBlockhash:e.recentBlockhash,instructions:f})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-r,s=this.accountKeys.length-r-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=r-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,r)=>!this.isProgramId(r))}serialize(){const e=this.accountKeys.length;let r=[];re(r,e);const n=this.instructions.map(O=>{const{accounts:B,programIdIndex:_}=O,C=Array.from(he.decode(O.data));let F=[];re(F,B.length);let D=[];return re(D,C.length),{programIdIndex:_,keyIndicesCount:nt.Buffer.from(F),keyIndices:B,dataLength:nt.Buffer.from(D),data:C}});let c=[];re(c,n.length);let s=nt.Buffer.alloc(An);nt.Buffer.from(c).copy(s);let f=c.length;n.forEach(O=>{const _=x.struct([x.u8("programIdIndex"),x.blob(O.keyIndicesCount.length,"keyIndicesCount"),x.seq(x.u8("keyIndex"),O.keyIndices.length,"keyIndices"),x.blob(O.dataLength.length,"dataLength"),x.seq(x.u8("userdatum"),O.data.length,"data")]).encode(O,s,f);f+=_}),s=s.slice(0,f);const v=x.struct([x.blob(1,"numRequiredSignatures"),x.blob(1,"numReadonlySignedAccounts"),x.blob(1,"numReadonlyUnsignedAccounts"),x.blob(r.length,"keyCount"),x.seq(et("key"),e,"keys"),et("recentBlockhash")]),p={numRequiredSignatures:nt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:nt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:nt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:nt.Buffer.from(r),keys:this.accountKeys.map(O=>Ps(O.toBytes())),recentBlockhash:he.decode(this.recentBlockhash)};let M=nt.Buffer.alloc(2048);const k=v.encode(p,M);return s.copy(M,k),M.slice(0,k+s.length)}static from(e){let r=[...e];const n=be(r);if(n!==(n&Wr))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const c=be(r),s=be(r),f=ne(r);let v=[];for(let B=0;B<f;B++){const _=ie(r,0,ke);v.push(new tt(nt.Buffer.from(_)))}const p=ie(r,0,ke),M=ne(r);let k=[];for(let B=0;B<M;B++){const _=be(r),C=ne(r),F=ie(r,0,C),D=ne(r),q=ie(r,0,D),P=he.encode(nt.Buffer.from(q));k.push({programIdIndex:_,accounts:F,data:P})}const O={header:{numRequiredSignatures:n,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:s},recentBlockhash:he.encode(nt.Buffer.from(p)),accountKeys:v,instructions:k};return new Cn(O)}}class Nn{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const r of this.addressTableLookups)e+=r.readonlyIndexes.length+r.writableIndexes.length;return e}getAccountKeys(e){let r;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");r=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)r=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new On(this.staticAccountKeys,r)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const c=e-n,s=this.addressTableLookups.reduce((f,v)=>f+v.writableIndexes.length,0);return c<s}else if(e>=this.header.numRequiredSignatures){const c=e-r,f=n-r-this.header.numReadonlyUnsignedAccounts;return c<f}else{const c=r-this.header.numReadonlySignedAccounts;return e<c}}resolveAddressTableLookups(e){const r={writable:[],readonly:[]};for(const n of this.addressTableLookups){const c=e.find(s=>s.key.equals(n.accountKey));if(!c)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<c.state.addresses.length)r.writable.push(c.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<c.state.addresses.length)r.readonly.push(c.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return r}static compile(e){const r=Pn.compile(e.instructions,e.payerKey),n=new Array,c={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const k of s){const O=r.extractTableLookup(k);if(O!==void 0){const[B,{writable:_,readonly:C}]=O;n.push(B),c.writable.push(..._),c.readonly.push(...C)}}const[f,v]=r.getMessageComponents(),M=new On(v,c).compileInstructions(e.instructions);return new Nn({header:f,staticAccountKeys:v,recentBlockhash:e.recentBlockhash,compiledInstructions:M,addressTableLookups:n})}serialize(){const e=Array();re(e,this.staticAccountKeys.length);const r=this.serializeInstructions(),n=Array();re(n,this.compiledInstructions.length);const c=this.serializeAddressTableLookups(),s=Array();re(s,this.addressTableLookups.length);const f=x.struct([x.u8("prefix"),x.struct([x.u8("numRequiredSignatures"),x.u8("numReadonlySignedAccounts"),x.u8("numReadonlyUnsignedAccounts")],"header"),x.blob(e.length,"staticAccountKeysLength"),x.seq(et(),this.staticAccountKeys.length,"staticAccountKeys"),et("recentBlockhash"),x.blob(n.length,"instructionsLength"),x.blob(r.length,"serializedInstructions"),x.blob(s.length,"addressTableLookupsLength"),x.blob(c.length,"serializedAddressTableLookups")]),v=new Uint8Array(An),M=f.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(k=>k.toBytes()),recentBlockhash:he.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:c},v);return v.slice(0,M)}serializeInstructions(){let e=0;const r=new Uint8Array(An);for(const n of this.compiledInstructions){const c=Array();re(c,n.accountKeyIndexes.length);const s=Array();re(s,n.data.length);const f=x.struct([x.u8("programIdIndex"),x.blob(c.length,"encodedAccountKeyIndexesLength"),x.seq(x.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),x.blob(s.length,"encodedDataLength"),x.blob(n.data.length,"data")]);e+=f.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(c),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},r,e)}return r.slice(0,e)}serializeAddressTableLookups(){let e=0;const r=new Uint8Array(An);for(const n of this.addressTableLookups){const c=Array();re(c,n.writableIndexes.length);const s=Array();re(s,n.readonlyIndexes.length);const f=x.struct([et("accountKey"),x.blob(c.length,"encodedWritableIndexesLength"),x.seq(x.u8(),n.writableIndexes.length,"writableIndexes"),x.blob(s.length,"encodedReadonlyIndexesLength"),x.seq(x.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=f.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(c),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},r,e)}return r.slice(0,e)}static deserialize(e){let r=[...e];const n=be(r),c=n&Wr;de(n!==c,"Expected versioned message but received legacy message");const s=c;de(s===0,`Expected versioned message with version 0 but found version ${s}`);const f={numRequiredSignatures:be(r),numReadonlySignedAccounts:be(r),numReadonlyUnsignedAccounts:be(r)},v=[],p=ne(r);for(let C=0;C<p;C++)v.push(new tt(ie(r,0,ke)));const M=he.encode(ie(r,0,ke)),k=ne(r),O=[];for(let C=0;C<k;C++){const F=be(r),D=ne(r),q=ie(r,0,D),P=ne(r),z=new Uint8Array(ie(r,0,P));O.push({programIdIndex:F,accountKeyIndexes:q,data:z})}const B=ne(r),_=[];for(let C=0;C<B;C++){const F=new tt(ie(r,0,ke)),D=ne(r),q=ie(r,0,D),P=ne(r),z=ie(r,0,P);_.push({accountKey:F,writableIndexes:q,readonlyIndexes:z})}return new Nn({header:f,staticAccountKeys:v,recentBlockhash:M,compiledInstructions:O,addressTableLookups:_})}}const Zs={deserializeMessageVersion(t){const e=t[0],r=e&Wr;return r===e?"legacy":r},deserialize:t=>{const e=Zs.deserializeMessageVersion(t);if(e==="legacy")return Cn.from(t);if(e===0)return Nn.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};nt.Buffer.alloc(Cr).fill(0);class Xr{get version(){return this.message.version}constructor(e,r){if(this.signatures=void 0,this.message=void 0,r!==void 0)de(r.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{const n=[];for(let c=0;c<e.header.numRequiredSignatures;c++)n.push(new Uint8Array(Cr));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),r=Array();re(r,this.signatures.length);const n=x.struct([x.blob(r.length,"encodedSignaturesLength"),x.seq(ru(),this.signatures.length,"signatures"),x.blob(e.length,"serializedMessage")]),c=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(r),signatures:this.signatures,serializedMessage:e},c);return c.slice(0,s)}static deserialize(e){let r=[...e];const n=[],c=ne(r);for(let f=0;f<c;f++)n.push(new Uint8Array(ie(r,0,Cr)));const s=Zs.deserialize(new Uint8Array(r));return new Xr(s,n)}sign(e){const r=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const c of e){const s=n.findIndex(f=>f.equals(c.publicKey));de(s>=0,`Cannot sign with non signer key ${c.publicKey.toBase58()}`),this.signatures[s]=Qc(r,c.secretKey)}}addSignature(e,r){de(r.byteLength===64,"Signature must be 64 bytes long");const c=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));de(c>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[c]=r}}new tt("SysvarC1ock11111111111111111111111111111111");new tt("SysvarEpochSchedu1e111111111111111111111111");new tt("Sysvar1nstructions1111111111111111111111111");new tt("SysvarRecentB1ockHashes11111111111111111111");new tt("SysvarRent111111111111111111111111111111111");new tt("SysvarRewards111111111111111111111111111111");new tt("SysvarS1otHashes111111111111111111111111111");new tt("SysvarS1otHistory11111111111111111111111111");new tt("SysvarStakeHistory1111111111111111111111111");const cu=x.nu64("lamportsPerSignature"),uu=x.struct([x.u32("version"),x.u32("state"),et("authorizedPubkey"),et("nonce"),x.struct([cu],"feeCalculator")]);uu.span;function tn(t){const e=x.blob(8,t),r=e.decode.bind(e),n=e.encode.bind(e),c=e,s=_c();return c.decode=(f,v)=>{const p=r(f,v);return s.decode(p)},c.encode=(f,v,p)=>{const M=s.encode(f);return n(M,v,p)},c}Object.freeze({Create:{index:0,layout:x.struct([x.u32("instruction"),x.ns64("lamports"),x.ns64("space"),et("programId")])},Assign:{index:1,layout:x.struct([x.u32("instruction"),et("programId")])},Transfer:{index:2,layout:x.struct([x.u32("instruction"),tn("lamports")])},CreateWithSeed:{index:3,layout:x.struct([x.u32("instruction"),et("base"),je("seed"),x.ns64("lamports"),x.ns64("space"),et("programId")])},AdvanceNonceAccount:{index:4,layout:x.struct([x.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:x.struct([x.u32("instruction"),x.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:x.struct([x.u32("instruction"),et("authorized")])},AuthorizeNonceAccount:{index:7,layout:x.struct([x.u32("instruction"),et("authorized")])},Allocate:{index:8,layout:x.struct([x.u32("instruction"),x.ns64("space")])},AllocateWithSeed:{index:9,layout:x.struct([x.u32("instruction"),et("base"),je("seed"),x.ns64("space"),et("programId")])},AssignWithSeed:{index:10,layout:x.struct([x.u32("instruction"),et("base"),je("seed"),et("programId")])},TransferWithSeed:{index:11,layout:x.struct([x.u32("instruction"),tn("lamports"),je("seed"),et("programId")])},UpgradeNonceAccount:{index:12,layout:x.struct([x.u32("instruction")])}});new tt("11111111111111111111111111111111");new tt("BPFLoader2111111111111111111111111111111111");x.struct([x.u32("typeIndex"),tn("deactivationSlot"),x.nu64("lastExtendedSlot"),x.u8("lastExtendedStartIndex"),x.u8(),x.seq(et(),x.offset(x.u8(),-1),"authority")]);const ht=gn(jr(tt),H(),t=>new tt(t)),$s=Gr([H(),ct("base64")]),Jr=gn(jr(nt.Buffer),$s,t=>nt.Buffer.from(t[0],"base64"));function js(t){return te([K({jsonrpc:ct("2.0"),id:H(),result:t}),K({jsonrpc:ct("2.0"),id:H(),error:K({code:en(),message:H(),data:J(Cc())})})])}const fu=js(en());function ot(t){return gn(js(t),fu,e=>"error"in e?e:{...e,result:cn(e.result,t)})}function ae(t){return ot(K({context:K({slot:L()}),value:t}))}function Hn(t){return K({context:K({slot:L()}),value:t})}const hu=K({foundation:L(),foundationTerm:L(),initial:L(),taper:L(),terminal:L()});ot(Z($(K({epoch:L(),effectiveSlot:L(),amount:L(),postBalance:L(),commission:J($(L()))}))));const lu=Z(K({slot:L(),prioritizationFee:L()})),du=K({total:L(),validator:L(),foundation:L(),epoch:L()}),pu=K({epoch:L(),slotIndex:L(),slotsInEpoch:L(),absoluteSlot:L(),blockHeight:J(L()),transactionCount:J(L())}),gu=K({slotsPerEpoch:L(),leaderScheduleSlotOffset:L(),warmup:pe(),firstNormalEpoch:L(),firstNormalSlot:L()}),yu=Cs(H(),Z(L())),qe=$(te([K({}),H()])),mu=K({err:qe}),wu=ct("receivedSignature");K({"solana-core":H(),"feature-set":J(L())});const vu=K({program:H(),programId:ht,parsed:en()}),bu=K({programId:ht,accounts:Z(ht),data:H()});ae(K({err:$(te([K({}),H()])),logs:$(Z(H())),accounts:J($(Z($(K({executable:pe(),owner:H(),lamports:L(),data:Z(H()),rentEpoch:J(L())}))))),unitsConsumed:J(L()),returnData:J($(K({programId:H(),data:Gr([H(),ct("base64")])}))),innerInstructions:J($(Z(K({index:L(),instructions:Z(te([vu,bu]))}))))}));ae(K({byIdentity:Cs(H(),Z(L())),range:K({firstSlot:L(),lastSlot:L()})}));ot(hu);ot(du);ot(lu);ot(pu);ot(gu);ot(yu);ot(L());ae(K({total:L(),circulating:L(),nonCirculating:L(),nonCirculatingAccounts:Z(ht)}));const xu=K({amount:H(),uiAmount:$(L()),decimals:L(),uiAmountString:J(H())});ae(Z(K({address:ht,amount:H(),uiAmount:$(L()),decimals:L(),uiAmountString:J(H())})));ae(Z(K({pubkey:ht,account:K({executable:pe(),owner:ht,lamports:L(),data:Jr,rentEpoch:L()})})));const Nr=K({program:H(),parsed:en(),space:L()});ae(Z(K({pubkey:ht,account:K({executable:pe(),owner:ht,lamports:L(),data:Nr,rentEpoch:L()})})));ae(Z(K({lamports:L(),address:ht})));const Qr=K({executable:pe(),owner:ht,lamports:L(),data:Jr,rentEpoch:L()});K({pubkey:ht,account:Qr});const Eu=gn(te([jr(nt.Buffer),Nr]),te([$s,Nr]),t=>Array.isArray(t)?cn(t,Jr):t),Mu=K({executable:pe(),owner:ht,lamports:L(),data:Eu,rentEpoch:L()});K({pubkey:ht,account:Mu});K({state:te([ct("active"),ct("inactive"),ct("activating"),ct("deactivating")]),active:L(),inactive:L()});ot(Z(K({signature:H(),slot:L(),err:qe,memo:$(H()),blockTime:J($(L()))})));ot(Z(K({signature:H(),slot:L(),err:qe,memo:$(H()),blockTime:J($(L()))})));K({subscription:L(),result:Hn(Qr)});const Au=K({pubkey:ht,account:Qr});K({subscription:L(),result:Hn(Au)});const Bu=K({parent:L(),slot:L(),root:L()});K({subscription:L(),result:Bu});const Su=te([K({type:te([ct("firstShredReceived"),ct("completed"),ct("optimisticConfirmation"),ct("root")]),slot:L(),timestamp:L()}),K({type:ct("createdBank"),parent:L(),slot:L(),timestamp:L()}),K({type:ct("frozen"),slot:L(),timestamp:L(),stats:K({numTransactionEntries:L(),numSuccessfulTransactions:L(),numFailedTransactions:L(),maxTransactionsPerEntry:L()})}),K({type:ct("dead"),slot:L(),timestamp:L(),err:H()})]);K({subscription:L(),result:Su});K({subscription:L(),result:Hn(te([mu,wu]))});K({subscription:L(),result:L()});K({pubkey:H(),gossip:$(H()),tpu:$(H()),rpc:$(H()),version:$(H())});const Gi=K({votePubkey:H(),nodePubkey:H(),activatedStake:L(),epochVoteAccount:pe(),epochCredits:Z(Gr([L(),L(),L()])),commission:L(),lastVote:L(),rootSlot:$(L())});ot(K({current:Z(Gi),delinquent:Z(Gi)}));const Iu=te([ct("processed"),ct("confirmed"),ct("finalized")]),_u=K({slot:L(),confirmations:$(L()),err:qe,confirmationStatus:J(Iu)});ae(Z($(_u)));ot(L());const Gs=K({accountKey:ht,writableIndexes:Z(L()),readonlyIndexes:Z(L())}),ti=K({signatures:Z(H()),message:K({accountKeys:Z(H()),header:K({numRequiredSignatures:L(),numReadonlySignedAccounts:L(),numReadonlyUnsignedAccounts:L()}),instructions:Z(K({accounts:Z(L()),data:H(),programIdIndex:L()})),recentBlockhash:H(),addressTableLookups:J(Z(Gs))})}),Ys=K({pubkey:ht,signer:pe(),writable:pe(),source:J(te([ct("transaction"),ct("lookupTable")]))}),Ws=K({accountKeys:Z(Ys),signatures:Z(H())}),Xs=K({parsed:en(),program:H(),programId:ht}),Js=K({accounts:Z(ht),data:H(),programId:ht}),ku=te([Js,Xs]),Ru=te([K({parsed:en(),program:H(),programId:H()}),K({accounts:Z(H()),data:H(),programId:H()})]),Qs=gn(ku,Ru,t=>"accounts"in t?cn(t,Js):cn(t,Xs)),to=K({signatures:Z(H()),message:K({accountKeys:Z(Ys),instructions:Z(Qs),recentBlockhash:H(),addressTableLookups:J($(Z(Gs)))})}),Fn=K({accountIndex:L(),mint:H(),owner:J(H()),programId:J(H()),uiTokenAmount:xu}),eo=K({writable:Z(ht),readonly:Z(ht)}),Vn=K({err:qe,fee:L(),innerInstructions:J($(Z(K({index:L(),instructions:Z(K({accounts:Z(L()),data:H(),programIdIndex:L()}))})))),preBalances:Z(L()),postBalances:Z(L()),logMessages:J($(Z(H()))),preTokenBalances:J($(Z(Fn))),postTokenBalances:J($(Z(Fn))),loadedAddresses:J(eo),computeUnitsConsumed:J(L()),costUnits:J(L())}),ei=K({err:qe,fee:L(),innerInstructions:J($(Z(K({index:L(),instructions:Z(Qs)})))),preBalances:Z(L()),postBalances:Z(L()),logMessages:J($(Z(H()))),preTokenBalances:J($(Z(Fn))),postTokenBalances:J($(Z(Fn))),loadedAddresses:J(eo),computeUnitsConsumed:J(L()),costUnits:J(L())}),nn=te([ct(0),ct("legacy")]),De=K({pubkey:H(),lamports:L(),postBalance:$(L()),rewardType:$(H()),commission:J($(L()))});ot($(K({blockhash:H(),previousBlockhash:H(),parentSlot:L(),transactions:Z(K({transaction:ti,meta:$(Vn),version:J(nn)})),rewards:J(Z(De)),blockTime:$(L()),blockHeight:$(L())})));ot($(K({blockhash:H(),previousBlockhash:H(),parentSlot:L(),rewards:J(Z(De)),blockTime:$(L()),blockHeight:$(L())})));ot($(K({blockhash:H(),previousBlockhash:H(),parentSlot:L(),transactions:Z(K({transaction:Ws,meta:$(Vn),version:J(nn)})),rewards:J(Z(De)),blockTime:$(L()),blockHeight:$(L())})));ot($(K({blockhash:H(),previousBlockhash:H(),parentSlot:L(),transactions:Z(K({transaction:to,meta:$(ei),version:J(nn)})),rewards:J(Z(De)),blockTime:$(L()),blockHeight:$(L())})));ot($(K({blockhash:H(),previousBlockhash:H(),parentSlot:L(),transactions:Z(K({transaction:Ws,meta:$(ei),version:J(nn)})),rewards:J(Z(De)),blockTime:$(L()),blockHeight:$(L())})));ot($(K({blockhash:H(),previousBlockhash:H(),parentSlot:L(),rewards:J(Z(De)),blockTime:$(L()),blockHeight:$(L())})));ot($(K({blockhash:H(),previousBlockhash:H(),parentSlot:L(),transactions:Z(K({transaction:ti,meta:$(Vn)})),rewards:J(Z(De)),blockTime:$(L())})));ot($(K({blockhash:H(),previousBlockhash:H(),parentSlot:L(),signatures:Z(H()),blockTime:$(L())})));ot($(K({slot:L(),meta:$(Vn),blockTime:J($(L())),transaction:ti,version:J(nn)})));ot($(K({slot:L(),transaction:to,meta:$(ei),blockTime:J($(L())),version:J(nn)})));ae(K({blockhash:H(),lastValidBlockHeight:L()}));ae(pe());const Lu=K({slot:L(),numTransactions:L(),numSlots:L(),samplePeriodSecs:L()});ot(Z(Lu));ae($(K({feeCalculator:K({lamportsPerSignature:L()})})));ot(H());ot(H());const Tu=K({err:qe,logs:Z(H()),signature:H()});K({result:Hn(Tu),subscription:L()});Object.freeze({CreateLookupTable:{index:0,layout:x.struct([x.u32("instruction"),tn("recentSlot"),x.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:x.struct([x.u32("instruction")])},ExtendLookupTable:{index:2,layout:x.struct([x.u32("instruction"),tn(),x.seq(et(),x.offset(x.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:x.struct([x.u32("instruction")])},CloseLookupTable:{index:4,layout:x.struct([x.u32("instruction")])}});new tt("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:x.struct([x.u8("instruction"),x.u32("units"),x.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:x.struct([x.u8("instruction"),x.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:x.struct([x.u8("instruction"),x.u32("units")])},SetComputeUnitPrice:{index:3,layout:x.struct([x.u8("instruction"),tn("microLamports")])}});new tt("ComputeBudget111111111111111111111111111111");x.struct([x.u8("numSignatures"),x.u8("padding"),x.u16("signatureOffset"),x.u16("signatureInstructionIndex"),x.u16("publicKeyOffset"),x.u16("publicKeyInstructionIndex"),x.u16("messageDataOffset"),x.u16("messageDataSize"),x.u16("messageInstructionIndex")]);new tt("Ed25519SigVerify111111111111111111111111111");Jc.utils.isValidPrivateKey;x.struct([x.u8("numSignatures"),x.u16("signatureOffset"),x.u8("signatureInstructionIndex"),x.u16("ethAddressOffset"),x.u8("ethAddressInstructionIndex"),x.u16("messageDataOffset"),x.u16("messageDataSize"),x.u8("messageInstructionIndex"),x.blob(20,"ethAddress"),x.blob(64,"signature"),x.u8("recoveryId")]);new tt("KeccakSecp256k11111111111111111111111111111");var no;new tt("StakeConfig11111111111111111111111111111111");class ro{constructor(e,r,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=r,this.custodian=n}}no=ro;ro.default=new no(0,0,tt.default);Object.freeze({Initialize:{index:0,layout:x.struct([x.u32("instruction"),iu(),su()])},Authorize:{index:1,layout:x.struct([x.u32("instruction"),et("newAuthorized"),x.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:x.struct([x.u32("instruction")])},Split:{index:3,layout:x.struct([x.u32("instruction"),x.ns64("lamports")])},Withdraw:{index:4,layout:x.struct([x.u32("instruction"),x.ns64("lamports")])},Deactivate:{index:5,layout:x.struct([x.u32("instruction")])},Merge:{index:7,layout:x.struct([x.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:x.struct([x.u32("instruction"),et("newAuthorized"),x.u32("stakeAuthorizationType"),je("authoritySeed"),et("authorityOwner")])}});new tt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:x.struct([x.u32("instruction"),ou()])},Authorize:{index:1,layout:x.struct([x.u32("instruction"),et("newAuthorized"),x.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:x.struct([x.u32("instruction"),x.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:x.struct([x.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:x.struct([x.u32("instruction"),au()])}});new tt("Vote111111111111111111111111111111111111111");new tt("Va1idator1nfo111111111111111111111111111111");K({name:H(),website:J(H()),details:J(H()),iconUrl:J(H()),keybaseUsername:J(H())});new tt("Vote111111111111111111111111111111111111111");x.struct([et("nodePubkey"),et("authorizedWithdrawer"),x.u8("commission"),x.nu64(),x.seq(x.struct([x.nu64("slot"),x.u32("confirmationCount")]),x.offset(x.u32(),-8),"votes"),x.u8("rootSlotValid"),x.nu64("rootSlot"),x.nu64(),x.seq(x.struct([x.nu64("epoch"),et("authorizedVoter")]),x.offset(x.u32(),-8),"authorizedVoters"),x.struct([x.seq(x.struct([et("authorizedPubkey"),x.nu64("epochOfLastAuthorizedSwitch"),x.nu64("targetEpoch")]),32,"buf"),x.nu64("idx"),x.u8("isEmpty")],"priorVoters"),x.nu64(),x.seq(x.struct([x.nu64("epoch"),x.nu64("credits"),x.nu64("prevCredits")]),x.offset(x.u32(),-8),"epochCredits"),x.struct([x.nu64("slot"),x.nu64("timestamp")],"lastTimestamp")]);class Uu extends wo{constructor({config:e,state:r}){super({config:e,state:r})}async switchChain(e){throw fe.unsupportedOperation("Chain switching is not supported by this connector")}async setupProvider(e,r){const n=new vo,c=this.getChain(r),s=this.getProviderHandlers(e),f=So(s);n.push(f);const v=Io(c);n.push(v);const p=this.getInjectedProviderProxy(e);p&&n.push(p);const M=bo(n);this.updateProviderEngineProxy(M),await this.lookupNetwork(e,r)}async lookupNetwork(e,r){return this.update({chainId:r}),r||""}getInjectedProviderProxy(e){}}const Ou=t=>({requestAccounts:async()=>t.publicKey?[Ge.encode(t.publicKey.toBytes())]:[],getPublicKey:async()=>t.publicKey?Ge.encode(t.publicKey.toBytes()):"",getAccounts:async()=>t.publicKey?[Ge.encode(t.publicKey.toBytes())]:[],getPrivateKey:async()=>{throw hr.methodNotSupported()},getSecretKey:async()=>{throw hr.methodNotSupported()},signTransaction:async r=>await t.signTransaction(r.params.message),signMessage:async r=>await t.signMessage(r.params.data,r.params.from,r.params.display),signAllTransactions:async r=>{var n,c;if(!((n=r.params)!==null&&n!==void 0&&n.message)||!((c=r.params)!==null&&c!==void 0&&c.message.length))throw hr.invalidParams("message");return await t.signAllTransactions(r.params.message)},signAndSendTransaction:async r=>await t.signAndSendTransaction(r.params.message)}),io=t=>{switch(t.chainId){case"0x65":return"solana:mainnet";case"0x66":return"solana:testnet";case"0x67":return"solana:devnet";default:return null}};class Cu extends Uu{getProviderHandlers(e){const r=io(this.config.chain),n=()=>{const p=e?.accounts[0];if(!p)throw fe.notConnectedError();return p};return Ou({get publicKey(){return new tt(n().publicKey)},signMessage:async p=>{const M=n(),k=new Uint8Array(Buffer.from(p,"utf-8")),O=await e.features[ns].signMessage({account:M,message:k});return Ge.encode(O[0].signature)},signTransaction:async p=>{const M=n(),k=await e.features[kr].signTransaction({account:M,transaction:new Uint8Array(Buffer.from(p,"base64")),chain:r});return Ge.encode(Xr.deserialize(k[0].signedTransaction).signatures[0])},signAllTransactions:async p=>{const M=n();return Promise.all(p.map(async k=>{const O=await e.features[kr].signTransaction({account:M,transaction:new Uint8Array(Buffer.from(k,"base64")),chain:r});return Buffer.from(O[0].signedTransaction).toString("base64")}))},signAndSendTransaction:async p=>{const M=n(),k=await e.features[es].signAndSendTransaction({account:M,transaction:new Uint8Array(Buffer.from(p,"base64")),chain:r});return Ge.encode(k[0].signature)}})}}class Nu extends $o{constructor(e){super(e),Ee(this,"name",void 0),Ee(this,"connectorNamespace",Eo.SOLANA),Ee(this,"currentChainNamespace",Mo.SOLANA),Ee(this,"type",Ao.EXTERNAL),Ee(this,"isInjected",!0),Ee(this,"status",ue.NOT_READY),Ee(this,"wallet",null),Ee(this,"injectedProvider",null),this.name=e.name,this.icon=e.wallet.icon,this.wallet=["gate","solflare"].includes(this.name)?Object.freeze(e.wallet):e.wallet}get provider(){return this.status!==ue.NOT_READY&&this.injectedProvider?this.injectedProvider:null}get isWalletConnected(){return this.status===ue.CONNECTED&&this.wallet.accounts.length>0}async init(e){await super.init(e);const r=this.coreOptions.chains.find(n=>n.chainId===e.chainId);super.checkInitializationRequirements({chainConfig:r}),this.injectedProvider=new Cu({config:{chain:r,chains:this.coreOptions.chains}}),await this.injectedProvider.setupProvider(this.wallet,e.chainId),this.status=ue.READY,this.emit(Re.READY,this.name);try{if(Bo.debug("initializing solana injected connector"),e.autoConnect&&(this.rehydrated=!0,!await this.connect({chainId:e.chainId})))throw this.rehydrated=!1,fe.connectionError("Failed to rehydrate.")}catch(n){this.emit(Re.REHYDRATION_ERROR,n)}}async connect({chainId:e}){try{super.checkConnectionRequirements();const r=this.coreOptions.chains.find(c=>c.chainId===e);if(!r)throw fe.connectionError("Chain config is not available");this.status=ue.CONNECTING,this.emit(Re.CONNECTING,{connector:this.name});const n=io(r);if(!this.wallet.chains.find(c=>c===n))throw fe.connectionError(`Chain ${n} not supported. Supported chains are ${this.wallet.chains.join(", ")}`);if(this.isWalletConnected||await this.wallet.features[rs].connect(),this.wallet.accounts.length===0)throw fe.connectionError();return this.status=ue.CONNECTED,this.emit(Re.CONNECTED,{connector:this.name,reconnected:this.rehydrated,provider:this.provider}),this.provider}catch(r){throw this.status=ue.READY,this.rehydrated||this.emit(Re.ERRORED,r),this.rehydrated=!1,r}}async disconnect(e={cleanup:!1}){await super.disconnectSession();try{var r;await((r=this.wallet.features[ta])===null||r===void 0?void 0:r.disconnect()),e.cleanup?(this.status=ue.NOT_READY,this.injectedProvider=null):this.status=ue.READY,await super.disconnect()}catch(n){this.emit(Re.ERRORED,fe.disconnectionError(n?.message))}}async getUserInfo(){if(!this.isWalletConnected)throw fe.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async switchChain(e,r=!1){var n;super.checkSwitchChainRequirements(e,r),await((n=this.injectedProvider)===null||n===void 0?void 0:n.switchChain(e))}async enableMFA(){throw new Error("Method not implemented.")}async manageMFA(){throw new Error("Method Not implemented")}}const Pu=t=>({coreOptions:e})=>new Nu({name:xo(t.name),wallet:t,coreOptions:e}),Hu=t=>{const{chains:e,features:r}=t;return e.some(s=>s.startsWith("solana"))?!![rs,ns,kr,es].every(s=>Object.keys(r).includes(s)):void 0};export{qu as createSolanaMipd,Hu as hasSolanaWalletStandardFeatures,Pu as walletStandardConnector};
